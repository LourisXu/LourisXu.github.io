<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="dns-prefetch" href="https://lourisxu.github.io"><title>OpenGL学习之代码归总 | Louris&#39; Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="前言 　　专业课，花了两三周看掉的吧，不过也就看到模板测试没看了，到底啥才是兴趣点呢。　　那本蓝宝书还是没有Github网站教学好啊，这里添上链接，这是最新链接，之前有个老版本的网站，别走错了。　　详细教程网站都有，这里只是类似于备份下之前努力手敲的代码吧，毕竟我的片段着色器、顶点着色器文件是综合的，而且着色器头文件、摄像机头文件、网格头文件和模型头文件都是手打，修改了下的，不过大体都一样，只不"><meta property="og:type" content="article"><meta property="og:title" content="OpenGL学习之代码归总"><meta property="og:url" content="https://lourisxu.github.io/2018/01/29/opengl-learning-code-is-total.html/index.html"><meta property="og:site_name" content="Louris&#39; Blog"><meta property="og:description" content="前言 　　专业课，花了两三周看掉的吧，不过也就看到模板测试没看了，到底啥才是兴趣点呢。　　那本蓝宝书还是没有Github网站教学好啊，这里添上链接，这是最新链接，之前有个老版本的网站，别走错了。　　详细教程网站都有，这里只是类似于备份下之前努力手敲的代码吧，毕竟我的片段着色器、顶点着色器文件是综合的，而且着色器头文件、摄像机头文件、网格头文件和模型头文件都是手打，修改了下的，不过大体都一样，只不"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_One.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Two.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Three.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Four.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Five.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Six.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Seven.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Eight.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Nine.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Ten.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Eleven.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Twelve.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Thirteen.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Fourteen.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Fifteen.png"><meta property="og:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_Seventeen.png"><meta property="article:published_time" content="2018-01-29T07:11:40.000Z"><meta property="article:modified_time" content="2024-01-19T02:20:51.970Z"><meta property="article:author" content="Louris"><meta property="article:tag" content="Essay"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://lourisxu.github.io/assets/img/openGL/OpenGL_One.png"><link rel="alternative" href="/atom.xml" title="Louris&#39; Blog" type="application/atom+xml"><link rel="icon" href="/assets/img/blog/favicon.png"><link rel="stylesheet" href="/./main.e8862b.css"><style>#container.show{background:linear-gradient(200deg,#a0cfe4,#e8c37e)}</style><meta name="generator" content="Hexo 4.2.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style></head><body><div id="container" q-class="show:isCtnShow"><canvas id="anm-canvas" class="anm-canvas"></canvas><div class="left-col" q-class="show:isShow"><div class="overlay" style="background:#00bfff"></div><div class="intrude-less"><header id="header" class="inner"> <a href="/" class="profilepic"><img src="/assets/img/blog/userpic.jpg" class="js-avatar"></a><hgroup><h1 class="header-author"><a href="/">Louris</a></h1></hgroup><p class="header-subtitle">Do what I can</p><nav class="header-menu"><ul><li><a href="/">Home</a></li><li><a href="/categories/DS/">DS</a></li><li><a href="/tags/ML/">ML&amp;DL</a></li><li><a href="/tags/Tech/">Tech</a></li><li><a href="/tags/Algorithm/">Algorithm</a></li></ul></nav><nav class="header-smart-menu"> <a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">All articles</a> <a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">Friends</a> <a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">About me</a></nav><nav><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="230" height="86" src="//music.163.com/outchain/player?type=2&id=2080322&auto=1&height=66"></iframe></nav><nav class="header-nav"><div class="social"><a class="github" target="_blank" href="https://github.com/LourisXu" title="github"><i class="icon-github"></i></a><a class="weibo" target="_blank" href="http://weibo.com/5634881238/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo"><i class="icon-weibo"></i></a><a class="mail" target="_blank" href="mailto:louris@csu.edu.cn" title="mail"><i class="icon-mail"></i></a></div></nav></header></div></div><div class="mid-col" q-class="show:isShow,hide:isShow|isFalse"><nav id="mobile-nav"><div class="overlay js-overlay" style="background:#00bfff"></div><div class="btnctn js-mobile-btnctn"><div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div></div><div class="intrude-less"><header id="header" class="inner"><div class="profilepic"> <img src="/assets/img/blog/userpic.jpg" class="js-avatar"></div><hgroup><h1 class="header-author js-header-author">Louris</h1></hgroup><p class="header-subtitle"><i class="icon icon-quo-left"></i>Do what I can<i class="icon icon-quo-right"></i></p><nav class="header-nav"><div class="social"><a class="github" target="_blank" href="https://github.com/LourisXu" title="github"><i class="icon-github"></i></a><a class="weibo" target="_blank" href="http://weibo.com/5634881238/profile?rightmod=1&wvr=6&mod=personinfo" title="weibo"><i class="icon-weibo"></i></a><a class="mail" target="_blank" href="mailto:louris@csu.edu.cn" title="mail"><i class="icon-mail"></i></a></div></nav><nav class="header-menu js-header-menu"><ul style="width:70%"><li style="width:20%"><a href="/">Home</a></li><li style="width:20%"><a href="/categories/DS/">DS</a></li><li style="width:20%"><a href="/tags/ML/">ML&amp;DL</a></li><li style="width:20%"><a href="/tags/Tech/">Tech</a></li><li style="width:20%"><a href="/tags/Algorithm/">Algorithm</a></li></ul></nav></header></div><div class="mobile-mask" style="display:none" q-show="isShow"></div></nav><div id="wrapper" class="body-wrap"><div class="menu-l"><div class="canvas-wrap"><canvas data-colors="#eaeaea" data-sectionheight="100" data-contentid="js-content" id="myCanvas1" class="anm-canvas"></canvas></div><div id="js-content" class="content-ll"><article id="post-OpenGL/OpenGL学习之代码归总" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"> OpenGL学习之代码归总</h1><a href="/2018/01/29/opengl-learning-code-is-total.html/" class="archive-article-date"><time datetime="2018-01-29T07:11:40.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i> 2018-01-29</time></a></header><div class="article-entry" itemprop="articleBody"><link rel="stylesheet" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1></blockquote><p>　　专业课，花了两三周看掉的吧，不过也就看到模板测试没看了，到底啥才是兴趣点呢。<br>　　那本蓝宝书还是没有Github网站教学好啊，这里添上<a href="https://learnopengl-cn.github.io/intro/" target="_blank" rel="noopener">链接</a>，这是最新链接，之前有个老版本的网站，别走错了。<br>　　详细教程网站都有，这里只是类似于备份下之前努力手敲的代码吧，毕竟我的片段着色器、顶点着色器文件是综合的，而且着色器头文件、摄像机头文件、网格头文件和模型头文件都是手打，修改了下的，不过大体都一样，只不过自己傻傻吧，手打，记忆深刻些罢了，想必不用还是会忘得一干二净吧。</p><blockquote><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1></blockquote><h2 id="本地新建OpenGL文件夹"><a href="#本地新建OpenGL文件夹" class="headerlink" title="本地新建OpenGL文件夹"></a>本地新建OpenGL文件夹</h2><p>①子目录：include——用于放置.h文件<br>②子目录：libs——用于放置.lib文件</p><h2 id="配置GLEW库"><a href="#配置GLEW库" class="headerlink" title="配置GLEW库"></a>配置GLEW库</h2><p>①官网下载地址：<a href="http://glew.sourceforge.net/" target="_blank" rel="noopener">http://glew.sourceforge.net/</a><br><img src="/assets/img/openGL/OpenGL_One.png" alt="OpenGL图示1"><br>②解压Glew压缩包，进入build目录，用本机Visual Studio打开vs12目录下的工程<br><img src="/assets/img/openGL/OpenGL_Two.png" alt="OpenGL图示2"><br>③用Visual Studio打开glew.sln，编译此项目（生成解决方案）<br><img src="/assets/img/openGL/OpenGL_Three.png" alt="OpenGL图示3"><br>④打开glew-2.1.0\lib\Debug\Win32，将glew32sd.lib拷贝至OpenGL\libs文件夹下<br><img src="/assets/img/openGL/OpenGL_Four.png" alt="OpenGL图示4"><br>⑤打开glew-2.1.0\include\GL，将所有文件（elew.h，glew.h，glxew.h，wglew.h）拷贝至OpenGL\include文件夹下<br><img src="/assets/img/openGL/OpenGL_Five.png" alt="OpenGL图示5"></p><h2 id="配置GLFW库"><a href="#配置GLFW库" class="headerlink" title="配置GLFW库"></a>配置GLFW库</h2><p>①安装CMake工具和下载GLFW库：<br>官方下载地址：<a href="https://cmake.org/" target="_blank" rel="noopener">https://cmake.org/</a><br><img src="/assets/img/openGL/OpenGL_Six.png" alt="OpenGL图示6"><br>官网下载地址：<a href="http://www.glfw.org/" target="_blank" rel="noopener">http://www.glfw.org/</a><br><img src="/assets/img/openGL/OpenGL_Seven.png" alt="OpenGL图示7"><br>③安装好CMake后，打开cmake-gui.exe，点击Browse Source将目录设置为glfw-3.2.1目录<br>④点击Browse Build，将目录设置为glfw-3.2.1\build文件夹（build自己新建）<br><img src="/assets/img/openGL/OpenGL_Eight.png" alt="OpenGL图示8"><br>⑤点击Configure，选择目标平台，例如本机的Visual Studio 2017，所以选择Visual Studio 12 2017，点击确定<br>⑥再次Configure，然后Generate生成项目：<br><img src="/assets/img/openGL/OpenGL_Nine.png" alt="OpenGL图示9"><br>⑦关闭CMake，进入build，用Visual Studio打开GLFW.sln，并编译<br><img src="/assets/img/openGL/OpenGL_Ten.png" alt="OpenGL图示10"><br><img src="/assets/img/openGL/OpenGL_Eleven.png" alt="OpenGL图示11"><br>⑧build\src\Debug目录下有刚才编译项目生成的glfw3.lib库，将次库拷贝到OpenGL\libs目录下。将glfw-3.2.1\include下的GLFW中的文件拷贝到OpenGL\include文件夹下</p><h2 id="配置GLAD库"><a href="#配置GLAD库" class="headerlink" title="配置GLAD库"></a>配置GLAD库</h2><p>GLAD是一个开源的库，它能解决我们上面提到的那个繁琐的问题。GLAD的配置与大多数的开源库有些许的不同，GLAD使用了一个在线服务。在这里我们能够告诉GLAD需要定义的OpenGL版本，并且根据这个版本加载所有相关的OpenGL函数。<br>打开GLAD的在线服务（<a href="http://glad.dav1d.de/），将语言(Language)设置为C/C++，在API选项中，选择3.3以上的OpenGL(gl)版本（我们的教程中将使用3.3版本，但更新的版本也能正常工作）。之后将模式(Profile)设置为Core，并且保证生成加载器" target="_blank" rel="noopener">http://glad.dav1d.de/），将语言(Language)设置为C/C++，在API选项中，选择3.3以上的OpenGL(gl)版本（我们的教程中将使用3.3版本，但更新的版本也能正常工作）。之后将模式(Profile)设置为Core，并且保证生成加载器</a>(Generate a loader)的选项是选中的。现在可以先（暂时）忽略拓展(Extensions)中的内容。都选择完之后，点击生成(Generate)按钮来生成库文件。<br><img src="/assets/img/openGL/OpenGL_Twelve.png" alt="OpenGL图示12"><br>GLAD现在应该提供给你了一个zip压缩文件，包含两个头文件目录，和一个glad.c文件。将两个头文件目录（glad和KHR）复制到你的Include文件夹中（或者增加一个额外的项目指向这些目录），并添加glad.c文件到你的工程中。<br>至此，已经配置好OpenGL库：<br><img src="/assets/img/openGL/OpenGL_Thirteen.png" alt="OpenGL图示13"><br><img src="/assets/img/openGL/OpenGL_Fourteen.png" alt="OpenGL图示14"><br><img src="/assets/img/openGL/OpenGL_Fifteen.png" alt="OpenGL图示15"></p><h2 id="项目添加库目录和链接依赖项"><a href="#项目添加库目录和链接依赖项" class="headerlink" title="项目添加库目录和链接依赖项"></a>项目添加库目录和链接依赖项</h2><p>①新建空项目（C++项目）<br>②右击项目-属性-VC++目录<br>包含目录选择定位到OpenGL\include<br>库目录选择定位到OpenGL\libs<br>![OpenGL图示16(/assets/img/openGL/OpenGL_Sixteen.png)]<br>③进入链接器输入-附加依赖项：<br>加入以下库目录：<br>opengl32.Lib<br>glfw3.lib<br>glew32sd.lib<br><img src="/assets/img/openGL/OpenGL_Seventeen.png" alt="OpenGL图示17"></p><blockquote><h1 id="OpenGL-Learn-ElementaryCourse"><a href="#OpenGL-Learn-ElementaryCourse" class="headerlink" title="OpenGL_Learn_ElementaryCourse"></a>OpenGL_Learn_ElementaryCourse</h1></blockquote><h2 id="OpenGL-Learn-ElementaryCourse-One-Geometric-Primitives-cpp"><a href="#OpenGL-Learn-ElementaryCourse-One-Geometric-Primitives-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_One_Geometric_Primitives.cpp"></a>OpenGL_Learn_ElementaryCourse_One_Geometric_Primitives.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//点的属性</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glPointSize(25);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glBegin(GL_POINTS);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//多组双顶点线段</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glPointSize(25);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	//glLineStipple(1, 0xFF00);</span></span><br><span class="line"><span class="comment">	//glEnable(GL_LINE_STIPPLE);</span></span><br><span class="line"><span class="comment">	glBegin(GL_LINES);//GL_LINES GL_LOOP</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="comment">//闭合折线</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glPointSize(25);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span></span><br><span class="line"><span class="comment">	//glLineStipple(1, 0xFF00);</span></span><br><span class="line"><span class="comment">	glEnable(GL_FILL);</span></span><br><span class="line"><span class="comment">	glBegin(GL_LINE_LOOP);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="comment">//不闭合折线</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glPointSize(25);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	//glLineStipple(1, 0xFF00);</span></span><br><span class="line"><span class="comment">	//glEnable(GL_LINE_STIPPLE);</span></span><br><span class="line"><span class="comment">	glBegin(GL_LINE_STRIP);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, 0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.5, -0.5, 0.0);</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//凸多边形</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">	glColor3f(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">	glPointSize(<span class="number">10</span>);</span><br><span class="line">	glLineWidth(<span class="number">25</span>);</span><br><span class="line">	<span class="comment">//glEnable(GL_LINE);</span></span><br><span class="line">	glPolygonMode(GL_FRONT, GL_LINE); <span class="comment">// 设置正面为填充模式</span></span><br><span class="line">	glPolygonMode(GL_BACK, GL_LINE);   <span class="comment">// 设置反面为线形模式</span></span><br><span class="line">	<span class="comment">//glFrontFace(GL_CCW);   // 设置逆时针方向为正面</span></span><br><span class="line">	glFrontFace(GL_CW);</span><br><span class="line">	<span class="comment">//glBegin(GL_QUADS);</span></span><br><span class="line">	glBegin(GL_POLYGON);</span><br><span class="line">	glVertex2f(<span class="number">-0.5f</span>, <span class="number">0.0f</span>);</span><br><span class="line">	glVertex2f(<span class="number">-0.5f</span>, <span class="number">-0.5f</span>);</span><br><span class="line">	glVertex2f(<span class="number">0.0f</span>, <span class="number">-0.5f</span>);</span><br><span class="line">	glVertex2f(<span class="number">0.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line">	<span class="comment">//glVertex2f(-0.25f, -0.25f);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	glEnd();</span><br><span class="line">	glFlush();</span><br><span class="line">}</span><br><span class="line"><span class="comment">//连续填充四边形串</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	//glPointSize(50);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glPolygonMode(GL_FRONT, GL_LINE); // 设置正面为填充模式</span></span><br><span class="line"><span class="comment">	glPolygonMode(GL_BACK, GL_LINE);   // 设置反面为线形模式</span></span><br><span class="line"><span class="comment">	glFrontFace(GL_CCW);               // 设置逆时针方向为正面</span></span><br><span class="line"><span class="comment">	glBegin(GL_QUAD_STRIP);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glVertex2f(-0.5f, -0.5f);</span></span><br><span class="line"><span class="comment">	glVertex2f(-0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">	glVertex2f(0.0f, -0.5f);</span></span><br><span class="line"><span class="comment">	glVertex2f(0.0f, 0.0f);</span></span><br><span class="line"><span class="comment">	glVertex2f(0.5f, -0.5f);</span></span><br><span class="line"><span class="comment">	glVertex2f(0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">	//glVertex2f(0.7f, -0.5f);</span></span><br><span class="line"><span class="comment">	//glVertex2f(0.7f, 0.0f);</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//多组独立填充三角形</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);//线框模式</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glBegin(GL_TRIANGLES);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.4f, 0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.4f, 0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">	glVertex3f(0.0f, -0.5f, 0.0f);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glVertex3f(-0.5f,0.5f,0.0f);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.2f,-0.5f,0.0f);</span></span><br><span class="line"><span class="comment">	glVertex3f(-0.7f,-0.5f,0.0f);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//线型连续填充三角形串</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line"><span class="comment">	glBegin(GL_TRIANGLE_STRIP);</span></span><br><span class="line"><span class="comment">		glVertex3f(-0.9f, -0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">		glVertex3f(-0.5f, 0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">		glVertex3f(0.0f, -0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">		glVertex3f(0.4f, 0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">		//glVertex3f(0.9f, -0.5f, 0.0f);</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="comment">//扇形连续填充三角形串</span></span><br><span class="line"><span class="comment">/*void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">glColor3f(1.0, 0.0, 0.0);</span></span><br><span class="line"><span class="comment">glLineWidth(5);</span></span><br><span class="line"><span class="comment">glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line"><span class="comment">glBegin(GL_TRIANGLE_FAN);</span></span><br><span class="line"><span class="comment">glVertex2f(0.0f, 0.0f);</span></span><br><span class="line"><span class="comment">glVertex2f(0.25f, -0.25f);</span></span><br><span class="line"><span class="comment">glVertex2f(0.25f, 0.25f);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">glVertex2f(-0.25f, 0.25f);</span></span><br><span class="line"><span class="comment">glVertex2f(-0.25f, -0.3f);</span></span><br><span class="line"><span class="comment">glEnd();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="comment">//圆的逼近表示</span></span><br><span class="line"><span class="comment">/*#include &lt;math.h&gt;</span></span><br><span class="line"><span class="comment">#define PI 3.1415926535</span></span><br><span class="line"><span class="comment">GLint circle_points = 128;</span></span><br><span class="line"><span class="comment">void display(void)</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment">	glColor3f(1.0, 1.0, 1.0);</span></span><br><span class="line"><span class="comment">	glLineWidth(25);</span></span><br><span class="line"><span class="comment">	glBegin(GL_LINE_LOOP);</span></span><br><span class="line"><span class="comment">	for (int i = 0; i &lt; circle_points; ++i){</span></span><br><span class="line"><span class="comment">		float angle = (float)(2 * PI / circle_points)*i;</span></span><br><span class="line"><span class="comment">		glVertex2f(cos(angle), sin(angle));</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	glEnd();</span></span><br><span class="line"><span class="comment">	glFlush();</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_COMPAT_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//图元函数</span></span><br><span class="line">		display();</span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Two-Shader-Complicated-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Two-Shader-Complicated-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Two_Shader_Complicated.cpp"></a>OpenGL_Learn_ElementaryCourse_Two_Shader_Complicated.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"Shader.h"</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//"	vertexColor=vec4(0.0f, 1.0f, 0.0f, 1.0f);\n"</span></span><br><span class="line"><span class="comment">//"out vec4 vertexColor;\n" //为顶点着色器指定一个颜色输出</span></span><br><span class="line"><span class="comment">//顶点着色器</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *vertexShaderSource =</span><br><span class="line"><span class="string">"#version 330 core\n"</span></span><br><span class="line"><span class="string">"layout(location = 0) in vec3 aPos;\n"</span> <span class="comment">// 位置变量的属性位置值为 0</span></span><br><span class="line"><span class="string">"layout(location = 1) in vec3 aColor;\n"</span> <span class="comment">// 颜色变量的属性位置值为 1</span></span><br><span class="line"><span class="string">"out vec3 ourColor;\n"</span></span><br><span class="line"><span class="string">"void main()\n"</span></span><br><span class="line"><span class="string">"{\n"</span></span><br><span class="line"><span class="string">"	gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);\n"</span></span><br><span class="line"><span class="string">"	ourColor=aColor;\n"</span>  <span class="comment">// 将ourColor设置为我们从顶点数据那里得到的输入颜色</span></span><br><span class="line"><span class="string">"}\0"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//"   FragColor = vertexColor;\n"</span></span><br><span class="line"><span class="comment">//"	FragColor = ourColor;\n"</span></span><br><span class="line"><span class="comment">//"uniform vec4 ourColor;\n"</span></span><br><span class="line"><span class="comment">//片段着色器</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *fragmentShaderSource = <span class="string">"#version 330 core\n"</span></span><br><span class="line"><span class="comment">//"in vec4 vertexColor;\n" //从顶点着色器传来的输入变量（名称相同、类型相同）</span></span><br><span class="line"><span class="string">"out vec4 FragColor;\n"</span></span><br><span class="line"><span class="string">"in vec3 ourColor;\n"</span></span><br><span class="line"><span class="string">"void main()\n"</span></span><br><span class="line"><span class="string">"{\n"</span></span><br><span class="line"><span class="string">"	FragColor = vec4(ourColor,1.0f);\n"</span></span><br><span class="line"><span class="string">"}\n\0"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//着色器语言——GLSL类C语言</span></span><br><span class="line"><span class="comment">#version version_number	//声明版本</span></span><br><span class="line"><span class="comment">in type in_variable_name; //输入变量</span></span><br><span class="line"><span class="comment">out type out_variable_name; //输出变量</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">uniform type uniform_name;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">int main()</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">// 处理输入并进行一些图形操作</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">// 输出处理过的结果到输出变量</span></span><br><span class="line"><span class="comment">out_variable_name = weird_stuff_we_processed;</span></span><br><span class="line"><span class="comment">}</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">我们在片段着色器中声明了一个uniform vec4的ourColor，</span></span><br><span class="line"><span class="comment">并把片段着色器的输出颜色设置为uniform值的内容。</span></span><br><span class="line"><span class="comment">因为uniform是全局变量，我们可以在任何着色器中定义它们，</span></span><br><span class="line"><span class="comment">而无需通过顶点着色器作为中介。顶点着色器中不需要这个uniform，</span></span><br><span class="line"><span class="comment">所以我们不用在那里定义它。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#version 330 core</span></span><br><span class="line"><span class="comment">out vec4 FragColor;</span></span><br><span class="line"><span class="comment">uniform vec4 ourColor;//在OpenGL程序代码中设定这个变量</span></span><br><span class="line"><span class="comment">void man()</span></span><br><span class="line"><span class="comment">{</span></span><br><span class="line"><span class="comment">	FragColor=ourColor;</span></span><br><span class="line"><span class="comment">}</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	//循环渲染</span></span><br><span class="line"><span class="comment">	//glfwWindowShouldClose函数在我们每次循环的开始前检查一次GLFW是否被要求退出，如果是的话该函数返回true然后渲染循环便结束了，之后为我们就可以关闭应用程序了。</span></span><br><span class="line"><span class="comment">	//glfwPollEvents函数检查有没有触发什么事件（比如键盘输入、鼠标移动等）、更新窗口状态，并调用对应的回调函数（可以通过回调方法手动设置）。</span></span><br><span class="line"><span class="comment">	//glfwSwapBuffers函数会交换颜色缓冲（它是一个储存着GLFW窗口每一个像素颜色值的大缓冲），它在这一迭代中被用来绘制，并且将会作为输出显示在屏幕上。</span></span><br><span class="line"><span class="comment">	while (!glfwWindowShouldClose(window))</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	glfwSwapBuffers(window);</span></span><br><span class="line"><span class="comment">	glfwPollEvents();</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glfwTerminate();*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">/*while (!glfwWindowShouldClose(window))</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	//输入</span></span><br><span class="line"><span class="comment">	processInput(window);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//渲染指令</span></span><br><span class="line"><span class="comment">	//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line"><span class="comment">	//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line"><span class="comment">	glClearColor(0.2f, 0.3f, 0.3f, 1.0f);</span></span><br><span class="line"><span class="comment">	glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//检查并调用事件，交换缓冲</span></span><br><span class="line"><span class="comment">	glfwSwapBuffers(window);</span></span><br><span class="line"><span class="comment">	glfwPollEvents();</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//编译着色器</span></span><br><span class="line">	<span class="comment">//创建一个着色器对象，注意还是用ID来引用的。所以我们储存这个顶点着色器为unsigned int，然后用glCreateShader创建这个着色器</span></span><br><span class="line">	<span class="comment">/*unsigned int vertexShader;</span></span><br><span class="line"><span class="comment">	vertexShader = glCreateShader(GL_VERTEX_SHADER);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//把需要创建的着色器类型以参数形式提供给glCreateShader。由于我们正在创建一个顶点着色器，传递的参数是GL_VERTEX_SHADER。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//下一步我们把这个着色器源码附加到着色器对象上，然后编译它</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//glShaderSource函数把要编译的着色器对象作为第一个参数。第二参数指定了传递的源码字符串数量，这里只有一个。第三个参数是顶点着色器真正的源码，第四个参数我们先设置为NULL。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);</span></span><br><span class="line"><span class="comment">	glCompileShader(vertexShader);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//检测调用CompileShader后编译是否成功</span></span><br><span class="line"><span class="comment">	int success;</span></span><br><span class="line"><span class="comment">	char infoLog[512];</span></span><br><span class="line"><span class="comment">	glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; "ERROR::SHADER::VERTEX::COMPILATION_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//片段着色器</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//片段着色器只需要一个输出变量，这个变量是一个4分量向量，它表示的是最终的输出颜色，我们应该自己将其计算出来。我们可以用out关键字声明输出变量，这里我们命名为FragColor。下面，我们将一个alpha值为1.0(1.0代表完全不透明)的橘黄色的vec4赋值给颜色输出。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	unsigned int fragmentShader;</span></span><br><span class="line"><span class="comment">	fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);</span></span><br><span class="line"><span class="comment">	glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);</span></span><br><span class="line"><span class="comment">	glCompileShader(fragmentShader);</span></span><br><span class="line"><span class="comment">	glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		glGetShaderInfoLog(fragmentShader, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; "ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	//两个着色器现在都编译了，剩下的事情是把两个着色器对象链接到一个用来渲染的着色器程序(Shader Program)中。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//着色器程序</span></span><br><span class="line"><span class="comment">	//色器程序对象(Shader Program Object)是多个着色器合并之后并最终链接完成的版本。如果要使用刚才编译的着色器我们必须把它们链接(Link)为一个着色器程序对象，然后在渲染对象的时候激活这个着色器程序。已激活着色器程序的着色器将在我们发送渲染调用的时候被使用。</span></span><br><span class="line"><span class="comment">	//当链接着色器至一个程序的时候，它会把每个着色器的输出链接到下个着色器的输入。当输出和输入不匹配的时候，你会得到一个连接错误。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//创建一个程序对象</span></span><br><span class="line"><span class="comment">	unsigned int shaderProgram;</span></span><br><span class="line"><span class="comment">	shaderProgram = glCreateProgram();</span></span><br><span class="line"><span class="comment">	//glCreateProgram函数创建一个程序，并返回新创建程序对象的ID引用。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//现在我们需要把之前编译的着色器附加到程序对象上，然后用glLinkProgram链接它们：</span></span><br><span class="line"><span class="comment">	glAttachShader(shaderProgram, vertexShader);</span></span><br><span class="line"><span class="comment">	glAttachShader(shaderProgram, fragmentShader);</span></span><br><span class="line"><span class="comment">	glLinkProgram(shaderProgram);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//检测链接着色器程序是否失败</span></span><br><span class="line"><span class="comment">	glGetProgramiv(shaderProgram, GL_LINK_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		glGetProgramInfoLog(shaderProgram, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; "ERROR::SHADER::PROGRAM::LINKING_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//激活程序对象</span></span><br><span class="line"><span class="comment">	glUseProgram(shaderProgram);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//把着色器对象链接到程序对象以后，记得删除着色器对象，我们不再需要它们了</span></span><br><span class="line"><span class="comment">	glDeleteShader(vertexShader);</span></span><br><span class="line"><span class="comment">	glDeleteShader(fragmentShader);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//链接顶点属性</span></span><br><span class="line">	<span class="comment">//使用glVertexAttribPointer函数告诉OpenGL该如何解析顶点数据（应用到逐个顶点属性上）了</span></span><br><span class="line">	<span class="comment">//位置属性</span></span><br><span class="line">	<span class="comment">//glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(float), (void*)0);</span></span><br><span class="line">	<span class="comment">//glEnableVertexAttribArray(0);</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	glVertexAttribPointer函数的参数非常多，所以我会逐一介绍它们：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	第一个参数指定我们要配置的顶点属性。还记得我们在顶点着色器中使用layout(location = 0)定义了position顶点属性的位置值(Location)吗？它可以把顶点属性的位置值设置为0。因为我们希望把数据传递到这一个顶点属性中，所以这里我们传入0。</span></span><br><span class="line"><span class="comment">	第二个参数指定顶点属性的大小。顶点属性是一个vec3，它由3个值组成，所以大小是3。</span></span><br><span class="line"><span class="comment">	第三个参数指定数据的类型，这里是GL_FLOAT(GLSL中vec*都是由浮点数值组成的)。</span></span><br><span class="line"><span class="comment">	下个参数定义我们是否希望数据被标准化(Normalize)。如果我们设置为GL_TRUE，所有数据都会被映射到0（对于有符号型signed数据是-1）到1之间。我们把它设置为GL_FALSE。</span></span><br><span class="line"><span class="comment">	第五个参数叫做步长(Stride)，它告诉我们在连续的顶点属性组之间的间隔。由于下个组位置数据在3个float之后，我们把步长设置为3 * sizeof(float)。要注意的是由于我们知道这个数组是紧密排列的（在两个顶点属性之间没有空隙）我们也可以设置为0来让OpenGL决定具体步长是多少（只有当数值是紧密排列时才可用）。一旦我们有更多的顶点属性，我们就必须更小心地定义每个顶点属性之间的间隔，我们在后面会看到更多的例子（译注: 这个参数的意思简单说就是从这个属性第二次出现的地方到整个数组0位置之间有多少字节）。</span></span><br><span class="line"><span class="comment">	最后一个参数的类型是void*，所以需要我们进行这个奇怪的强制类型转换。它表示位置数据在缓冲中起始位置的偏移量(Offset)。由于位置数据在数组的开头，所以这里是0。我们会在后面详细解释这个参数。</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//顶点数组</span></span><br><span class="line">	<span class="comment">/*float vertices[] = {</span></span><br><span class="line"><span class="comment">	-0.5f,-0.5f, 0.0f,</span></span><br><span class="line"><span class="comment">	0.5f,-0.5f, 0.0f,</span></span><br><span class="line"><span class="comment">	0.0f, 0.5f, 0.0f</span></span><br><span class="line"><span class="comment">	};*/</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line"></span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右上角</span></span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,<span class="number">1.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,<span class="number">0.0f</span>,<span class="number">1.0f</span>,<span class="comment">// 左下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.0f</span> , <span class="number">0.5f</span>,<span class="number">0.5f</span>,<span class="number">0.5f</span>  <span class="comment">// 左上角</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> indices[] = {</span><br><span class="line">		<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="comment">//第一个三角形</span></span><br><span class="line">		<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>  <span class="comment">//第二个三角形</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> EBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer函数把新创建的缓冲绑定到GL_ARRAY_BUFFER目标上</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象：Vertex Array Object，VAO</span></span><br><span class="line">	<span class="comment">//顶点缓冲对象：Vertex Buffer Object，VBO</span></span><br><span class="line">	<span class="comment">//索引缓冲对象：Element Buffer Object，EBO或Index Buffer Object，IBO</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//OpenGL有很多缓冲对象类型，顶点缓冲对象的缓冲类型是GL_ARRAY_BUFFER</span></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ARRAY_BUFFER, VBO);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//调用glBufferData函数，它会把之前定义的顶点数据复制到缓冲的内存中</span></span><br><span class="line">	<span class="comment">//glBufferData是一个专门用来把用户定义的数据复制到当前绑定缓冲的函数。它的第一个参数是目标缓冲的类型：顶点缓冲对象当前绑定到GL_ARRAY_BUFFER目标上。第二个参数指定传输数据的大小(以字节为单位)；用一个简单的sizeof计算出顶点数据大小就行。第三个参数是我们希望发送的实际数据。</span></span><br><span class="line">	<span class="comment">//第四个参数指定了我们希望显卡如何管理给定的数据。它有三种形式：</span></span><br><span class="line">	<span class="comment">//GL_STATIC_DRAW ：数据不会或几乎不会改变。</span></span><br><span class="line">	<span class="comment">//GL_DYNAMIC_DRAW：数据会被改变很多。</span></span><br><span class="line">	<span class="comment">//GL_STREAM_DRAW ：数据每次绘制时都会改变。</span></span><br><span class="line">	<span class="comment">//三角形的位置数据不会改变，每次渲染调用时都保持原样，所以它的使用类型最好是GL_STATIC_DRAW。如果，比如说一个缓冲中的数据将频繁被改变，那么使用的类型就是GL_DYNAMIC_DRAW或GL_STREAM_DRAW，这样就能确保显卡把数据放在能够高速写入的内存部分。</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点着色其器</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	GLSL着色器语言</span></span><br><span class="line"><span class="comment">	#version 330 core</span></span><br><span class="line"><span class="comment">	layout (location = 0) in vec3 aPos;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	void main()</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建一个VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span><br><span class="line">	glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="keyword">sizeof</span>(indices), indices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">6</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">6</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//画三角形</span></span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		ourShader.use();</span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", 1.0);</span></span><br><span class="line">		glBindVertexArray(VAO);</span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//随着时间改变颜色</span></span><br><span class="line">		<span class="comment">//注意，查询uniform地址不要求你之前使用过着色器程序，但是更新一个uniform之前你必须先使用程序（调用glUseProgram)，</span></span><br><span class="line">		<span class="comment">//因为它是在当前激活的着色器程序中设置uniform的。</span></span><br><span class="line">		<span class="comment">/*float timeValue = (float)glfwGetTime();</span></span><br><span class="line"><span class="comment">		float greenValue = (sin(timeValue) / 2.0f) + 0.5f;</span></span><br><span class="line"><span class="comment">		int vertexColorLocation = glGetUniformLocation(shaderProgram, "ourColor");</span></span><br><span class="line"><span class="comment">		glUniform4f(vertexColorLocation, 0.0f, greenValue, 0.0f, 1.0f);*/</span></span><br><span class="line">		<span class="comment">///////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//三角形非索引缓冲对象设置</span></span><br><span class="line">		<span class="comment">//glDrawArrays(GL_TRIANGLES, 0, 3);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">//glDrawElements(GL_POINT, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Sleep(2000);</span></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Two-Shader-Reduced-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Two-Shader-Reduced-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Two_Shader_Reduced.cpp"></a>OpenGL_Learn_ElementaryCourse_Two_Shader_Reduced.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"Shader.h"</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		<span class="comment">//位置              //颜色</span></span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右上角</span></span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,<span class="number">1.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,<span class="number">0.0f</span>,<span class="number">1.0f</span>,<span class="comment">// 左下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.0f</span> , <span class="number">0.5f</span>,<span class="number">0.5f</span>,<span class="number">0.5f</span>  <span class="comment">// 左上角</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> indices[] = {</span><br><span class="line">		<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="comment">//第一个三角形</span></span><br><span class="line">		<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>  <span class="comment">//第二个三角形</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> EBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span><br><span class="line">	glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="keyword">sizeof</span>(indices), indices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">6</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">6</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//画三角形</span></span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		ourShader.use();<span class="comment">//激活着色器程序</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", 1.0);</span></span><br><span class="line">		glBindVertexArray(VAO);</span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">//glDrawElements(GL_POINT, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Three-Texture-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Three-Texture-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Three_Texture.cpp"></a>OpenGL_Learn_ElementaryCourse_Three_Texture.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"Shader.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"stb_image.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//LearnOpenGL CN 教程中对于纹理坐标有误</span></span><br><span class="line">	<span class="comment">//左上角(0,0),右下角(1,1)</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		   <span class="comment">//位置              //颜色RGBA             //纹理</span></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右上角</span></span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>,<span class="number">2.0f</span>,  <span class="comment">// 右下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,<span class="number">2.0f</span>,  <span class="comment">// 左下角</span></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,<span class="number">0.0f</span>   <span class="comment">// 左上角</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> indices[] = {</span><br><span class="line">		<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="comment">//第一个三角形</span></span><br><span class="line">		<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>  <span class="comment">//第二个三角形</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> EBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span><br><span class="line">	glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="keyword">sizeof</span>(indices), indices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	<span class="comment">//glActiveTexture(GL_TEXTURE0);</span></span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="keyword">float</span> borderColor[] = { <span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">0.0f</span>,<span class="number">1.0f</span> };</span><br><span class="line">	glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span></span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"001.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="comment">/*unsigned int faceTexture;</span></span><br><span class="line"><span class="comment">	glGenTextures(1, &amp;faceTexture);</span></span><br><span class="line"><span class="comment">	glActiveTexture(GL_TEXTURE1);</span></span><br><span class="line"><span class="comment">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span></span><br><span class="line"><span class="comment">	//纹理环绕</span></span><br><span class="line"><span class="comment">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</span></span><br><span class="line"><span class="comment">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</span></span><br><span class="line"><span class="comment">	//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line"><span class="comment">	//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line"><span class="comment">	//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//纹理过滤</span></span><br><span class="line"><span class="comment">	//缩小Minify</span></span><br><span class="line"><span class="comment">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span></span><br><span class="line"><span class="comment">	//放大Magnify</span></span><br><span class="line"><span class="comment">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//多级渐远纹理</span></span><br><span class="line"><span class="comment">	//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line"><span class="comment">	//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//加载纹理图片</span></span><br><span class="line"><span class="comment">	//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line"><span class="comment">	data = stbi_load("test2.jpg", &amp;width, &amp;height, &amp;nrChannels, 0);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	if (data)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);</span></span><br><span class="line"><span class="comment">		glGenerateMipmap(GL_TEXTURE_2D);</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	else</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		std::cout &lt;&lt; "Failed to load texture" &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	stbi_image_free(data);*/</span></span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">//ourShader.setInt("faceTexture", 1);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//画三角形</span></span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		<span class="comment">//glBindVertexArray(VAO);</span></span><br><span class="line">		<span class="comment">//纹理</span></span><br><span class="line">		<span class="comment">/*glActiveTexture(GL_TEXTURE0);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, ourTexture);</span></span><br><span class="line"><span class="comment">		glActiveTexture(GL_TEXTURE1);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, faceTexture);*/</span></span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">//glDrawElements(GL_POINT, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Four-Geometric-Translate-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Four-Geometric-Translate-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Four_Geometric_Translate.cpp"></a>OpenGL_Learn_ElementaryCourse_Four_Geometric_Translate.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//LearnOpenGL CN 教程中对于纹理坐标有误</span></span><br><span class="line">	<span class="comment">//左上角(0,0),右下角(1,1)</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		   <span class="comment">//位置              //颜色RGBA             //纹理</span></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,<span class="number">0.0f</span>,  <span class="comment">// 右上角</span></span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,<span class="number">1.0f</span>,  <span class="comment">// 右下角</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,<span class="number">1.0f</span>,  <span class="comment">// 左下角</span></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,<span class="number">0.0f</span>   <span class="comment">// 左上角</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> indices[] = {</span><br><span class="line">		<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="comment">//第一个三角形</span></span><br><span class="line">		<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>  <span class="comment">//第二个三角形</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> EBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span><br><span class="line">	glBufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="keyword">sizeof</span>(indices), indices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"001.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> faceTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;faceTexture);</span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	data = stbi_load(<span class="string">"test2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	ourShader.setInt(<span class="string">"faceTexture"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue= (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_x = <span class="built_in">sin</span>(timeValue)/<span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_y = <span class="built_in">cos</span>(timeValue)/<span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> rotateValue = <span class="number">0.05f</span>*timeValue;</span><br><span class="line">		<span class="keyword">float</span> scaleValue= (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">1.0f</span>;</span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//画三角形</span></span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line">		<span class="comment">//glBindVertexArray(VAO);</span></span><br><span class="line">		<span class="comment">//纹理</span></span><br><span class="line">		<span class="comment">/*glActiveTexture(GL_TEXTURE0);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, ourTexture);</span></span><br><span class="line"><span class="comment">		glActiveTexture(GL_TEXTURE1);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, faceTexture);*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//几何变换</span></span><br><span class="line">		glm::mat4 trans;</span><br><span class="line">		<span class="comment">//位移</span></span><br><span class="line">		trans = glm::translate(trans, glm::vec3(translateValue_x, translateValue_y, <span class="number">0.0f</span>));</span><br><span class="line">		<span class="comment">//vec = trans*vec;</span></span><br><span class="line">		<span class="comment">//旋转</span></span><br><span class="line">		trans = glm::rotate(trans, glm::degrees(rotateValue), glm::vec3(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>));</span><br><span class="line">		<span class="comment">//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line">		<span class="comment">//均匀缩放</span></span><br><span class="line">		trans = glm::scale(trans, glm::vec3(scaleValue, scaleValue, <span class="number">0.0</span>));</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> transformLoc = glGetUniformLocation(ourShader.ID, <span class="string">"transform"</span>);</span><br><span class="line">		glUniformMatrix4fv(transformLoc, <span class="number">1</span>, GL_FALSE, glm::value_ptr(trans));</span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		glDrawElements(GL_TRIANGLES, <span class="number">6</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">//glDrawElements(GL_POINT, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Five-3DModel-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Five-3DModel-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Five_3DModel.cpp"></a>OpenGL_Learn_ElementaryCourse_Five_3DModel.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//LearnOpenGL CN 教程中对于纹理坐标有误</span></span><br><span class="line">	<span class="comment">//左上角(0,0),右下角(1,1)</span></span><br><span class="line">	<span class="comment">/*float vertices[] = {</span></span><br><span class="line"><span class="comment">		   //位置              //颜色RGBA             //纹理</span></span><br><span class="line"><span class="comment">		 0.5f,  0.5f, 0.0f, 1.0f, 0.0f, 0.0f, 1.0f, 1.0f,0.0f,  // 右上角</span></span><br><span class="line"><span class="comment">		 0.5f, -0.5f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 1.0f,1.0f,  // 右下角</span></span><br><span class="line"><span class="comment">		-0.5f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 0.0f,1.0f,  // 左下角</span></span><br><span class="line"><span class="comment">		-0.5f,  0.5f, 0.0f, 0.5f, 0.5f, 0.5f, 1.0f, 0.0f,0.0f   // 左上角</span></span><br><span class="line"><span class="comment">	};*/</span></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		      <span class="comment">//位置              //颜色RGBA          //纹理</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] = {</span><br><span class="line">		glm::vec3( <span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="comment">/*unsigned int indices[] = {</span></span><br><span class="line"><span class="comment">		0,1,2, //第一个三角形</span></span><br><span class="line"><span class="comment">		2,3,0  //第二个三角形</span></span><br><span class="line"><span class="comment">	};</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	unsigned int EBO;</span></span><br><span class="line"><span class="comment">	glGenBuffers(1, &amp;EBO);*/</span></span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"test.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> faceTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;faceTexture);</span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	data = stbi_load(<span class="string">"test2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	ourShader.setInt(<span class="string">"faceTexture"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//几何变换</span></span><br><span class="line">	<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">	//位移</span></span><br><span class="line"><span class="comment">	trans = glm::translate(trans, glm::vec3(0.12f, 0.12f, 0.0f));</span></span><br><span class="line"><span class="comment">	//vec = trans*vec;</span></span><br><span class="line"><span class="comment">	//旋转</span></span><br><span class="line"><span class="comment">	trans = glm::rotate(trans, glm::degrees(1.2f), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//均匀缩放</span></span><br><span class="line"><span class="comment">	trans = glm::scale(trans, glm::vec3(0.5, 0.5, 0.0));</span></span><br><span class="line"><span class="comment">	unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">	glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue= (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_x = <span class="built_in">sin</span>(timeValue)/<span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_y = <span class="built_in">cos</span>(timeValue)/<span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> rotateValue = <span class="number">0.05f</span>*timeValue;</span><br><span class="line">		<span class="keyword">float</span> scaleValue= (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">1.0f</span>;</span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line">		<span class="comment">//glBindVertexArray(VAO);</span></span><br><span class="line">		<span class="comment">//纹理</span></span><br><span class="line">		<span class="comment">/*glActiveTexture(GL_TEXTURE0);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, ourTexture);</span></span><br><span class="line"><span class="comment">		glActiveTexture(GL_TEXTURE1);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, faceTexture);*/</span></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		<span class="comment">//glm::mat4 model;</span></span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		<span class="comment">//model = glm::rotate(model,(float)glfwGetTime()* glm::radians(-55.0f), glm::vec3(0.5f, 1.0f, 0.0f));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//建立一个观察矩阵 从世界空间的原点上方观察进入观察空间</span></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//向后移动</span></span><br><span class="line">		view = glm::translate(view, glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-3.0f</span>));</span><br><span class="line"></span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		projection = glm::perspective(glm::radians(<span class="number">45.0f</span>), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////</span></span><br><span class="line">		<span class="comment">//正射投影矩阵,左右 底顶 前后</span></span><br><span class="line">		<span class="comment">//glm::ortho(0.0f, 800.0f, 0.0f, 600.0f, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">//透视投影矩阵 视野(角度/弧度) 宽高比(视口宽与高之比) 近、远平面</span></span><br><span class="line">		<span class="comment">//glm::mat4 proj = glm::perspective(glm::radians(45.0f), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">/////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//将矩阵传入着色器</span></span><br><span class="line">		<span class="comment">//恩，又内置了！</span></span><br><span class="line">		<span class="comment">//ourShader.setMat4("model", model);</span></span><br><span class="line">		ourShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		ourShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		<span class="comment">/*int modelLoc = glGetUniformLocation(ourShader.ID, "model");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(modelLoc, 1, GL_FALSE, glm::value_ptr(model));</span></span><br><span class="line"><span class="comment">		int viewLoc = glGetUniformLocation(ourShader.ID, "view");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(viewLoc, 1, GL_FALSE, glm::value_ptr(view));</span></span><br><span class="line"><span class="comment">		int proLoc = glGetUniformLocation(ourShader.ID, "projection");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(proLoc, 1, GL_FALSE, glm::value_ptr(projection));*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//几何变换</span></span><br><span class="line">		<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">		//位移</span></span><br><span class="line"><span class="comment">		trans = glm::translate(trans, glm::vec3(translateValue_x, translateValue_y, 0.0f));</span></span><br><span class="line"><span class="comment">		//vec = trans*vec;</span></span><br><span class="line"><span class="comment">		//旋转</span></span><br><span class="line"><span class="comment">		trans = glm::rotate(trans, glm::degrees(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//均匀缩放</span></span><br><span class="line"><span class="comment">		trans = glm::scale(trans, glm::vec3(scaleValue, scaleValue, 0.0));</span></span><br><span class="line"><span class="comment">		unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle = <span class="number">20.0f</span>*i+<span class="number">180.0f</span>;</span><br><span class="line">			<span class="keyword">if</span> (i!=<span class="number">0</span>)</span><br><span class="line">			{</span><br><span class="line">				model = glm::rotate(model, (<span class="keyword">float</span>)glfwGetTime()* glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			{</span><br><span class="line">				model = glm::rotate(model, glm::radians(angle), glm::vec3(<span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>));</span><br><span class="line">			}</span><br><span class="line">			ourShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//glDrawArrays(GL_TRIANGLES, 0, 36);</span></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		<span class="comment">//glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Six-Camera-Origin-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Six-Camera-Origin-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Six_Camera_Origin.cpp"></a>OpenGL_Learn_ElementaryCourse_Six_Camera_Origin.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//摄像机</span></span><br><span class="line"><span class="comment">//1.摄像机位置</span></span><br><span class="line">glm::vec3 cameraPos = glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.摄像机方向</span></span><br><span class="line">glm::vec3 cameraTarget = glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line"><span class="comment">//与摄像机实际指向的方向是正好相反的,方向向量</span></span><br><span class="line">glm::vec3 cameraDirection = glm::normalize(cameraPos - cameraTarget);<span class="comment">//这个向量减法很牵强，除非cameraTarget不是原点才有意义吧？</span></span><br><span class="line"></span><br><span class="line">																	 <span class="comment">//3.右轴</span></span><br><span class="line">glm::vec3 up = glm::vec3(<span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>);<span class="comment">//这不就是直接定义了上轴吗！！！！</span></span><br><span class="line">										   <span class="comment">//计算叉乘</span></span><br><span class="line">glm::vec3 cameraRight = glm::normalize(glm::cross(up, cameraDirection));</span><br><span class="line"><span class="comment">//std::cout &lt;&lt; cameraRight.x &lt;&lt;std::endl&lt;&lt; cameraRight.y &lt;&lt;std::endl&lt;&lt; cameraRight.z &lt;&lt;std:: endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.上轴</span></span><br><span class="line">glm::vec3 cameraUp = glm::normalize(glm::cross(cameraDirection, cameraRight));</span><br><span class="line"><span class="comment">//std::cout &lt;&lt; cameraUp.x &lt;&lt; std::endl &lt;&lt; cameraUp.y &lt;&lt; std::endl &lt;&lt; cameraUp.z &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">glm::vec3 cameraFront = glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>);</span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> cameraSpeed = <span class="number">2.5f</span>*deltaTime;</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		cameraPos += cameraSpeed*cameraFront;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		cameraPos -= cameraSpeed*cameraFront;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">	<span class="keyword">float</span> sensitivity = <span class="number">0.05f</span>;</span><br><span class="line">	xoffset *= sensitivity;</span><br><span class="line">	yoffset *= sensitivity;</span><br><span class="line"></span><br><span class="line">	yaw += xoffset;</span><br><span class="line">	pitch += yoffset;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pitch &gt; <span class="number">89.0f</span>)</span><br><span class="line">	{</span><br><span class="line">		pitch = <span class="number">89.0f</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (pitch &lt; <span class="number">-89.0f</span>)</span><br><span class="line">	{</span><br><span class="line">		pitch = <span class="number">-89.0f</span>;</span><br><span class="line">	}</span><br><span class="line">	glm::vec3 front;</span><br><span class="line">	front.x = <span class="built_in">cos</span>(glm::radians(pitch))*<span class="built_in">cos</span>(glm::radians(yaw));</span><br><span class="line">	front.y = <span class="built_in">sin</span>(glm::radians(pitch));</span><br><span class="line">	front.z = <span class="built_in">cos</span>(glm::radians(pitch))*<span class="built_in">sin</span>(glm::radians(yaw));</span><br><span class="line">	cameraFront = glm::normalize(front);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> fov = <span class="number">45.0f</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (fov &gt;= <span class="number">0.1</span>&amp;&amp;fov &lt;= <span class="number">45.0f</span>)</span><br><span class="line">	{</span><br><span class="line">		fov -= (<span class="keyword">float</span>)yoffset;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (fov &lt;= <span class="number">0.1f</span>)</span><br><span class="line">	{</span><br><span class="line">		fov = <span class="number">0.1f</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (fov &gt;= <span class="number">45.0f</span>)</span><br><span class="line">	{</span><br><span class="line">		fov = <span class="number">45.0f</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//LearnOpenGL CN 教程中对于纹理坐标有误</span></span><br><span class="line">	<span class="comment">//左上角(0,0),右下角(1,1)</span></span><br><span class="line">	<span class="comment">/*float vertices[] = {</span></span><br><span class="line"><span class="comment">	//位置              //颜色RGBA             //纹理</span></span><br><span class="line"><span class="comment">	0.5f,  0.5f, 0.0f, 1.0f, 0.0f, 0.0f, 1.0f, 1.0f,0.0f,  // 右上角</span></span><br><span class="line"><span class="comment">	0.5f, -0.5f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 1.0f,1.0f,  // 右下角</span></span><br><span class="line"><span class="comment">	-0.5f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 0.0f,1.0f,  // 左下角</span></span><br><span class="line"><span class="comment">	-0.5f,  0.5f, 0.0f, 0.5f, 0.5f, 0.5f, 1.0f, 0.0f,0.0f   // 左上角</span></span><br><span class="line"><span class="comment">	};*/</span></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		<span class="comment">//位置              //颜色RGBA          //纹理</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] = {</span><br><span class="line">		glm::vec3(<span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="comment">/*unsigned int indices[] = {</span></span><br><span class="line"><span class="comment">	0,1,2, //第一个三角形</span></span><br><span class="line"><span class="comment">	2,3,0  //第二个三角形</span></span><br><span class="line"><span class="comment">	};</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	unsigned int EBO;</span></span><br><span class="line"><span class="comment">	glGenBuffers(1, &amp;EBO);*/</span></span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"test.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> faceTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;faceTexture);</span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	data = stbi_load(<span class="string">"test2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	ourShader.setInt(<span class="string">"faceTexture"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//几何变换</span></span><br><span class="line">	<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">	//位移</span></span><br><span class="line"><span class="comment">	trans = glm::translate(trans, glm::vec3(0.12f, 0.12f, 0.0f));</span></span><br><span class="line"><span class="comment">	//vec = trans*vec;</span></span><br><span class="line"><span class="comment">	//旋转</span></span><br><span class="line"><span class="comment">	trans = glm::rotate(trans, glm::degrees(1.2f), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//均匀缩放</span></span><br><span class="line"><span class="comment">	trans = glm::scale(trans, glm::vec3(0.5, 0.5, 0.0));</span></span><br><span class="line"><span class="comment">	unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">	glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_x = <span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_y = <span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> rotateValue = <span class="number">0.05f</span>*timeValue;</span><br><span class="line">		<span class="keyword">float</span> scaleValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		<span class="comment">//glm::mat4 model;</span></span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		<span class="comment">//model = glm::rotate(model,(float)glfwGetTime()* glm::radians(-55.0f), glm::vec3(0.5f, 1.0f, 0.0f));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//建立一个观察矩阵 从世界空间的原点上方观察进入观察空间</span></span><br><span class="line">		<span class="comment">//glm::mat4 view;</span></span><br><span class="line">		<span class="comment">//向后移动</span></span><br><span class="line">		<span class="comment">//view = glm::translate(view, glm::vec3(0.0f, 0.0f, -3.0f));</span></span><br><span class="line">		<span class="comment">//LookAt</span></span><br><span class="line">		<span class="comment">//glm::mat4 view;</span></span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraTarget, cameraUp);</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">float</span> radius = <span class="number">10.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> camX = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime())*radius;</span><br><span class="line">		<span class="keyword">float</span> camZ = (<span class="keyword">float</span>)<span class="built_in">cos</span>(glfwGetTime())*radius;</span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		projection = glm::perspective(glm::radians(fov), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////</span></span><br><span class="line">		<span class="comment">//正射投影矩阵,左右 底顶 前后</span></span><br><span class="line">		<span class="comment">//glm::ortho(0.0f, 800.0f, 0.0f, 600.0f, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">//透视投影矩阵 视野(角度/弧度) 宽高比(视口宽与高之比) 近、远平面</span></span><br><span class="line">		<span class="comment">//glm::mat4 proj = glm::perspective(glm::radians(45.0f), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">/////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//将矩阵传入着色器</span></span><br><span class="line">		<span class="comment">//恩，又内置了！</span></span><br><span class="line">		<span class="comment">//ourShader.setMat4("model", model);</span></span><br><span class="line">		ourShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		ourShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		<span class="comment">/*int modelLoc = glGetUniformLocation(ourShader.ID, "model");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(modelLoc, 1, GL_FALSE, glm::value_ptr(model));</span></span><br><span class="line"><span class="comment">		int viewLoc = glGetUniformLocation(ourShader.ID, "view");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(viewLoc, 1, GL_FALSE, glm::value_ptr(view));</span></span><br><span class="line"><span class="comment">		int proLoc = glGetUniformLocation(ourShader.ID, "projection");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(proLoc, 1, GL_FALSE, glm::value_ptr(projection));*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//几何变换</span></span><br><span class="line">		<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">		//位移</span></span><br><span class="line"><span class="comment">		trans = glm::translate(trans, glm::vec3(translateValue_x, translateValue_y, 0.0f));</span></span><br><span class="line"><span class="comment">		//vec = trans*vec;</span></span><br><span class="line"><span class="comment">		//旋转</span></span><br><span class="line"><span class="comment">		trans = glm::rotate(trans, glm::degrees(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//均匀缩放</span></span><br><span class="line"><span class="comment">		trans = glm::scale(trans, glm::vec3(scaleValue, scaleValue, 0.0));</span></span><br><span class="line"><span class="comment">		unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle =(<span class="keyword">float</span>)<span class="built_in">pow</span>(<span class="number">-1</span>,i)* (<span class="number">20.0f</span>*i + <span class="number">180.0f</span>);</span><br><span class="line">			<span class="comment">/*if (i != 0)</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, (float)glfwGetTime()* glm::radians(angle), glm::vec3(1.0f, 0.3f, 0.5f));</span></span><br><span class="line"><span class="comment">			}</span></span><br><span class="line"><span class="comment">			else</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, glm::radians(angle), glm::vec3(0.2f, 0.3f, 1.0f));</span></span><br><span class="line"><span class="comment">			}*/</span></span><br><span class="line">			model = glm::rotate(model, <span class="comment">/*(float)glfwGetTime()**/</span> glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line">			ourShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//glDrawArrays(GL_TRIANGLES, 0, 36);</span></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		<span class="comment">//glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Six-Camera-Class-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Six-Camera-Class-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Six_Camera_Class.cpp"></a>OpenGL_Learn_ElementaryCourse_Six_Camera_Class.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset,yoffset,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//float fov = 45.0f;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		<span class="comment">//位置              //颜色RGBA          //纹理</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] = {</span><br><span class="line">		glm::vec3(<span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> EBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);</span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"test.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> faceTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;faceTexture);</span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	data = stbi_load(<span class="string">"test2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	ourShader.setInt(<span class="string">"faceTexture"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_x = <span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_y = <span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> rotateValue = <span class="number">0.05f</span>*timeValue;</span><br><span class="line">		<span class="keyword">float</span> scaleValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="keyword">float</span> radius = <span class="number">10.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> camX = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime())*radius;</span><br><span class="line">		<span class="keyword">float</span> camZ = (<span class="keyword">float</span>)<span class="built_in">cos</span>(glfwGetTime())*radius;</span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection= glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//将矩阵传入着色器</span></span><br><span class="line">		<span class="comment">//恩，又内置了！</span></span><br><span class="line">		<span class="comment">//ourShader.setMat4("model", model);</span></span><br><span class="line">		ourShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		ourShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle =(<span class="keyword">float</span>)<span class="built_in">pow</span>(<span class="number">-1</span>,i)* (<span class="number">20.0f</span>*i + <span class="number">180.0f</span>);</span><br><span class="line">			<span class="comment">/*if (i != 0)</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, (float)glfwGetTime()* glm::radians(angle), glm::vec3(1.0f, 0.3f, 0.5f));</span></span><br><span class="line"><span class="comment">			}</span></span><br><span class="line"><span class="comment">			else</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, glm::radians(angle), glm::vec3(0.2f, 0.3f, 1.0f));</span></span><br><span class="line"><span class="comment">			}*/</span></span><br><span class="line">			model = glm::rotate(model, (<span class="keyword">float</span>)glfwGetTime()* glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line">			ourShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//glDrawArrays(GL_TRIANGLES, 0, 36);</span></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		<span class="comment">//glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-ElementaryCourse-Combined-cpp"><a href="#OpenGL-Learn-ElementaryCourse-Combined-cpp" class="headerlink" title="OpenGL_Learn_ElementaryCourse_Combined.cpp"></a>OpenGL_Learn_ElementaryCourse_Combined.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*///////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//摄像机</span></span><br><span class="line"><span class="comment">//1.摄像机位置</span></span><br><span class="line"><span class="comment">glm::vec3 cameraPos = glm::vec3(0.0f, 0.0f, 3.0f);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//2.摄像机方向</span></span><br><span class="line"><span class="comment">glm::vec3 cameraTarget = glm::vec3(0.0f, 0.0f, 0.0f);</span></span><br><span class="line"><span class="comment">//与摄像机实际指向的方向是正好相反的,方向向量</span></span><br><span class="line"><span class="comment">glm::vec3 cameraDirection = glm::normalize(cameraPos - cameraTarget);//这个向量减法很牵强，除非cameraTarget不是原点才有意义吧？</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">																	 //3.右轴</span></span><br><span class="line"><span class="comment">glm::vec3 up = glm::vec3(0.0f, 1.0f, 0.0f);//这不就是直接定义了上轴吗！！！！</span></span><br><span class="line"><span class="comment">										   //计算叉乘</span></span><br><span class="line"><span class="comment">glm::vec3 cameraRight = glm::normalize(glm::cross(up, cameraDirection));</span></span><br><span class="line"><span class="comment">//std::cout &lt;&lt; cameraRight.x &lt;&lt;std::endl&lt;&lt; cameraRight.y &lt;&lt;std::endl&lt;&lt; cameraRight.z &lt;&lt;std:: endl;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//4.上轴</span></span><br><span class="line"><span class="comment">glm::vec3 cameraUp = glm::normalize(glm::cross(cameraDirection, cameraRight));</span></span><br><span class="line"><span class="comment">//std::cout &lt;&lt; cameraUp.x &lt;&lt; std::endl &lt;&lt; cameraUp.y &lt;&lt; std::endl &lt;&lt; cameraUp.z &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">glm::vec3 cameraFront = glm::vec3(0.0f, 0.0f, -1.0f);*/</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*float sensitivity = 0.05f;</span></span><br><span class="line"><span class="comment">	xoffset *= sensitivity;</span></span><br><span class="line"><span class="comment">	yoffset *= sensitivity;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	yaw += xoffset;</span></span><br><span class="line"><span class="comment">	pitch += yoffset;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	if (pitch &gt; 89.0f)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		pitch = 89.0f;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	if (pitch &lt; -89.0f)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		pitch = -89.0f;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	glm::vec3 front;</span></span><br><span class="line"><span class="comment">	front.x = cos(glm::radians(pitch))*cos(glm::radians(yaw));</span></span><br><span class="line"><span class="comment">	front.y = sin(glm::radians(pitch));</span></span><br><span class="line"><span class="comment">	front.z = cos(glm::radians(pitch))*sin(glm::radians(yaw));</span></span><br><span class="line"><span class="comment">	cameraFront = glm::normalize(front);*/</span></span><br><span class="line">	camera.ProcessMouseMovement(xoffset,yoffset,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//float fov = 45.0f;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">/*if (fov &gt;= 0.1&amp;&amp;fov &lt;= 45.0f)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		fov -= (float)yoffset;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	if (fov &lt;= 0.1f)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		fov = 0.1f;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	if (fov &gt;= 45.0f)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		fov = 45.0f;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//LearnOpenGL CN 教程中对于纹理坐标有误</span></span><br><span class="line">	<span class="comment">//左上角(0,0),右下角(1,1)</span></span><br><span class="line">	<span class="comment">/*float vertices[] = {</span></span><br><span class="line"><span class="comment">	//位置              //颜色RGBA             //纹理</span></span><br><span class="line"><span class="comment">	0.5f,  0.5f, 0.0f, 1.0f, 0.0f, 0.0f, 1.0f, 1.0f,0.0f,  // 右上角</span></span><br><span class="line"><span class="comment">	0.5f, -0.5f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 1.0f,1.0f,  // 右下角</span></span><br><span class="line"><span class="comment">	-0.5f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 0.0f,1.0f,  // 左下角</span></span><br><span class="line"><span class="comment">	-0.5f,  0.5f, 0.0f, 0.5f, 0.5f, 0.5f, 1.0f, 0.0f,0.0f   // 左上角</span></span><br><span class="line"><span class="comment">	};*/</span></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		<span class="comment">//位置              //颜色RGBA          //纹理</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] = {</span><br><span class="line">		glm::vec3(<span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3(<span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//索引缓冲对象</span></span><br><span class="line">	<span class="comment">/*unsigned int indices[] = {</span></span><br><span class="line"><span class="comment">	0,1,2, //第一个三角形</span></span><br><span class="line"><span class="comment">	2,3,0  //第二个三角形</span></span><br><span class="line"><span class="comment">	};</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	unsigned int EBO;</span></span><br><span class="line"><span class="comment">	glGenBuffers(1, &amp;EBO);*/</span></span><br><span class="line">	<span class="comment">//绑定EBO到GL_ELEMENT_ARRAY_BUFFER</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ourTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;ourTexture);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, ourTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span></span><br><span class="line">	<span class="comment">//glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"001.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//int width, height, nrChannels;</span></span><br><span class="line">	<span class="comment">//unsigned char* data;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> faceTexture;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;faceTexture);</span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, faceTexture);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	data = stbi_load(<span class="string">"002.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGB, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	ourShader.use();</span><br><span class="line">	ourShader.setInt(<span class="string">"ourTexture"</span>, <span class="number">0</span>);</span><br><span class="line">	ourShader.setInt(<span class="string">"faceTexture"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//几何变换</span></span><br><span class="line">	<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">	//位移</span></span><br><span class="line"><span class="comment">	trans = glm::translate(trans, glm::vec3(0.12f, 0.12f, 0.0f));</span></span><br><span class="line"><span class="comment">	//vec = trans*vec;</span></span><br><span class="line"><span class="comment">	//旋转</span></span><br><span class="line"><span class="comment">	trans = glm::rotate(trans, glm::degrees(1.2f), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">	//均匀缩放</span></span><br><span class="line"><span class="comment">	trans = glm::scale(trans, glm::vec3(0.5, 0.5, 0.0));</span></span><br><span class="line"><span class="comment">	unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">	glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="comment">//调用glClear函数来清空屏幕的颜色缓冲，它接受一个缓冲位(Buffer Bit)来指定要清空的缓冲，可能的缓冲位有GL_COLOR_BUFFER_BIT，GL_DEPTH_BUFFER_BIT和GL_STENCIL_BUFFER_BIT。由于现在我们只关心颜色值，所以我们只清空颜色缓冲。</span></span><br><span class="line">		<span class="comment">//我们还调用了glClearColor来设置清空屏幕所用的颜色。当调用glClear函数，清除颜色缓冲之后，整个颜色缓冲都会被填充为glClearColor里所设置的颜色。</span></span><br><span class="line">		<span class="keyword">float</span> timeValue = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		<span class="keyword">float</span> redValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> greenValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> blueValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> alphaValue = (<span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> proportionValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_x = <span class="built_in">sin</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> translateValue_y = <span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> rotateValue = <span class="number">0.05f</span>*timeValue;</span><br><span class="line">		<span class="keyword">float</span> scaleValue = (<span class="built_in">cos</span>(timeValue) / <span class="number">2.0f</span>) + <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClearColor(redValue+0.1f, greenValue+0.2f, blueValue+0.3f, alphaValue);</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line">		<span class="comment">//glUseProgram(shaderProgram);</span></span><br><span class="line">		<span class="comment">//ourShader.use();//激活着色器程序</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置uniform值</span></span><br><span class="line">		<span class="comment">//ourShader.setFloat("ourColor", greenValue);</span></span><br><span class="line">		ourShader.setVec4(<span class="string">"ourColor"</span>, redValue, greenValue, blueValue, alphaValue);</span><br><span class="line">		ourShader.setFloat(<span class="string">"proportion"</span>, proportionValue);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		<span class="comment">//glm::mat4 model;</span></span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		<span class="comment">//model = glm::rotate(model,(float)glfwGetTime()* glm::radians(-55.0f), glm::vec3(0.5f, 1.0f, 0.0f));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//建立一个观察矩阵 从世界空间的原点上方观察进入观察空间</span></span><br><span class="line">		<span class="comment">//glm::mat4 view;</span></span><br><span class="line">		<span class="comment">//向后移动</span></span><br><span class="line">		<span class="comment">//view = glm::translate(view, glm::vec3(0.0f, 0.0f, -3.0f));</span></span><br><span class="line">		<span class="comment">//LookAt</span></span><br><span class="line">		<span class="comment">//glm::mat4 view;</span></span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraTarget, cameraUp);</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">float</span> radius = <span class="number">10.0f</span>;</span><br><span class="line">		<span class="keyword">float</span> camX = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime())*radius;</span><br><span class="line">		<span class="keyword">float</span> camZ = (<span class="keyword">float</span>)<span class="built_in">cos</span>(glfwGetTime())*radius;</span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection= glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////</span></span><br><span class="line">		<span class="comment">//正射投影矩阵,左右 底顶 前后</span></span><br><span class="line">		<span class="comment">//glm::ortho(0.0f, 800.0f, 0.0f, 600.0f, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">//透视投影矩阵 视野(角度/弧度) 宽高比(视口宽与高之比) 近、远平面</span></span><br><span class="line">		<span class="comment">//glm::mat4 proj = glm::perspective(glm::radians(45.0f), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.1f, 100.0f);</span></span><br><span class="line">		<span class="comment">/////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//将矩阵传入着色器</span></span><br><span class="line">		<span class="comment">//恩，又内置了！</span></span><br><span class="line">		<span class="comment">//ourShader.setMat4("model", model);</span></span><br><span class="line">		ourShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		ourShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		<span class="comment">/*int modelLoc = glGetUniformLocation(ourShader.ID, "model");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(modelLoc, 1, GL_FALSE, glm::value_ptr(model));</span></span><br><span class="line"><span class="comment">		int viewLoc = glGetUniformLocation(ourShader.ID, "view");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(viewLoc, 1, GL_FALSE, glm::value_ptr(view));</span></span><br><span class="line"><span class="comment">		int proLoc = glGetUniformLocation(ourShader.ID, "projection");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(proLoc, 1, GL_FALSE, glm::value_ptr(projection));*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//几何变换</span></span><br><span class="line">		<span class="comment">/*glm::mat4 trans;</span></span><br><span class="line"><span class="comment">		//位移</span></span><br><span class="line"><span class="comment">		trans = glm::translate(trans, glm::vec3(translateValue_x, translateValue_y, 0.0f));</span></span><br><span class="line"><span class="comment">		//vec = trans*vec;</span></span><br><span class="line"><span class="comment">		//旋转</span></span><br><span class="line"><span class="comment">		trans = glm::rotate(trans, glm::degrees(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//trans = glm::rotate(trans, glm::radians(rotateValue), glm::vec3(0.0, 0.0, 1.0));</span></span><br><span class="line"><span class="comment">		//均匀缩放</span></span><br><span class="line"><span class="comment">		trans = glm::scale(trans, glm::vec3(scaleValue, scaleValue, 0.0));</span></span><br><span class="line"><span class="comment">		unsigned int transformLoc = glGetUniformLocation(ourShader.ID, "transform");</span></span><br><span class="line"><span class="comment">		glUniformMatrix4fv(transformLoc, 1, GL_FALSE, glm::value_ptr(trans));*/</span></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle =(<span class="keyword">float</span>)<span class="built_in">pow</span>(<span class="number">-1</span>,i)* (<span class="number">20.0f</span>*i + <span class="number">180.0f</span>);</span><br><span class="line">			<span class="comment">/*if (i != 0)</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, (float)glfwGetTime()* glm::radians(angle), glm::vec3(1.0f, 0.3f, 0.5f));</span></span><br><span class="line"><span class="comment">			}</span></span><br><span class="line"><span class="comment">			else</span></span><br><span class="line"><span class="comment">			{</span></span><br><span class="line"><span class="comment">				model = glm::rotate(model, glm::radians(angle), glm::vec3(0.2f, 0.3f, 1.0f));</span></span><br><span class="line"><span class="comment">			}*/</span></span><br><span class="line">			model = glm::rotate(model, <span class="comment">/*(float)glfwGetTime()**/</span> glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line">			ourShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//glDrawArrays(GL_TRIANGLES, 0, 36);</span></span><br><span class="line">		<span class="comment">//索引缓冲对象设置缓冲渲染</span></span><br><span class="line">		<span class="comment">//第一个参数指定了我们绘制的模式，这个和glDrawArrays的一样。第二个参数是我们打算绘制顶点的个数，这里填6，也就是说我们一共需要绘制6个顶点。第三个参数是索引的类型，这里是GL_UNSIGNED_INT。最后一个参数里我们可以指定EBO中的偏移量（或者传递一个索引数组，但是这是当你不在使用索引缓冲对象的时候），但是我们会在这里填写0。</span></span><br><span class="line">		<span class="comment">//glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);</span></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><h1 id="OpenGL-Learn-Lighting"><a href="#OpenGL-Learn-Lighting" class="headerlink" title="OpenGL_Learn_Lighting"></a>OpenGL_Learn_Lighting</h1></blockquote><h2 id="OpenGL-Learn-Lighting-One-BasicLighting-cpp"><a href="#OpenGL-Learn-Lighting-One-BasicLighting-cpp" class="headerlink" title="OpenGL_Learn_Lighting_One_BasicLighting.cpp"></a>OpenGL_Learn_Lighting_One_BasicLighting.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="comment">//#define GLM_FORCE_RADIANS  //Bug，居然glm里面没有定义radians的宏</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">bool</span> once = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line">		<span class="comment">//once = false;</span></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line">		<span class="comment">//once = false;</span></span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/*if ((glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_RELEASE &amp;&amp; glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_RELEASE)&amp;&amp;!once)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		camera.changeWorldUp_CameraUp();</span></span><br><span class="line"><span class="comment">		//once = true;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset,yoffset,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//float fov = 45.0f;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		       <span class="comment">//位置              //颜色RGBA          //纹理       //法向量，继续作</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//法向量哦~~</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//灯源立方体VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> lightVAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line">	<span class="comment">//只需要绑定VBO不用再次设置VBO的数据，因为VBO数据中已经包含了正确地立方体顶点数据</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	<span class="comment">//设置ID那个ID暗属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">objectShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	objectShader.use();</span><br><span class="line">	objectShader.setVec4(<span class="string">"objectColor"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>,<span class="number">1.0f</span>);</span><br><span class="line">	objectShader.setVec4(<span class="string">"lightColor"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,<span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">lightShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	lightShader.use();</span><br><span class="line">	<span class="comment">//light</span></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">lightPos</span><span class="params">(<span class="number">1.2f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line">		lightPos.x = <span class="number">5</span>*<span class="built_in">sin</span>(glfwGetTime());</span><br><span class="line">		lightPos.y = <span class="number">5</span>*<span class="built_in">cos</span>(glfwGetTime());</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		model = glm::rotate(model,(<span class="keyword">float</span>)glfwGetTime()* glm::radians(<span class="number">-55.0f</span>), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line"></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection= glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//被光照物体</span></span><br><span class="line">		objectShader.use();</span><br><span class="line">		objectShader.setVec4(<span class="string">"objectColor"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>,<span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">		objectShader.setVec4(<span class="string">"lightColor"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,<span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">		objectShader.setVec3(<span class="string">"lightPos"</span>, lightPos);</span><br><span class="line">		objectShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		objectShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		objectShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line">		<span class="comment">//model左上角逆矩阵的转置矩阵得到法线矩阵</span></span><br><span class="line">		glm::mat3 Normal_Matrix = glm::transpose(glm::inverse(glm::mat3(model)));</span><br><span class="line">		objectShader.setMat3(<span class="string">"Normal_Matrix"</span>, Normal_Matrix);</span><br><span class="line">		glBindVertexArray(VAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//灯</span></span><br><span class="line">		lightShader.use();</span><br><span class="line">		model = glm::mat4();</span><br><span class="line"></span><br><span class="line">		model = glm::translate(model, lightPos);</span><br><span class="line">		model = glm::scale(model, glm::vec3(<span class="number">0.2f</span>));</span><br><span class="line"></span><br><span class="line">		lightShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		lightShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		lightShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		glBindVertexArray(lightVAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-Lighting-Two-Material-cpp"><a href="#OpenGL-Learn-Lighting-Two-Material-cpp" class="headerlink" title="OpenGL_Learn_Lighting_Two_Material.cpp"></a>OpenGL_Learn_Lighting_Two_Material.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="comment">//#define GLM_FORCE_RADIANS  //Bug，居然glm里面没有定义radians的宏</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window,GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		   <span class="comment">//位置              //颜色RGBA          //纹理       //法向量，继续作</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//法向量哦~~</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//灯源立方体VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> lightVAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line">	<span class="comment">//只需要绑定VBO不用再次设置VBO的数据，因为VBO数据中已经包含了正确地立方体顶点数据</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	<span class="comment">//设置ID那个ID暗属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">objectShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	objectShader.use();</span><br><span class="line">	objectShader.setVec4(<span class="string">"objectColor"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>, <span class="number">1.0f</span>);</span><br><span class="line">	objectShader.setVec4(<span class="string">"lightColor"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">lightShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	lightShader.use();</span><br><span class="line">	<span class="comment">//light</span></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">lightPos</span><span class="params">(<span class="number">1.2f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		lightPos.x = <span class="number">5</span> * (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime());</span><br><span class="line">		lightPos.y = <span class="number">5</span> * (<span class="keyword">float</span>)<span class="built_in">cos</span>(glfwGetTime());</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		model = glm::rotate(model, (<span class="keyword">float</span>)glfwGetTime()* glm::radians(<span class="number">-55.0f</span>), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line"></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//被光照物体</span></span><br><span class="line">		objectShader.use();</span><br><span class="line">		objectShader.setVec4(<span class="string">"objectColor"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setVec4(<span class="string">"material.ambient"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>,<span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setVec4(<span class="string">"material.diffuse"</span>, <span class="number">1.0f</span>, <span class="number">0.5f</span>, <span class="number">0.31f</span>,<span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setVec4(<span class="string">"material.specular"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>,<span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"material.shininess"</span>, <span class="number">32.0f</span>);</span><br><span class="line"></span><br><span class="line">		glm::vec4 lightColor;</span><br><span class="line">		lightColor.x = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime()*<span class="number">2.0f</span>);</span><br><span class="line">		lightColor.y = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime()*<span class="number">0.7f</span>);</span><br><span class="line">		lightColor.z = (<span class="keyword">float</span>)<span class="built_in">sin</span>(glfwGetTime()*<span class="number">1.0f</span>);</span><br><span class="line">		lightColor.w = <span class="number">1.0f</span>;</span><br><span class="line">		glm::vec4 diffuseColor = lightColor*glm::vec4(<span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glm::vec4 ambientColor = diffuseColor*glm::vec4(<span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">		objectShader.setVec4(<span class="string">"light.ambient"</span>, ambientColor);</span><br><span class="line">		objectShader.setVec4(<span class="string">"light.diffuse"</span>, diffuseColor);</span><br><span class="line">		<span class="comment">//objectShader.setVec4("light.ambient", 0.2f, 0.2f, 0.2f,1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("light.diffuse", 0.5f, 0.5f, 0.5f,1.0f); // 将光照调暗了一些以搭配场景</span></span><br><span class="line">		objectShader.setVec4(<span class="string">"light.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,<span class="number">1.0</span>);</span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", lightColor);</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"light.position"</span>,lightPos);</span><br><span class="line">		<span class="comment">//objectShader.setVec3("lightPos", lightPos);</span></span><br><span class="line">		objectShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		objectShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		objectShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line">		<span class="comment">//model左上角逆矩阵的转置矩阵得到法线矩阵</span></span><br><span class="line">		glm::mat3 Normal_Matrix = glm::transpose(glm::inverse(glm::mat3(model)));</span><br><span class="line">		objectShader.setMat3(<span class="string">"Normal_Matrix"</span>, Normal_Matrix);</span><br><span class="line">		glBindVertexArray(VAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//灯</span></span><br><span class="line">		lightShader.use();</span><br><span class="line">		model = glm::mat4();</span><br><span class="line"></span><br><span class="line">		model = glm::translate(model, lightPos);</span><br><span class="line">		model = glm::scale(model, glm::vec3(<span class="number">0.2f</span>));</span><br><span class="line"></span><br><span class="line">		lightShader.setVec4(<span class="string">"lightColor"</span>, lightColor);</span><br><span class="line"></span><br><span class="line">		lightShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		lightShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		lightShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		glBindVertexArray(lightVAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-Lighting-Three-LightingMap-cpp"><a href="#OpenGL-Learn-Lighting-Three-LightingMap-cpp" class="headerlink" title="OpenGL_Learn_Lighting_Three_LightingMap.cpp"></a>OpenGL_Learn_Lighting_Three_LightingMap.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="comment">//#define GLM_FORCE_RADIANS  //Bug，居然glm里面没有定义radians的宏</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line">					   <span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		        <span class="comment">//位置              //颜色RGBA          //纹理       //法向量，继续作</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span></span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//法向量哦~~</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//灯源立方体VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> lightVAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line">	<span class="comment">//只需要绑定VBO不用再次设置VBO的数据，因为VBO数据中已经包含了正确地立方体顶点数据</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	<span class="comment">//设置ID那个ID暗属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> diffuseMap;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;diffuseMap);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, diffuseMap);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"container2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGBA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> specularMap;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;specularMap);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, specularMap);</span><br><span class="line">	data = stbi_load(<span class="string">"container2_specular.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGBA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line">	<span class="comment">//stbi_set_flip_vertically_on_load(true);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">objectShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	objectShader.use();</span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.specular", 1);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">lightShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	lightShader.use();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//light</span></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">lightPos</span><span class="params">(<span class="number">1.2f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>)</span></span>;</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//lightPos.x = 5 * (float)sin(glfwGetTime());</span></span><br><span class="line">		<span class="comment">//lightPos.y = 5 * (float)cos(glfwGetTime());</span></span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		model = glm::rotate(model, (<span class="keyword">float</span>)glfwGetTime()* glm::radians(<span class="number">-55.0f</span>), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line"></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//被光照物体</span></span><br><span class="line">		objectShader.use();</span><br><span class="line">		<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("material.ambient", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("material.diffuse", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">		objectShader.setVec4(<span class="string">"material.specular"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"material.shininess"</span>, <span class="number">64.0f</span>);</span><br><span class="line">		objectShader.setInt(<span class="string">"material.diffuse"</span>, <span class="number">0</span>);</span><br><span class="line">		objectShader.setInt(<span class="string">"material.specular"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">		glm::vec4 lightColor=glm::vec4(<span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//lightColor.x = (float)sin(glfwGetTime()*2.0f);</span></span><br><span class="line">		<span class="comment">//lightColor.y = (float)sin(glfwGetTime()*0.7f);</span></span><br><span class="line">		<span class="comment">//lightColor.z = (float)sin(glfwGetTime()*1.0f);</span></span><br><span class="line">		<span class="comment">//lightColor.w = 1.0f;</span></span><br><span class="line">		<span class="comment">//glm::vec4 diffuseColor = lightColor*glm::vec4(0.5f, 0.5f, 0.5f, 1.0f);</span></span><br><span class="line">		<span class="comment">//glm::vec4 ambientColor = diffuseColor*glm::vec4(0.2f, 0.2f, 0.2f, 1.0f);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//objectShader.setVec4("light.ambient", ambientColor);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("light.diffuse", diffuseColor);</span></span><br><span class="line">		objectShader.setVec4(<span class="string">"light.ambient"</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>,<span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setVec4(<span class="string">"light.diffuse"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>,<span class="number">1.0f</span>); <span class="comment">// 将光照调暗了一些以搭配场景</span></span><br><span class="line">		objectShader.setVec4(<span class="string">"light.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0</span>);</span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", lightColor);</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"light.position"</span>, lightPos);</span><br><span class="line">		<span class="comment">//objectShader.setVec3("lightPos", lightPos);</span></span><br><span class="line">		objectShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		objectShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		objectShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line">		<span class="comment">//model左上角逆矩阵的转置矩阵得到法线矩阵</span></span><br><span class="line">		glm::mat3 Normal_Matrix = glm::transpose(glm::inverse(glm::mat3(model)));</span><br><span class="line">		objectShader.setMat3(<span class="string">"Normal_Matrix"</span>, Normal_Matrix);</span><br><span class="line">		glBindVertexArray(VAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//灯</span></span><br><span class="line">		lightShader.use();</span><br><span class="line">		model = glm::mat4();</span><br><span class="line"></span><br><span class="line">		model = glm::translate(model, lightPos);</span><br><span class="line">		model = glm::scale(model, glm::vec3(<span class="number">0.2f</span>));</span><br><span class="line"></span><br><span class="line">		lightShader.setVec4(<span class="string">"lightColor"</span>, lightColor);</span><br><span class="line"></span><br><span class="line">		lightShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		lightShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		lightShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		glBindVertexArray(lightVAO);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-Lighting-Four-LightingCasters-cpp"><a href="#OpenGL-Learn-Lighting-Four-LightingCasters-cpp" class="headerlink" title="OpenGL_Learn_Lighting_Four_LightingCasters.cpp"></a>OpenGL_Learn_Lighting_Four_LightingCasters.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="comment">//#define GLM_FORCE_RADIANS  //Bug，居然glm里面没有定义radians的宏</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line">					   <span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	<span class="comment">//glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] = {</span><br><span class="line">		<span class="comment">//位置              //颜色RGBA          //纹理       //法向量，继续作</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] = {</span><br><span class="line">		glm::vec3( <span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//法向量哦~~</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//灯源立方体VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> lightVAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line">	<span class="comment">//只需要绑定VBO不用再次设置VBO的数据，因为VBO数据中已经包含了正确地立方体顶点数据</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	<span class="comment">//设置ID那个ID暗属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> diffuseMap;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;diffuseMap);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, diffuseMap);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理环绕</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">	<span class="comment">//第一个参数指定了纹理目标；我们使用的是2D纹理，因此纹理目标是GL_TEXTURE_2D。第二个参数需要我们指定设置的选项与应用的纹理轴。我们打算配置的是WRAP选项，并且指定S和T轴。最后一个参数需要我们传递一个环绕方式(Wrapping)，在这个例子中OpenGL会给当前激活的纹理设定纹理环绕方式为GL_MIRRORED_REPEAT。</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果我们选择GL_CLAMP_TO_BORDER选项，我们还需要指定一个边缘的颜色。这需要使用glTexParameter函数的fv后缀形式，用GL_TEXTURE_BORDER_COLOR作为它的选项，并且传递一个float数组作为边缘的颜色值：</span></span><br><span class="line">	<span class="comment">//float borderColor[] = { 1.0f,1.0f,0.0f,1.0f };</span></span><br><span class="line">	<span class="comment">//glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//纹理过滤</span></span><br><span class="line">	<span class="comment">//缩小Minify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</span><br><span class="line">	<span class="comment">//放大Magnify</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//多级渐远纹理</span></span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//加载纹理图片</span></span><br><span class="line">	<span class="keyword">int</span> width, height, nrChannels;</span><br><span class="line">	<span class="comment">//用图像的宽度、高度和颜色通道的个数填充这三个变量。</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* data = stbi_load(<span class="string">"container2.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGBA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> specularMap;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;specularMap);</span><br><span class="line">	<span class="comment">// 在绑定纹理之前先激活纹理单元</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE1);</span><br><span class="line">	<span class="comment">//绑定纹理</span></span><br><span class="line">	glBindTexture(GL_TEXTURE_2D, specularMap);</span><br><span class="line">	data = stbi_load(<span class="string">"container2_specular.jpg"</span>, &amp;width, &amp;height, &amp;nrChannels, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, GL_RGB, width, height, <span class="number">0</span>, GL_RGBA, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to load texture"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	stbi_image_free(data);</span><br><span class="line">	<span class="comment">//stbi_set_flip_vertically_on_load(true);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">objectShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	objectShader.use();</span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.specular", 1);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">lightShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	lightShader.use();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//light</span></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">lightPos</span><span class="params">(<span class="number">1.2f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>)</span></span>;</span><br><span class="line">	glm::vec4 lightColor = glm::vec4(<span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//lightPos.x = 5 * (float)sin(glfwGetTime());</span></span><br><span class="line">		<span class="comment">//lightPos.y = 5 * (float)cos(glfwGetTime());</span></span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		<span class="comment">//model = glm::rotate(model, (float)glfwGetTime()* glm::radians(-55.0f), glm::vec3(1.0f, 0.0f, 0.0f));</span></span><br><span class="line"></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle = <span class="number">20.0f</span> * i;</span><br><span class="line">			model = glm::rotate(model, <span class="comment">/*(float)glfwGetTime()**/</span> glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line"></span><br><span class="line">			<span class="comment">//被光照物体</span></span><br><span class="line">			objectShader.use();</span><br><span class="line">			<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec4("material.ambient", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec4("material.diffuse", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">			objectShader.setVec4(<span class="string">"material.specular"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>);</span><br><span class="line">			objectShader.setFloat(<span class="string">"material.shininess"</span>, <span class="number">64.0f</span>);</span><br><span class="line">			objectShader.setInt(<span class="string">"material.diffuse"</span>, <span class="number">0</span>);</span><br><span class="line">			objectShader.setInt(<span class="string">"material.specular"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="comment">//lightColor.x = (float)sin(glfwGetTime()*2.0f);</span></span><br><span class="line">			<span class="comment">//lightColor.y = (float)sin(glfwGetTime()*0.7f);</span></span><br><span class="line">			<span class="comment">//lightColor.z = (float)sin(glfwGetTime()*1.0f);</span></span><br><span class="line">			<span class="comment">//lightColor.w = 1.0f;</span></span><br><span class="line">			<span class="comment">//glm::vec4 diffuseColor = lightColor*glm::vec4(0.5f, 0.5f, 0.5f, 1.0f);</span></span><br><span class="line">			<span class="comment">//glm::vec4 ambientColor = diffuseColor*glm::vec4(0.2f, 0.2f, 0.2f, 1.0f);</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">//objectShader.setVec3("light.position", lightPos);//mmp，找了半天，我说怎么一个物体被挡住了还能被照射到，后来发现，根本就没有进行到那一步！啥都没有控制！继续学习！</span></span><br><span class="line">			objectShader.setVec3(<span class="string">"light.direction"</span>, camera.GetCameraFront());</span><br><span class="line">			objectShader.setVec3(<span class="string">"light.position"</span>, camera.GetPosition());</span><br><span class="line">			objectShader.setFloat(<span class="string">"light.cutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">12.5f</span>)));</span><br><span class="line">			objectShader.setFloat(<span class="string">"light.outerCutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">17.5f</span>)));</span><br><span class="line">			<span class="comment">//objectShader.setVec4("light.ambient", ambientColor);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec4("light.diffuse", diffuseColor);</span></span><br><span class="line">			objectShader.setVec4(<span class="string">"light.ambient"</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">1.0f</span>);</span><br><span class="line">			objectShader.setVec4(<span class="string">"light.diffuse"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>); <span class="comment">// 将光照调暗了一些以搭配场景</span></span><br><span class="line">			objectShader.setVec4(<span class="string">"light.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0</span>);</span><br><span class="line">			objectShader.setFloat(<span class="string">"light.constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">			objectShader.setFloat(<span class="string">"light.linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">			objectShader.setFloat(<span class="string">"light.quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">			<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec4("lightColor", lightColor);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec3("light.position", lightPos);</span></span><br><span class="line">			<span class="comment">//objectShader.setVec3("lightPos", lightPos);</span></span><br><span class="line">			objectShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			objectShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">			objectShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">			objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line">			<span class="comment">//model左上角逆矩阵的转置矩阵得到法线矩阵</span></span><br><span class="line">			glm::mat3 Normal_Matrix = glm::transpose(glm::inverse(glm::mat3(model)));</span><br><span class="line">			objectShader.setMat3(<span class="string">"Normal_Matrix"</span>, Normal_Matrix);</span><br><span class="line">			glBindVertexArray(VAO);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//灯</span></span><br><span class="line">		<span class="comment">/*lightShader.use();</span></span><br><span class="line"><span class="comment">		model = glm::mat4();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		model = glm::translate(model, lightPos);</span></span><br><span class="line"><span class="comment">		model = glm::scale(model, glm::vec3(0.2f));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		lightShader.setVec4("lightColor", lightColor);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		lightShader.setMat4("model", model);</span></span><br><span class="line"><span class="comment">		lightShader.setMat4("view", view);</span></span><br><span class="line"><span class="comment">		lightShader.setMat4("projection", projection);</span></span><br><span class="line"><span class="comment">		glBindVertexArray(lightVAO);</span></span><br><span class="line"><span class="comment">		glDrawArrays(GL_TRIANGLES, 0, 36);*/</span></span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-Lighting-Five-MultipleLights-cpp"><a href="#OpenGL-Learn-Lighting-Five-MultipleLights-cpp" class="headerlink" title="OpenGL_Learn_Lighting_Five_MultipleLights.cpp"></a>OpenGL_Learn_Lighting_Five_MultipleLights.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="comment">//#define GLM_FORCE_RADIANS  //Bug，居然glm里面没有定义radians的宏</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = <span class="number">400</span>, lastY = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line">					   <span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">loadTexture</span><span class="params">(<span class="keyword">char</span> <span class="keyword">const</span> * path)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> textureID;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;textureID);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width, height, nrComponents;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(path, &amp;width, &amp;height, &amp;nrComponents, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		GLenum format;</span><br><span class="line">		<span class="keyword">if</span> (nrComponents == <span class="number">1</span>)</span><br><span class="line">			format = GL_RED;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">3</span>)</span><br><span class="line">			format = GL_RGB;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">4</span>)</span><br><span class="line">			format = GL_RGBA;</span><br><span class="line"></span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, textureID);</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, format, width, height, <span class="number">0</span>, format, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line"></span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Texture failed to load at path: "</span> &lt;&lt; path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> textureID;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//不作死就不会死！</span></span><br><span class="line">	<span class="keyword">float</span> vertices[] =</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//位置              //颜色RGBA          //纹理       //法向量，继续作</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>, <span class="number">-1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		 <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>, <span class="number">1.0f</span>,  <span class="number">0.0f</span>,  <span class="number">1.0f</span>,  <span class="number">0.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//十个正方体位移向量</span></span><br><span class="line">	glm::vec3 cubePositions[] =</span><br><span class="line">	{</span><br><span class="line">		glm::vec3( <span class="number">0.0f</span>,  <span class="number">0.0f</span>,   <span class="number">0.0f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.0f</span>,  <span class="number">5.0f</span>, <span class="number">-15.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.5f</span>, <span class="number">-2.2f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-3.8f</span>, <span class="number">-2.0f</span>, <span class="number">-12.3f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.4f</span>, <span class="number">-0.4f</span>,  <span class="number">-3.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.7f</span>,  <span class="number">3.0f</span>,  <span class="number">-7.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.3f</span>, <span class="number">-2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">2.0f</span>,  <span class="number">-2.5f</span>),</span><br><span class="line">		glm::vec3( <span class="number">1.5f</span>,  <span class="number">0.2f</span>,  <span class="number">-1.5f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-1.3f</span>,  <span class="number">1.0f</span>,  <span class="number">-1.5f</span>)</span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//点光源位移向量</span></span><br><span class="line">	glm::vec3 pointLightPositions[] =</span><br><span class="line">	{</span><br><span class="line">		glm::vec3( <span class="number">0.7f</span>,  <span class="number">0.2f</span>,   <span class="number">2.0f</span>),</span><br><span class="line">		glm::vec3( <span class="number">2.3f</span>, <span class="number">-3.3f</span>,  <span class="number">-4.0f</span>),</span><br><span class="line">		glm::vec3(<span class="number">-4.0f</span>,  <span class="number">2.0f</span>, <span class="number">-12.0f</span>),</span><br><span class="line">		glm::vec3( <span class="number">0.0f</span>,  <span class="number">0.0f</span>,  <span class="number">-3.0f</span>)</span><br><span class="line">	};</span><br><span class="line">	<span class="comment">//顶点缓冲对象（Vertex Buffer Objects)</span></span><br><span class="line">	<span class="comment">//使用glGenBuffers函数和一个缓冲ID生成一个VBO对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点数组对象</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line">	<span class="comment">//绑定VAO</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//把顶点数组复制到缓冲中供OpenGL使用</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);</span></span><br><span class="line">	<span class="comment">//glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置顶点属性指针</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//颜色属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//纹理属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">7</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//法向量哦~~</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//灯源立方体VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> lightVAO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;lightVAO);</span><br><span class="line">	glBindVertexArray(lightVAO);</span><br><span class="line">	<span class="comment">//只需要绑定VBO不用再次设置VBO的数据，因为VBO数据中已经包含了正确地立方体顶点数据</span></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">	<span class="comment">//设置ID那个ID暗属性</span></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">12</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//图片纹理</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> diffuseMap = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"container2.jpg"</span>).c_str());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> specularMap = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"container2_specular.jpg"</span>).c_str());</span><br><span class="line">	<span class="comment">//stbi_set_flip_vertically_on_load(true);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//着色器类变量</span></span><br><span class="line">	<span class="comment">//已经封装了顶点着色器、片段着色器</span></span><br><span class="line">	<span class="function">Shader <span class="title">objectShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	objectShader.use();</span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.specular", 1);</span></span><br><span class="line">	<span class="comment">//objectShader.setInt("material.diffuse", 0);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">	<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">lightShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	lightShader.use();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//light</span></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">lightPos</span><span class="params">(<span class="number">1.2f</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>)</span></span>;</span><br><span class="line">	glm::vec4 lightColor = glm::vec4(<span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		glActiveTexture(GL_TEXTURE0);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, diffuseMap);</span><br><span class="line">		<span class="comment">// bind specular map</span></span><br><span class="line">		glActiveTexture(GL_TEXTURE1);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, specularMap);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//lightPos.x = 5 * (float)sin(glfwGetTime());</span></span><br><span class="line">		<span class="comment">//lightPos.y = 5 * (float)cos(glfwGetTime());</span></span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//线框模式</span></span><br><span class="line">		<span class="comment">//第一个参数表示我们打算将其应用到所有的三角形的正面和背面，第二个参数告诉我们用线来绘制</span></span><br><span class="line">		<span class="comment">//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</span></span><br><span class="line">		<span class="comment">//填充模式</span></span><br><span class="line">		glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);</span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		<span class="comment">//model = glm::rotate(model, (float)glfwGetTime()* glm::radians(-55.0f), glm::vec3(1.0f, 0.0f, 0.0f));</span></span><br><span class="line"></span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		<span class="comment">//view = glm::lookAt(cameraPos, cameraPos+cameraFront, cameraUp);</span></span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		<span class="comment">//projection = glm::perspective(glm::radians(fov), (float)SCR_WIDTH / (float)SCR_HEIGHT, 0.001f, 100.0f);</span></span><br><span class="line">		projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//被光照物体</span></span><br><span class="line">		objectShader.use();</span><br><span class="line">		objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line">		<span class="comment">//objectShader.setVec4("objectColor", 1.0f, 0.5f, 0.31f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec3("material.ambient", 1.0f, 0.5f, 0.31f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec3("material.diffuse", 1.0f, 0.5f, 0.31f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec3("material.specular", 0.5f, 0.5f, 0.5f);</span></span><br><span class="line">		objectShader.setFloat(<span class="string">"material.shininess"</span>, <span class="number">64.0f</span>);</span><br><span class="line">		objectShader.setInt(<span class="string">"material.texture_diffuse1"</span>, <span class="number">0</span>);</span><br><span class="line">		objectShader.setInt(<span class="string">"material.texture_specular1"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// directional light</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"dirLight.direction"</span>, <span class="number">-0.2f</span>, <span class="number">-1.0f</span>, <span class="number">-0.3f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"dirLight.ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"dirLight.diffuse"</span>, <span class="number">0.4f</span>, <span class="number">0.4f</span>, <span class="number">0.4f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"dirLight.specular"</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>, <span class="number">0.5f</span>);</span><br><span class="line">		<span class="comment">// point light 1</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[0].position"</span>, pointLightPositions[<span class="number">0</span>]);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[0].ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[0].diffuse"</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[0].specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[0].constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[0].linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[0].quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		<span class="comment">// point light 2</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[1].position"</span>, pointLightPositions[<span class="number">1</span>]);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[1].ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[1].diffuse"</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[1].specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[1].constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[1].linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[1].quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		<span class="comment">// point light 3</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[2].position"</span>, pointLightPositions[<span class="number">2</span>]);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[2].ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[2].diffuse"</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[2].specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[2].constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[2].linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[2].quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		<span class="comment">// point light 4</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[3].position"</span>, pointLightPositions[<span class="number">3</span>]);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[3].ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[3].diffuse"</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>, <span class="number">0.8f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"pointLights[3].specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[3].constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[3].linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"pointLights[3].quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		<span class="comment">// spotLight</span></span><br><span class="line">		objectShader.setVec3(<span class="string">"spotLight.position"</span>, camera.GetPosition());</span><br><span class="line">		objectShader.setVec3(<span class="string">"spotLight.direction"</span>, camera.GetCameraFront());</span><br><span class="line">		objectShader.setVec3(<span class="string">"spotLight.ambient"</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"spotLight.diffuse"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setVec3(<span class="string">"spotLight.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"spotLight.constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"spotLight.linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"spotLight.quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		objectShader.setFloat(<span class="string">"spotLight.cutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">12.5f</span>)));</span><br><span class="line">		objectShader.setFloat(<span class="string">"spotLight.outerCutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">15.0f</span>)));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//lightColor.x = (float)sin(glfwGetTime()*2.0f);</span></span><br><span class="line">		<span class="comment">//lightColor.y = (float)sin(glfwGetTime()*0.7f);</span></span><br><span class="line">		<span class="comment">//lightColor.z = (float)sin(glfwGetTime()*1.0f);</span></span><br><span class="line">		<span class="comment">//lightColor.w = 1.0f;</span></span><br><span class="line">		<span class="comment">//glm::vec4 diffuseColor = lightColor*glm::vec4(0.5f, 0.5f, 0.5f, 1.0f);</span></span><br><span class="line">		<span class="comment">//glm::vec4 ambientColor = diffuseColor*glm::vec4(0.2f, 0.2f, 0.2f, 1.0f);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//objectShader.setVec3("light.position", lightPos);//mmp，找了半天，我说怎么一个物体被挡住了还能被照射到，后来发现，根本就没有进行到那一步！啥都没有控制！继续学习！</span></span><br><span class="line">		<span class="comment">/*objectShader.setVec3("light.direction", camera.GetCameraFront());</span></span><br><span class="line"><span class="comment">		objectShader.setVec3("light.position", camera.GetPosition());</span></span><br><span class="line"><span class="comment">		objectShader.setFloat("light.cutOff", glm::cos(glm::radians(12.5f)));</span></span><br><span class="line"><span class="comment">		objectShader.setFloat("light.outerCutOff", glm::cos(glm::radians(17.5f)));</span></span><br><span class="line"><span class="comment">		//objectShader.setVec4("light.ambient", ambientColor);</span></span><br><span class="line"><span class="comment">		//objectShader.setVec4("light.diffuse", diffuseColor);</span></span><br><span class="line"><span class="comment">		objectShader.setVec4("light.ambient", 0.2f, 0.2f, 0.2f, 1.0f);</span></span><br><span class="line"><span class="comment">		objectShader.setVec4("light.diffuse", 0.5f, 0.5f, 0.5f, 1.0f); // 将光照调暗了一些以搭配场景</span></span><br><span class="line"><span class="comment">		objectShader.setVec4("light.specular", 1.0f, 1.0f, 1.0f, 1.0);</span></span><br><span class="line"><span class="comment">		objectShader.setFloat("light.constant", 1.0f);</span></span><br><span class="line"><span class="comment">		objectShader.setFloat("light.linear", 0.09f);</span></span><br><span class="line"><span class="comment">		objectShader.setFloat("light.quadratic", 0.032f);*/</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", 1.0f, 1.0f, 1.0f, 1.0f);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec4("lightColor", lightColor);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec3("light.position", lightPos);</span></span><br><span class="line">		<span class="comment">//objectShader.setVec3("lightPos", lightPos);</span></span><br><span class="line"></span><br><span class="line">		objectShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		objectShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		objectShader.setVec3(<span class="string">"viewPos"</span>, camera.GetPosition());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			glm::mat4 model;</span><br><span class="line">			model = glm::translate(model, cubePositions[i]);</span><br><span class="line">			<span class="keyword">float</span> angle = <span class="number">20.0f</span> * i;</span><br><span class="line">			model = glm::rotate(model, <span class="comment">/*(float)glfwGetTime()**/</span> glm::radians(angle), glm::vec3(<span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">0.5f</span>));</span><br><span class="line">			objectShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line"></span><br><span class="line">			<span class="comment">//model左上角逆矩阵的转置矩阵得到法线矩阵</span></span><br><span class="line">			glm::mat3 Normal_Matrix = glm::transpose(glm::inverse(glm::mat3(model)));</span><br><span class="line">			objectShader.setMat3(<span class="string">"Normal_Matrix"</span>, Normal_Matrix);</span><br><span class="line">			glBindVertexArray(VAO);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//灯</span></span><br><span class="line">		<span class="comment">/*lightShader.use();</span></span><br><span class="line"><span class="comment">		model = glm::mat4();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		model = glm::translate(model, lightPos);</span></span><br><span class="line"><span class="comment">		model = glm::scale(model, glm::vec3(0.2f));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		lightShader.setVec4("lightColor", lightColor);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		lightShader.setMat4("model", model);</span></span><br><span class="line"><span class="comment">		lightShader.setMat4("view", view);</span></span><br><span class="line"><span class="comment">		lightShader.setMat4("projection", projection);</span></span><br><span class="line"><span class="comment">		glBindVertexArray(lightVAO);</span></span><br><span class="line"><span class="comment">		glDrawArrays(GL_TRIANGLES, 0, 36);</span></span><br><span class="line"><span class="comment">		glBindVertexArray(lightVAO);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		lightShader.use();</span><br><span class="line">		lightShader.setVec4(<span class="string">"lightColor"</span>, lightColor);</span><br><span class="line">		lightShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		lightShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		lightShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		glBindVertexArray(lightVAO);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">		{</span><br><span class="line">			model = glm::mat4();</span><br><span class="line">			model = glm::translate(model, pointLightPositions[i]);</span><br><span class="line">			model = glm::scale(model, glm::vec3(<span class="number">0.2f</span>)); <span class="comment">// Make it a smaller cube</span></span><br><span class="line">			lightShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">			glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><h1 id="OpenGL-Learn-LoadModel"><a href="#OpenGL-Learn-LoadModel" class="headerlink" title="OpenGL_Learn_LoadModel"></a>OpenGL_Learn_LoadModel</h1></blockquote><h2 id="OpenGL-Learn-LoadModel-cpp"><a href="#OpenGL-Learn-LoadModel-cpp" class="headerlink" title="OpenGL_Learn_LoadModel.cpp"></a>OpenGL_Learn_LoadModel.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Model.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = SCR_WIDTH/<span class="number">2.0f</span>, lastY = SCR_HEIGHT/<span class="number">2.0f</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line">					   <span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glEnable(GL_DEPTH_TEST);</span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	<span class="comment">//glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="function">Model <span class="title">ourModel</span><span class="params">(<span class="string">"nanosuit/nanosuit.obj"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//循环渲染</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//输入</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//渲染指令</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.2f</span>, <span class="number">0.3f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		<span class="comment">//glClear(GL_COLOR_BUFFER_BIT);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">		<span class="comment">//开启深度测试</span></span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//清楚深度缓冲</span></span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line"></span><br><span class="line">		ourShader.use();</span><br><span class="line">		ourShader.setVec3(<span class="string">"dirLight.direction"</span>, <span class="number">-0.2f</span>, <span class="number">-1.0f</span>, <span class="number">-0.3f</span>);</span><br><span class="line">		ourShader.setVec3(<span class="string">"dirLight.ambient"</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>, <span class="number">0.05f</span>);</span><br><span class="line">		ourShader.setVec3(<span class="string">"dirLight.diffuse"</span>, <span class="number">1.0f</span>,<span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		ourShader.setVec3(<span class="string">"dirLight.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line">		ourShader.setVec3(<span class="string">"spotLight.position"</span>, camera.GetPosition());</span><br><span class="line">		ourShader.setVec3(<span class="string">"spotLight.direction"</span>, camera.GetCameraFront());</span><br><span class="line">		ourShader.setVec3(<span class="string">"spotLight.ambient"</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line">		ourShader.setVec3(<span class="string">"spotLight.diffuse"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		ourShader.setVec3(<span class="string">"spotLight.specular"</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		ourShader.setFloat(<span class="string">"spotLight.constant"</span>, <span class="number">1.0f</span>);</span><br><span class="line">		ourShader.setFloat(<span class="string">"spotLight.linear"</span>, <span class="number">0.09f</span>);</span><br><span class="line">		ourShader.setFloat(<span class="string">"spotLight.quadratic"</span>, <span class="number">0.032f</span>);</span><br><span class="line">		ourShader.setFloat(<span class="string">"spotLight.cutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">12.5f</span>)));</span><br><span class="line">		ourShader.setFloat(<span class="string">"spotLight.outerCutOff"</span>, glm::<span class="built_in">cos</span>(glm::radians(<span class="number">15.0f</span>)));</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进入3D</span></span><br><span class="line">		<span class="comment">//建立一个模型矩阵 从局部空间进入世界空间</span></span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		<span class="comment">//以x为轴旋转</span></span><br><span class="line">		model = glm::rotate(model, (<span class="keyword">float</span>)glfwGetTime()* glm::radians(<span class="number">-55.0f</span>), glm::vec3(<span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">0.0f</span>, <span class="number">-1.75f</span>, <span class="number">0.0f</span>));</span><br><span class="line">		model = glm::scale(model, glm::vec3(<span class="number">0.2f</span>, <span class="number">0.2f</span>, <span class="number">0.2f</span>));</span><br><span class="line">		glm::mat4 view;</span><br><span class="line">		view = camera.GetViewMatrix();</span><br><span class="line">		<span class="comment">//建立一个投影矩阵，从观察空间进入裁剪空间</span></span><br><span class="line">		glm::mat4 projection;</span><br><span class="line">		projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.001f</span>, <span class="number">100.0f</span>);</span><br><span class="line">		ourShader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		ourShader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		ourShader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		ourModel.Draw(ourShader);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//检查并调用事件，交换缓冲</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">/////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><h1 id="OpenGL-Learn-AdvancedOpenGL"><a href="#OpenGL-Learn-AdvancedOpenGL" class="headerlink" title="OpenGL_Learn_AdvancedOpenGL"></a>OpenGL_Learn_AdvancedOpenGL</h1></blockquote><h2 id="OpenGL-Learn-AdvancedOpenGL-One-DepthTesting-cpp"><a href="#OpenGL-Learn-AdvancedOpenGL-One-DepthTesting-cpp" class="headerlink" title="OpenGL_Learn_AdvancedOpenGL_One_DepthTesting.cpp"></a>OpenGL_Learn_AdvancedOpenGL_One_DepthTesting.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Model.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> lastX = SCR_WIDTH / <span class="number">2.0f</span>, lastY = SCR_HEIGHT / <span class="number">2.0f</span>;</span><br><span class="line"><span class="keyword">float</span> yaw = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> pitch = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;<span class="comment">//当前帧与上一帧的时间差</span></span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;<span class="comment">//上一帧的时间</span></span><br><span class="line"></span><br><span class="line">					   <span class="comment">//窗口改变函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//GLFW的输入控制，返回这个按键是否被按下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow* window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//float cameraSpeed = 2.5f*deltaTime;</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_UP) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_DOWN) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*cameraFront;</span></span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_LEFT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos -= cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_RIGHT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Roll</span></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_ADD) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_ADD, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_KP_SUBTRACT) == GLFW_PRESS)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//cameraPos += cameraSpeed*glm::normalize(glm::cross(cameraFront, cameraUp));</span></span><br><span class="line">		camera.ProcessKeyboard(ROLL_REDUCE, deltaTime);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)xpos - lastX;</span><br><span class="line">	<span class="keyword">float</span> yoffset = lastY - (<span class="keyword">float</span>)ypos; <span class="comment">//Pitch俯瞰</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">loadTexture</span><span class="params">(<span class="keyword">char</span> <span class="keyword">const</span> *path)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> textureID;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;textureID);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width, height, nrComponents;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(path, &amp;width, &amp;height, &amp;nrComponents, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		GLenum format;</span><br><span class="line">		<span class="keyword">if</span> (nrComponents == <span class="number">1</span>)</span><br><span class="line">			format = GL_RED;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">3</span>)</span><br><span class="line">			format = GL_RGB;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">4</span>)</span><br><span class="line">			format = GL_RGBA;</span><br><span class="line"></span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, textureID);</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, format, width, height, <span class="number">0</span>, format, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line"></span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Texture failed to load at path: "</span> &lt;&lt; path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> textureID;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//创建一个窗口对象</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化GLAD</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glEnable(GL_DEPTH_TEST);</span><br><span class="line">	<span class="comment">//视口</span></span><br><span class="line">	<span class="comment">//glViewport函数前两个参数控制窗口左下角的位置。</span></span><br><span class="line">	<span class="comment">//第三个和第四个参数控制渲染窗口的宽度和高度（像素）。</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, SCR_WIDTH, SCR_HEIGHT);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//注册函数，当窗口调整大小时调用</span></span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//隐藏光标</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//监听鼠标移动事件</span></span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//鼠标滚轮</span></span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引缓冲对象、顶点数组对象、顶点缓冲对象</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="function">Shader <span class="title">shader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="function">Shader <span class="title">ourShader</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="keyword">float</span> cubeVertices[] = {</span><br><span class="line">		<span class="comment">// positions          // texture Coords</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="keyword">float</span> planeVertices[] = {</span><br><span class="line">		<span class="comment">// positions          // texture Coords (note we set these higher than 1 (together with GL_REPEAT as texture wrapping mode). this will cause the floor texture to repeat)</span></span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">2.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">0.0f</span>, <span class="number">2.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">2.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">0.0f</span>, <span class="number">2.0f</span>,</span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">2.0f</span>, <span class="number">2.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">// cube VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> cubeVAO, cubeVBO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;cubeVAO);</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;cubeVBO);</span><br><span class="line">	glBindVertexArray(cubeVAO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(cubeVertices), &amp;cubeVertices, GL_STATIC_DRAW);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">// plane VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> planeVAO, planeVBO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;planeVAO);</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;planeVBO);</span><br><span class="line">	glBindVertexArray(planeVAO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, planeVBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(planeVertices), &amp;planeVertices, GL_STATIC_DRAW);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// load textures</span></span><br><span class="line">	<span class="comment">// -------------</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> cubeTexture = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"wenli3.jpg"</span>).c_str());</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> floorTexture = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"002.jpg"</span>).c_str());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// shader configuration</span></span><br><span class="line">	<span class="comment">// --------------------</span></span><br><span class="line">	shader.use();</span><br><span class="line">	shader.setInt(<span class="string">"texture_diffuse1"</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">//ourShader.use();</span></span><br><span class="line">	<span class="comment">//ourShader.setInt("texture_diffuse1", 0);</span></span><br><span class="line">	<span class="comment">// render loop</span></span><br><span class="line">	<span class="comment">// -----------</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">// per-frame time logic</span></span><br><span class="line">		<span class="comment">// --------------------</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame =(<span class="keyword">float</span>) glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// input</span></span><br><span class="line">		<span class="comment">// -----</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// render</span></span><br><span class="line">		<span class="comment">// ------</span></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.1f</span>, <span class="number">0.1f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line">		<span class="comment">//glDepthFunc(GL_ALWAYS);</span></span><br><span class="line">		shader.use();</span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		glm::mat4 view = camera.GetViewMatrix();</span><br><span class="line">		glm::mat4 projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.1f</span>, <span class="number">100.0f</span>);</span><br><span class="line">		shader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		shader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line">		<span class="comment">// cubes</span></span><br><span class="line">		glBindVertexArray(cubeVAO);</span><br><span class="line">		glActiveTexture(GL_TEXTURE0);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, cubeTexture);</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">-1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>));</span><br><span class="line">		shader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		model = glm::mat4();</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">2.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line">		shader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		<span class="comment">// floor</span></span><br><span class="line">		glBindVertexArray(planeVAO);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, floorTexture);</span><br><span class="line">		shader.setMat4(<span class="string">"model"</span>, glm::mat4());</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">		glBindVertexArray(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// glfw: swap buffers and poll IO events (keys pressed/released, mouse moved etc.)</span></span><br><span class="line">		<span class="comment">// -------------------------------------------------------------------------------</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// optional: de-allocate all resources once they've outlived their purpose:</span></span><br><span class="line">	<span class="comment">// ------------------------------------------------------------------------</span></span><br><span class="line">	glDeleteVertexArrays(<span class="number">1</span>, &amp;cubeVAO);</span><br><span class="line">	glDeleteVertexArrays(<span class="number">1</span>, &amp;planeVAO);</span><br><span class="line">	glDeleteBuffers(<span class="number">1</span>, &amp;cubeVBO);</span><br><span class="line">	glDeleteBuffers(<span class="number">1</span>, &amp;planeVBO);</span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="OpenGL-Learn-AdvancedOpenGL-Two-StencilTesting-cpp"><a href="#OpenGL-Learn-AdvancedOpenGL-Two-StencilTesting-cpp" class="headerlink" title="OpenGL_Learn_AdvancedOpenGL_Two_StencilTesting.cpp"></a>OpenGL_Learn_AdvancedOpenGL_Two_StencilTesting.cpp</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STB_IMAGE_IMPLEMENTATION</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glfw3.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Camera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Model.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS  <span class="comment">//Bug，居然glm里面没有定义radians的宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/type_ptr.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// settings</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_WIDTH = <span class="number">1280</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> SCR_HEIGHT = <span class="number">720</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// camera</span></span><br><span class="line"><span class="function">Camera <span class="title">camera</span><span class="params">(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">3.0f</span>))</span></span>;</span><br><span class="line"><span class="keyword">float</span> lastX = (<span class="keyword">float</span>)(SCR_WIDTH / <span class="number">2.0</span>);</span><br><span class="line"><span class="keyword">float</span> lastY = (<span class="keyword">float</span>)(SCR_HEIGHT / <span class="number">2.0</span>);</span><br><span class="line"><span class="keyword">bool</span> firstMouse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// timing</span></span><br><span class="line"><span class="keyword">float</span> deltaTime = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">float</span> lastFrame = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processInput</span><span class="params">(GLFWwindow *window)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)</span><br><span class="line">		glfwSetWindowShouldClose(window, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_W) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(FORWARD, deltaTime);</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_S) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(BACKWARD, deltaTime);</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_A) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(LEFT, deltaTime);</span><br><span class="line">	<span class="keyword">if</span> (glfwGetKey(window, GLFW_KEY_D) == GLFW_PRESS)</span><br><span class="line">		camera.ProcessKeyboard(RIGHT, deltaTime);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// glfw: whenever the window size changed (by OS or user resize) this callback function executes</span></span><br><span class="line"><span class="comment">// ---------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">framebuffer_size_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// make sure the viewport matches the new window dimensions; note that width and</span></span><br><span class="line">	<span class="comment">// height will be significantly larger than specified on retina displays.</span></span><br><span class="line">	glViewport(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// glfw: whenever the mouse moves, this callback is called</span></span><br><span class="line"><span class="comment">// -------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mouse_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xpos, <span class="keyword">double</span> ypos)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span> (firstMouse)</span><br><span class="line">	{</span><br><span class="line">		lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">		lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line">		firstMouse = <span class="literal">false</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> xoffset = (<span class="keyword">float</span>)(xpos - lastX);</span><br><span class="line">	<span class="keyword">float</span> yoffset = (<span class="keyword">float</span>)(lastY - ypos); <span class="comment">// reversed since y-coordinates go from bottom to top</span></span><br><span class="line"></span><br><span class="line">	lastX = (<span class="keyword">float</span>)xpos;</span><br><span class="line">	lastY = (<span class="keyword">float</span>)ypos;</span><br><span class="line"></span><br><span class="line">	camera.ProcessMouseMovement(xoffset, yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// glfw: whenever the mouse scroll wheel scrolls, this callback is called</span></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scroll_callback</span><span class="params">(GLFWwindow* window, <span class="keyword">double</span> xoffset, <span class="keyword">double</span> yoffset)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	camera.ProcessMouseScroll((<span class="keyword">float</span>)yoffset);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// utility function for loading a 2D texture from file</span></span><br><span class="line"><span class="comment">// ---------------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">loadTexture</span><span class="params">(<span class="keyword">char</span> <span class="keyword">const</span> *path)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> textureID;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;textureID);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width, height, nrComponents;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(path, &amp;width, &amp;height, &amp;nrComponents, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		GLenum format;</span><br><span class="line">		<span class="keyword">if</span> (nrComponents == <span class="number">1</span>)</span><br><span class="line">			format = GL_RED;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">3</span>)</span><br><span class="line">			format = GL_RGB;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">4</span>)</span><br><span class="line">			format = GL_RGBA;</span><br><span class="line"></span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, textureID);</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, format, width, height, <span class="number">0</span>, format, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line"></span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line"></span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Texture failed to load at path: "</span> &lt;&lt; path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> textureID;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// glfw: initialize and configure</span></span><br><span class="line">	<span class="comment">// ------------------------------</span></span><br><span class="line">	glfwInit();</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, <span class="number">3</span>);</span><br><span class="line">	glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">														 <span class="comment">// glfw window creation</span></span><br><span class="line">														 <span class="comment">// --------------------</span></span><br><span class="line">	GLFWwindow* window = glfwCreateWindow(SCR_WIDTH, SCR_HEIGHT, <span class="string">"LearnOpenGL"</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="keyword">if</span> (window == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to create GLFW window"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		glfwTerminate();</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line">	glfwMakeContextCurrent(window);</span><br><span class="line">	glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);</span><br><span class="line">	glfwSetCursorPosCallback(window, mouse_callback);</span><br><span class="line">	glfwSetScrollCallback(window, scroll_callback);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// tell GLFW to capture our mouse</span></span><br><span class="line">	glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// glad: load all OpenGL function pointers</span></span><br><span class="line">	<span class="comment">// ---------------------------------------</span></span><br><span class="line">	<span class="keyword">if</span> (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Failed to initialize GLAD"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// configure global opengl state</span></span><br><span class="line">	<span class="comment">// -----------------------------</span></span><br><span class="line">	glEnable(GL_DEPTH_TEST);</span><br><span class="line">	glDepthFunc(GL_LESS);</span><br><span class="line">	glEnable(GL_STENCIL_TEST);</span><br><span class="line">	glStencilFunc(GL_NOTEQUAL, <span class="number">1</span>, <span class="number">0xFF</span>);</span><br><span class="line">	glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// build and compile shaders</span></span><br><span class="line">	<span class="comment">// -------------------------</span></span><br><span class="line">	<span class="function">Shader <span class="title">shader</span><span class="params">(<span class="string">"shader.vs"</span>, <span class="string">"shader.fs"</span>)</span></span>;</span><br><span class="line">	<span class="function">Shader <span class="title">shaderSingleColor</span><span class="params">(<span class="string">"lightShader.vs"</span>, <span class="string">"lightShader.fs"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// set up vertex data (and buffer(s)) and configure vertex attributes</span></span><br><span class="line">	<span class="comment">// ------------------------------------------------------------------</span></span><br><span class="line">	<span class="keyword">float</span> cubeVertices[] = {</span><br><span class="line">		<span class="comment">// positions          // texture Coords</span></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>, <span class="number">-0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">1.0f</span>, <span class="number">1.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">1.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.5f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-0.5f</span>,  <span class="number">0.5f</span>, <span class="number">-0.5f</span>,  <span class="number">0.0f</span>, <span class="number">1.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="keyword">float</span> planeVertices[] = {</span><br><span class="line">		<span class="comment">// positions          // texture Coords (note we set these higher than 1 (together with GL_REPEAT as texture wrapping mode). this will cause the floor texture to repeat)</span></span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">2.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">0.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">0.0f</span>, <span class="number">2.0f</span>,</span><br><span class="line"></span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>,  <span class="number">5.0f</span>,  <span class="number">2.0f</span>, <span class="number">0.0f</span>,</span><br><span class="line">		<span class="number">-5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">0.0f</span>, <span class="number">2.0f</span>,</span><br><span class="line">		<span class="number">5.0f</span>, <span class="number">-0.5f</span>, <span class="number">-5.0f</span>,  <span class="number">2.0f</span>, <span class="number">2.0f</span></span><br><span class="line">	};</span><br><span class="line">	<span class="comment">// cube VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> cubeVAO, cubeVBO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;cubeVAO);</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;cubeVBO);</span><br><span class="line">	glBindVertexArray(cubeVAO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(cubeVertices), &amp;cubeVertices, GL_STATIC_DRAW);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">// plane VAO</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> planeVAO, planeVBO;</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;planeVAO);</span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;planeVBO);</span><br><span class="line">	glBindVertexArray(planeVAO);</span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, planeVBO);</span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(planeVertices), &amp;planeVertices, GL_STATIC_DRAW);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>), (<span class="keyword">void</span>*)(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">float</span>)));</span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// load textures</span></span><br><span class="line">	<span class="comment">// -------------</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> cubeTexture = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"001.jpg"</span>).c_str());</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> floorTexture = loadTexture(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"002.jpg"</span>).c_str());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// shader configuration</span></span><br><span class="line">	<span class="comment">// --------------------</span></span><br><span class="line">	shader.use();</span><br><span class="line">	shader.setInt(<span class="string">"texture1"</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// render loop</span></span><br><span class="line">	<span class="comment">// -----------</span></span><br><span class="line">	<span class="keyword">while</span> (!glfwWindowShouldClose(window))</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">// per-frame time logic</span></span><br><span class="line">		<span class="comment">// --------------------</span></span><br><span class="line">		<span class="keyword">float</span> currentFrame = (<span class="keyword">float</span>)glfwGetTime();</span><br><span class="line">		deltaTime = currentFrame - lastFrame;</span><br><span class="line">		lastFrame = currentFrame;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// input</span></span><br><span class="line">		<span class="comment">// -----</span></span><br><span class="line">		processInput(window);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// render</span></span><br><span class="line">		<span class="comment">// ------</span></span><br><span class="line">		glClearColor(<span class="number">0.1f</span>, <span class="number">0.1f</span>, <span class="number">0.1f</span>, <span class="number">1.0f</span>);</span><br><span class="line">		glEnable(GL_STENCIL_TEST);</span><br><span class="line">		glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);</span><br><span class="line">		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); <span class="comment">// don't forget to clear the stencil buffer!</span></span><br><span class="line"></span><br><span class="line">																					<span class="comment">// set uniforms</span></span><br><span class="line">		shaderSingleColor.use();</span><br><span class="line">		glm::mat4 model;</span><br><span class="line">		glm::mat4 view = camera.GetViewMatrix();</span><br><span class="line">		glm::mat4 projection = glm::perspective(glm::radians(camera.GetZoom()), (<span class="keyword">float</span>)SCR_WIDTH / (<span class="keyword">float</span>)SCR_HEIGHT, <span class="number">0.1f</span>, <span class="number">100.0f</span>);</span><br><span class="line">		shaderSingleColor.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		shaderSingleColor.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line"></span><br><span class="line">		shader.use();</span><br><span class="line">		shader.setMat4(<span class="string">"view"</span>, view);</span><br><span class="line">		shader.setMat4(<span class="string">"projection"</span>, projection);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// draw floor as normal, but don't write the floor to the stencil buffer, we only care about the containers. We set its mask to 0x00 to not write to the stencil buffer.</span></span><br><span class="line">	<span class="comment">//	glStencilMask(0x00);</span></span><br><span class="line">		<span class="comment">// floor</span></span><br><span class="line">		<span class="comment">/*glBindVertexArray(planeVAO);</span></span><br><span class="line"><span class="comment">		glBindTexture(GL_TEXTURE_2D, floorTexture);</span></span><br><span class="line"><span class="comment">		shader.setMat4("model", glm::mat4());</span></span><br><span class="line"><span class="comment">		glDrawArrays(GL_TRIANGLES, 0, 6);</span></span><br><span class="line"><span class="comment">		glBindVertexArray(0);*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 1st. render pass, draw objects as normal, writing to the stencil buffer</span></span><br><span class="line">		<span class="comment">// --------------------------------------------------------------------</span></span><br><span class="line">		glStencilFunc(GL_ALWAYS, <span class="number">1</span>, <span class="number">0xFF</span>);</span><br><span class="line">		glStencilMask(<span class="number">0xFF</span>);</span><br><span class="line">		<span class="comment">// cubes</span></span><br><span class="line">		glBindVertexArray(cubeVAO);</span><br><span class="line">		glActiveTexture(GL_TEXTURE0);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, cubeTexture);</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">-1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>));</span><br><span class="line">		shader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		model = glm::mat4();</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">2.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line">		shader.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 2nd. render pass: now draw slightly scaled versions of the objects, this time disabling stencil writing.</span></span><br><span class="line">		<span class="comment">// Because the stencil buffer is now filled with several 1s. The parts of the buffer that are 1 are not drawn, thus only drawing</span></span><br><span class="line">		<span class="comment">// the objects' size differences, making it look like borders.</span></span><br><span class="line">		<span class="comment">// -----------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">		glStencilFunc(GL_NOTEQUAL, <span class="number">1</span>, <span class="number">0xFF</span>);</span><br><span class="line">		glStencilMask(<span class="number">0x00</span>);</span><br><span class="line">		glDisable(GL_DEPTH_TEST);</span><br><span class="line">		shaderSingleColor.use();</span><br><span class="line">		<span class="keyword">float</span> scale = (<span class="keyword">float</span>) <span class="number">1.1</span>;</span><br><span class="line">		<span class="comment">// cubes</span></span><br><span class="line">		glBindVertexArray(cubeVAO);</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, cubeTexture);</span><br><span class="line">		model = glm::mat4();</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">-1.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>));</span><br><span class="line">		model = glm::scale(model, glm::vec3(scale, scale, scale));</span><br><span class="line">		shaderSingleColor.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		model = glm::mat4();</span><br><span class="line">		model = glm::translate(model, glm::vec3(<span class="number">2.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>));</span><br><span class="line">		model = glm::scale(model, glm::vec3(scale, scale, scale));</span><br><span class="line">		shaderSingleColor.setMat4(<span class="string">"model"</span>, model);</span><br><span class="line">		glDrawArrays(GL_TRIANGLES, <span class="number">0</span>, <span class="number">36</span>);</span><br><span class="line">		glBindVertexArray(<span class="number">0</span>);</span><br><span class="line">		glStencilMask(<span class="number">0xFF</span>);</span><br><span class="line">		glEnable(GL_DEPTH_TEST);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// glfw: swap buffers and poll IO events (keys pressed/released, mouse moved etc.)</span></span><br><span class="line">		<span class="comment">// -------------------------------------------------------------------------------</span></span><br><span class="line">		glfwSwapBuffers(window);</span><br><span class="line">		glfwPollEvents();</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// optional: de-allocate all resources once they've outlived their purpose:</span></span><br><span class="line">	<span class="comment">// ------------------------------------------------------------------------</span></span><br><span class="line">	glDeleteVertexArrays(<span class="number">1</span>, &amp;cubeVAO);</span><br><span class="line">	glDeleteVertexArrays(<span class="number">1</span>, &amp;planeVAO);</span><br><span class="line">	glDeleteBuffers(<span class="number">1</span>, &amp;cubeVBO);</span><br><span class="line">	glDeleteBuffers(<span class="number">1</span>, &amp;planeVBO);</span><br><span class="line"></span><br><span class="line">	glfwTerminate();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><h1 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h1></blockquote><h2 id="Shader-h"><a href="#Shader-h" class="headerlink" title="Shader.h"></a>Shader.h</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SHADER_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SHADER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt; //包含glad来获取所有的必须OpenGL的头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shader</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//程序ID</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> ID;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//构造器读取并构建着色器</span></span><br><span class="line">	Shader(<span class="keyword">const</span> GLchar* vertexPath, <span class="keyword">const</span> GLchar* fragmentPath, <span class="keyword">const</span> GLchar* geometryPath = <span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用/激活程序</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">use</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//uniform工具函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setBool</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span>  <span class="keyword">bool</span> &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>   <span class="title">setInt</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span>   <span class="keyword">int</span> &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setFloat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec2</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;x, <span class="keyword">const</span> <span class="keyword">float</span> &amp;y)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec3</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;x, <span class="keyword">const</span> <span class="keyword">float</span> &amp;y, <span class="keyword">const</span> <span class="keyword">float</span> &amp;z)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec4</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;x, <span class="keyword">const</span> <span class="keyword">float</span> &amp;y, <span class="keyword">const</span> <span class="keyword">float</span> &amp;z, <span class="keyword">const</span> <span class="keyword">float</span> &amp;w)</span><span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec2</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec2 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec3</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec3 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setVec4</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec4 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setMat2</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::mat2 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setMat3</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::mat3 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span>  <span class="title">setMat4</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::mat4 &amp;value)</span><span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">checkCompileErrors</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> shader, <span class="built_in">std</span>::<span class="built_in">string</span> type)</span></span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Shader::Shader(<span class="keyword">const</span> GLchar* vertexPath, <span class="keyword">const</span> GLchar* fragmentPath, <span class="keyword">const</span> GLchar* geometryPath)</span><br><span class="line">{</span><br><span class="line">	<span class="comment">//1.从文件路径中获取顶点/片段着色器</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> vertexCode;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> fragmentCode;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> geometryCode;</span><br><span class="line">	<span class="built_in">std</span>::ifstream vShaderFile;</span><br><span class="line">	<span class="built_in">std</span>::ifstream fShaderFile;</span><br><span class="line">	<span class="built_in">std</span>::ifstream gShaderFile;</span><br><span class="line">	<span class="comment">//保证ifstream对象可以抛出异常</span></span><br><span class="line">	vShaderFile.exceptions(<span class="built_in">std</span>::ifstream::failbit | <span class="built_in">std</span>::ifstream::badbit);</span><br><span class="line">	fShaderFile.exceptions(<span class="built_in">std</span>::ifstream::failbit | <span class="built_in">std</span>::ifstream::badbit);</span><br><span class="line">	gShaderFile.exceptions(<span class="built_in">std</span>::ifstream::failbit | <span class="built_in">std</span>::ifstream::badbit);</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//打开文件</span></span><br><span class="line">		vShaderFile.open(vertexPath);</span><br><span class="line">		fShaderFile.open(fragmentPath);</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">stringstream</span> vShaderStream, fShaderStream;</span><br><span class="line">		<span class="comment">//读取文件的缓冲内容到数据流中</span></span><br><span class="line">		vShaderStream &lt;&lt; vShaderFile.rdbuf();</span><br><span class="line">		fShaderStream &lt;&lt; fShaderFile.rdbuf();</span><br><span class="line">		<span class="comment">//关闭文件处理器</span></span><br><span class="line">		vShaderFile.close();</span><br><span class="line">		fShaderFile.close();</span><br><span class="line">		<span class="comment">//转换数据流到string</span></span><br><span class="line">		vertexCode = vShaderStream.str();</span><br><span class="line">		fragmentCode = fShaderStream.str();</span><br><span class="line">		<span class="keyword">if</span> (geometryPath != <span class="literal">nullptr</span>)</span><br><span class="line">		{</span><br><span class="line">			gShaderFile.open(geometryPath);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">stringstream</span> gShaderStream;</span><br><span class="line">			gShaderStream &lt;&lt; gShaderFile.rdbuf();</span><br><span class="line">			gShaderFile.close();</span><br><span class="line">			geometryCode = gShaderStream.str();</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">catch</span> (<span class="built_in">std</span>::ifstream::failure e)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::SHADER::FILE_NOT_SUCCESSFULLY_READ"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* vShaderCode = vertexCode.c_str();</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* fShaderCode = fragmentCode.c_str();</span><br><span class="line">	<span class="comment">//2.编译着色器</span></span><br><span class="line">	<span class="comment">//顶点着色器</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> vertexShader;</span><br><span class="line">	vertexShader = glCreateShader(GL_VERTEX_SHADER);</span><br><span class="line">	glShaderSource(vertexShader, <span class="number">1</span>, &amp;vShaderCode, <span class="literal">NULL</span>);</span><br><span class="line">	glCompileShader(vertexShader);</span><br><span class="line">	checkCompileErrors(vertexShader, <span class="string">"VERTEX"</span>);</span><br><span class="line">	<span class="comment">/*//检测调用CompileShader后编译是否成功</span></span><br><span class="line"><span class="comment">	int success;</span></span><br><span class="line"><span class="comment">	char infoLog[512];</span></span><br><span class="line"><span class="comment">	glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "ERROR::SHADER::VERTEX::COMPILATION_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	<span class="comment">//片段着色器</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> fragmentShader;</span><br><span class="line">	fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);</span><br><span class="line">	glShaderSource(fragmentShader, <span class="number">1</span>, &amp;fShaderCode, <span class="literal">NULL</span>);</span><br><span class="line">	glCompileShader(fragmentShader);</span><br><span class="line">	checkCompileErrors(fragmentShader, <span class="string">"FRAGMENT"</span>);</span><br><span class="line">	<span class="comment">/*glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	glGetShaderInfoLog(fragmentShader, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//着色器程序</span></span><br><span class="line">	ID = glCreateProgram();</span><br><span class="line">	glAttachShader(ID, vertexShader);</span><br><span class="line">	glAttachShader(ID, fragmentShader);</span><br><span class="line">	glLinkProgram(ID);</span><br><span class="line">	checkCompileErrors(ID, <span class="string">"PROGRAM"</span>);</span><br><span class="line">	<span class="comment">/*//检测链接着色器程序是否失败</span></span><br><span class="line"><span class="comment">	glGetProgramiv(ID, GL_LINK_STATUS, &amp;success);</span></span><br><span class="line"><span class="comment">	if (!success)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">	glGetProgramInfoLog(ID, 512, NULL, infoLog);</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "ERROR::SHADER::PROGRAM::LINKING_FAILED\n" &lt;&lt; infoLog &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	<span class="comment">//把着色器对象链接到程序对象以后，记得删除着色器对象，我们不再需要它们了</span></span><br><span class="line">	glDeleteShader(vertexShader);</span><br><span class="line">	glDeleteShader(fragmentShader);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">void</span> Shader::use()</span><br><span class="line">{</span><br><span class="line">	glUseProgram(ID);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setBool(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name,<span class="keyword">const</span> <span class="keyword">bool</span> &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform1i(glGetUniformLocation(ID, name.c_str()), (<span class="keyword">int</span>)value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setInt(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name,<span class="keyword">const</span> <span class="keyword">int</span> &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform1i(glGetUniformLocation(ID, name.c_str()), value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setFloat(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name,<span class="keyword">const</span> <span class="keyword">float</span> &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform1f(glGetUniformLocation(ID, name.c_str()), value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec2(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;x, <span class="keyword">const</span> <span class="keyword">float</span> &amp;y)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform2f(glGetUniformLocation(ID, name.c_str()), x, y);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec3(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> <span class="keyword">float</span> &amp;x, <span class="keyword">const</span> <span class="keyword">float</span> &amp;y, <span class="keyword">const</span> <span class="keyword">float</span> &amp;z)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform3f(glGetUniformLocation(ID, name.c_str()), x, y, z);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec4(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name,<span class="keyword">const</span> <span class="keyword">float</span> &amp;x,<span class="keyword">const</span> <span class="keyword">float</span> &amp;y,<span class="keyword">const</span> <span class="keyword">float</span> &amp;z,<span class="keyword">const</span> <span class="keyword">float</span> &amp;w)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform4f(glGetUniformLocation(ID, name.c_str()), x, y, z, w);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec2(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec2 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform2fv(glGetUniformLocation(ID, name.c_str()),<span class="number">1</span>, &amp;value[<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec3(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec3 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform3fv(glGetUniformLocation(ID, name.c_str()), <span class="number">1</span>, &amp;value[<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setVec4(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::vec4 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniform4fv(glGetUniformLocation(ID, name.c_str()), <span class="number">1</span>, &amp;value[<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setMat2(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::mat2 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniformMatrix2fv(glGetUniformLocation(ID, name.c_str()), <span class="number">1</span>, GL_FALSE, &amp;value[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setMat3(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name, <span class="keyword">const</span> glm::mat3 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniformMatrix3fv(glGetUniformLocation(ID, name.c_str()), <span class="number">1</span>, GL_FALSE, &amp;value[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::setMat4(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;name,<span class="keyword">const</span> glm::mat4 &amp;value)<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	glUniformMatrix4fv(glGetUniformLocation(ID, name.c_str()), <span class="number">1</span>, GL_FALSE, &amp;value[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Shader::checkCompileErrors(<span class="keyword">unsigned</span> <span class="keyword">int</span> shader, <span class="built_in">std</span>::<span class="built_in">string</span> type)</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">int</span> success;</span><br><span class="line">	<span class="keyword">char</span> infoLog[<span class="number">1024</span>];</span><br><span class="line">	<span class="keyword">if</span> (type != <span class="string">"PROGRAM"</span>)</span><br><span class="line">	{</span><br><span class="line">		glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;success);</span><br><span class="line">		<span class="keyword">if</span> (!success)</span><br><span class="line">		{</span><br><span class="line">			glGetShaderInfoLog(shader, <span class="number">1024</span>, <span class="literal">NULL</span>, infoLog);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::SHADER_COMPILATION_ERROR of type: "</span> &lt;&lt; type &lt;&lt; <span class="string">"\n"</span> &lt;&lt; infoLog &lt;&lt; <span class="string">"\n -- --------------------------------------------------- -- "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		glGetProgramiv(shader, GL_LINK_STATUS, &amp;success);</span><br><span class="line">		<span class="keyword">if</span> (!success)</span><br><span class="line">		{</span><br><span class="line">			glGetProgramInfoLog(shader, <span class="number">1024</span>, <span class="literal">NULL</span>, infoLog);</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::PROGRAM_LINKING_ERROR of type: "</span> &lt;&lt; type &lt;&lt; <span class="string">"\n"</span> &lt;&lt; infoLog &lt;&lt; <span class="string">"\n -- --------------------------------------------------- -- "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="Camera-h"><a href="#Camera-h" class="headerlink" title="Camera.h"></a>Camera.h</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CAMERA_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CAMERA_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Camera_Movement</span><br><span class="line">{</span><br><span class="line">	FORWARD,</span><br><span class="line">	BACKWARD,</span><br><span class="line">	LEFT,</span><br><span class="line">	RIGHT,</span><br><span class="line">	ROLL_ADD,</span><br><span class="line">	ROLL_REDUCE</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pitch 俯仰角，绕x轴</span></span><br><span class="line"><span class="comment">//Yaw 偏航角，绕y轴</span></span><br><span class="line"><span class="comment">//Roll 滚转角，绕z轴</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Default camera values</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> YAW = <span class="number">-90.0f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> PITCH = <span class="number">0.0f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> ROLL = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> SPEED = <span class="number">2.5f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> SENSITIVITY = <span class="number">0.05f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> ZOOM = <span class="number">45.0f</span>;</span><br><span class="line"><span class="keyword">const</span> glm::vec3 CAMERAFRONT = glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////</span></span><br><span class="line"><span class="comment">//以右手笛卡尔坐标为基准</span></span><br><span class="line"><span class="comment">//摄像机假定在x正半轴、z负半轴、y正半轴的空间内</span></span><br><span class="line"><span class="comment">//刚开始摄像机视线位置与z轴正半轴平行,上向量与y轴平行，右向量与x轴平行</span></span><br><span class="line"><span class="comment">//当摄像机视线对准源点时</span></span><br><span class="line"><span class="comment">//相当于视线先Yaw旋转至于y轴相交</span></span><br><span class="line"><span class="comment">//再将视线Pitch旋转至于源点相交</span></span><br><span class="line"><span class="comment">//那么此时Yaw就是视线对准原点后，在x-z轴平面的投影与z负半轴的夹角</span></span><br><span class="line"><span class="comment">//而Pitch就是视线与x-z轴平面的夹角</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//direction.y = sin(glm::radians(pitch)); // 注意我们先把角度转为弧度</span></span><br><span class="line"><span class="comment">//direction.x = cos(glm::radians(pitch));</span></span><br><span class="line"><span class="comment">//direction.z = cos(glm::radians(pitch));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//direction.x = cos(glm::radians(pitch)) * cos(glm::radians(yaw)); // 译注：direction代表摄像机的前轴(Front)，这个前轴是和本文第一幅图片的第二个摄像机的方向向量是相反的</span></span><br><span class="line"><span class="comment">//direction.y = sin(glm::radians(pitch));</span></span><br><span class="line"><span class="comment">//direction.z = cos(glm::radians(pitch)) * sin(glm::radians(yaw));</span></span><br><span class="line"><span class="comment">/////////</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Camera</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//Constructor with vectors</span></span><br><span class="line">	Camera(glm::vec3 position = glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-3.0f</span>), glm::vec3 cameraup = glm::vec3(<span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>), <span class="keyword">float</span> yaw = YAW, <span class="keyword">float</span> pitch = PITCH,<span class="keyword">float</span> roll=ROLL);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructor with scalar values</span></span><br><span class="line">	Camera(<span class="keyword">float</span> posX, <span class="keyword">float</span> posY, <span class="keyword">float</span> posZ, <span class="keyword">float</span> upX, <span class="keyword">float</span> upY, <span class="keyword">float</span> upZ, <span class="keyword">float</span> yaw=YAW, <span class="keyword">float</span> pitch=PITCH,<span class="keyword">float</span> roll=ROLL);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Returns the view matrix calculated using Eular Angles and the LookAt Matrix</span></span><br><span class="line">	glm::<span class="function">mat4 <span class="title">GetViewMatrix</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Processes input received from any keyboard-like input system. Accepts input parameter in the form of camera defined ENUM (to abstract it from windowing systems)</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ProcessKeyboard</span><span class="params">(Camera_Movement direction, <span class="keyword">float</span> deltaTime)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Processes input received from a mouse input system. Expects the offset value in both the x and y direction.</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ProcessMouseMovement</span><span class="params">(<span class="keyword">float</span> xoffset, <span class="keyword">float</span> yoffset, GLboolean constrainPitch = <span class="literal">true</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Processes input received from a mouse scroll-wheel event. Only requires input on the vertical wheel-axis</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ProcessMouseScroll</span><span class="params">(<span class="keyword">float</span> yoffset)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetYaw</span><span class="params">(<span class="keyword">float</span> yaw)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetPitch</span><span class="params">(<span class="keyword">float</span> pitch)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetRoll</span><span class="params">(<span class="keyword">float</span> roll)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetMovementSpeed</span><span class="params">(<span class="keyword">float</span> movementSpeed)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetMouseSensitivity</span><span class="params">(<span class="keyword">float</span> mouseSensitivity)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetZoom</span><span class="params">(<span class="keyword">float</span> zoom)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetYaw</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetPitch</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetRoll</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetMovementSpeed</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetMouseSensitivity</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">GetZoom</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	glm::<span class="function">vec3 <span class="title">GetPosition</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line">	glm::<span class="function">vec3 <span class="title">GetCameraFront</span><span class="params">()</span><span class="keyword">const</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">//Calculates teh front vector from the Camera's (updated) Eular Angles</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">updateCameraVectors</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera Attributes</span></span><br><span class="line">	glm::vec3 cameraPosition;</span><br><span class="line">	glm::vec3 cameraFront;<span class="comment">//这里的方向与摄像机视线方向一致而不是相反</span></span><br><span class="line">	glm::vec3 cameraUp;</span><br><span class="line">	glm::vec3 cameraRight;</span><br><span class="line">	glm::vec3 WorldUp;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera angles</span></span><br><span class="line">	<span class="keyword">float</span> Yaw;</span><br><span class="line">	<span class="keyword">float</span> Pitch;</span><br><span class="line">	<span class="keyword">float</span> Roll;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Camera options</span></span><br><span class="line">	<span class="keyword">float</span> MovementSpeed;</span><br><span class="line">	<span class="keyword">float</span> MouseSensitivity;</span><br><span class="line">	<span class="keyword">float</span> Zoom;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Camera::Camera(glm::vec3 position, glm::vec3 cameraup, <span class="keyword">float</span> yaw , <span class="keyword">float</span> pitch,<span class="keyword">float</span> roll) :cameraFront(CAMERAFRONT), MovementSpeed(SPEED), MouseSensitivity(SENSITIVITY), Zoom(ZOOM)</span><br><span class="line">{</span><br><span class="line">	cameraPosition = position;</span><br><span class="line">	WorldUp = cameraup;</span><br><span class="line">	cameraUp = cameraup;</span><br><span class="line">	Yaw = yaw;</span><br><span class="line">	Pitch = pitch;</span><br><span class="line">	Roll = roll;</span><br><span class="line">	updateCameraVectors();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Camera::Camera(<span class="keyword">float</span> posX, <span class="keyword">float</span> posY, <span class="keyword">float</span> posZ, <span class="keyword">float</span> upX, <span class="keyword">float</span> upY, <span class="keyword">float</span> upZ, <span class="keyword">float</span> yaw, <span class="keyword">float</span> pitch,<span class="keyword">float</span> roll) : cameraFront(glm::vec3(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">-1.0f</span>)), MovementSpeed(SPEED), MouseSensitivity(SENSITIVITY), Zoom(ZOOM)</span><br><span class="line">{</span><br><span class="line">	cameraPosition = glm::vec3(posX, posY, posZ);</span><br><span class="line">	WorldUp = glm::vec3(upX, upY, upZ);</span><br><span class="line">	cameraUp = glm::vec3(upX, upY, upZ);</span><br><span class="line">	Yaw = yaw;</span><br><span class="line">	Pitch = pitch;</span><br><span class="line">	Roll = roll;</span><br><span class="line">	updateCameraVectors();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::ProcessKeyboard(Camera_Movement direction, <span class="keyword">float</span> deltaTime)</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">float</span> velocity = MovementSpeed * deltaTime;</span><br><span class="line">	<span class="keyword">if</span> (direction == FORWARD)</span><br><span class="line">		cameraPosition += cameraFront * velocity;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (direction == BACKWARD)</span><br><span class="line">		cameraPosition -= cameraFront * velocity;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (direction == LEFT)</span><br><span class="line">		cameraPosition -= cameraRight * velocity;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (direction == RIGHT)</span><br><span class="line">		cameraPosition += cameraRight * velocity;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (direction == ROLL_ADD)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">//Roll +=(float)0.05*deltaTime;</span></span><br><span class="line">		Roll += <span class="number">10</span> * velocity;</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (direction == ROLL_REDUCE)</span><br><span class="line">	{</span><br><span class="line">		Roll -= <span class="number">10</span> * velocity;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::ProcessMouseMovement(<span class="keyword">float</span> xoffset, <span class="keyword">float</span> yoffset, GLboolean constrainPitch)</span><br><span class="line">{</span><br><span class="line">	xoffset *= MouseSensitivity;</span><br><span class="line">	yoffset *= MouseSensitivity;</span><br><span class="line"></span><br><span class="line">	Yaw += xoffset;</span><br><span class="line">	Pitch += yoffset;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Make sure that when pitch is out of bounds, screen doesn't get flipped</span></span><br><span class="line">	<span class="keyword">if</span> (constrainPitch)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">if</span> (Pitch &gt; <span class="number">89.0f</span>)</span><br><span class="line">			Pitch = <span class="number">89.0f</span>;</span><br><span class="line">		<span class="keyword">if</span> (Pitch &lt; <span class="number">-89.0f</span>)</span><br><span class="line">			Pitch = <span class="number">-89.0f</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Update Front, Right and Up Vectors using the updated Eular angles</span></span><br><span class="line">	updateCameraVectors();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::ProcessMouseScroll(<span class="keyword">float</span> yoffset)</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">if</span> (Zoom &gt;= <span class="number">1.0f</span> &amp;&amp; Zoom &lt;= <span class="number">45.0f</span>)</span><br><span class="line">		Zoom -= yoffset;</span><br><span class="line">	<span class="keyword">if</span> (Zoom &lt;= <span class="number">1.0f</span>)</span><br><span class="line">		Zoom = <span class="number">1.0f</span>;</span><br><span class="line">	<span class="keyword">if</span> (Zoom &gt;= <span class="number">45.0f</span>)</span><br><span class="line">		Zoom = <span class="number">45.0f</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">glm::mat4 Camera::GetViewMatrix()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="comment">/*// Rotate the cameraUp</span></span><br><span class="line"><span class="comment">	glm::mat4 temp;</span></span><br><span class="line"><span class="comment">	glm::vec4 rotateUp = glm::vec4(cameraUp.x, cameraUp.y, cameraUp.z, 0.0f);</span></span><br><span class="line"><span class="comment">	temp = glm::rotate(temp, glm::radians(Roll), cameraFront);</span></span><br><span class="line"><span class="comment">	rotateUp = temp*rotateUp;//嘻嘻</span></span><br><span class="line"><span class="comment">	cameraUp = glm::normalize(glm::vec3(rotateUp.x, rotateUp.y, rotateUp.z));*/</span></span><br><span class="line"></span><br><span class="line">	glm::mat4 view = glm::lookAt(cameraPosition, cameraPosition + cameraFront, WorldUp);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> glm::rotate(view, glm::radians(Roll), cameraFront);</span><br><span class="line">	<span class="comment">//return view;</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::updateCameraVectors()</span><br><span class="line">{</span><br><span class="line">	<span class="comment">//Calculate the new Front vector</span></span><br><span class="line">	glm::vec3 front;</span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; Yaw &lt;&lt; " " &lt;&lt; Pitch &lt;&lt; std::endl;</span></span><br><span class="line">	front.x = <span class="built_in">cos</span>(glm::radians(Yaw))*<span class="built_in">cos</span>(glm::radians(Pitch));</span><br><span class="line">	front.y = <span class="built_in">sin</span>(glm::radians(Pitch));</span><br><span class="line">	front.z = <span class="built_in">sin</span>(glm::radians(Yaw))*<span class="built_in">cos</span>(glm::radians(Pitch));</span><br><span class="line">	<span class="comment">//front=glm::vec3(0.0f, 0.0f, 0.0f);</span></span><br><span class="line">	cameraFront = glm::normalize(front);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*if (bRoll)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		// Rotate the cameraUp</span></span><br><span class="line"><span class="comment">		glm::mat4 temp;</span></span><br><span class="line"><span class="comment">		glm::vec4 rotateUp = glm::vec4(cameraUp.x, cameraUp.y, cameraUp.z, 0.0f);</span></span><br><span class="line"><span class="comment">		temp = glm::rotate(temp, glm::radians(Roll), cameraFront);</span></span><br><span class="line"><span class="comment">		rotateUp = temp*rotateUp;//嘻嘻</span></span><br><span class="line"><span class="comment">		cameraUp = glm::normalize(glm::vec3(rotateUp.x, rotateUp.y, rotateUp.z));</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*std::cout &lt;&lt; "cameraRight: " &lt;&lt; cameraRight.x &lt;&lt; " " &lt;&lt; cameraRight.y &lt;&lt; " " &lt;&lt; cameraRight.z &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "cameraUp: " &lt;&lt; cameraUp.x &lt;&lt; " " &lt;&lt; cameraUp.y &lt;&lt; " " &lt;&lt; cameraUp.z &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "cameraFront: " &lt;&lt; cameraFront.x &lt;&lt; " " &lt;&lt; cameraFront.y &lt;&lt; " " &lt;&lt; cameraFront.z &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; std::endl &lt;&lt; "=========================================================" &lt;&lt; std::endl &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "cameraPosition: " &lt;&lt; cameraPosition.x &lt;&lt; " " &lt;&lt; cameraPosition.y &lt;&lt; " " &lt;&lt; cameraPosition.z &lt;&lt; std::endl;</span></span><br><span class="line"><span class="comment">	std::cout &lt;&lt; "(cameraPosition + cameraFront): " &lt;&lt; (cameraPosition + cameraFront).x &lt;&lt; " " &lt;&lt; (cameraPosition + cameraFront).y &lt;&lt; " " &lt;&lt; (cameraPosition + cameraFront).z &lt;&lt; std::endl;*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Also re-calculate the Right and Up vector;</span></span><br><span class="line">	cameraRight = glm::normalize(glm::cross(cameraFront, cameraUp));<span class="comment">//那个view旋转怎么感觉是旋转了世界空间的物体，而保持了摄像机不变啊！！！</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//WorldUp = cameraUp;</span></span><br><span class="line">	<span class="comment">//cameraUp = glm::normalize(glm::cross(cameraRight, cameraFront));</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetYaw(<span class="keyword">float</span> yaw)</span><br><span class="line">{</span><br><span class="line">	Yaw = yaw;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetPitch(<span class="keyword">float</span> pitch)</span><br><span class="line">{</span><br><span class="line">	Pitch = pitch;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetRoll(<span class="keyword">float</span> roll)</span><br><span class="line">{</span><br><span class="line">	Roll = roll;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetMovementSpeed(<span class="keyword">float</span> movementSpeed)</span><br><span class="line">{</span><br><span class="line">	MovementSpeed = movementSpeed;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetMouseSensitivity(<span class="keyword">float</span> mouseSensitivity)</span><br><span class="line">{</span><br><span class="line">	MouseSensitivity = mouseSensitivity;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Camera::SetZoom(<span class="keyword">float</span> zoom)</span><br><span class="line">{</span><br><span class="line">	Zoom = zoom;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetYaw()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> Yaw;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetPitch()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> Pitch;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetRoll()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> Roll;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetMovementSpeed()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> MovementSpeed;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetMouseSensitivity()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> MouseSensitivity;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> Camera::GetZoom()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> Zoom;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">glm::vec3 Camera::GetPosition()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> cameraPosition;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">glm::vec3 Camera::GetCameraFront()<span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">	<span class="keyword">return</span> cameraFront;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="Mesh-h"><a href="#Mesh-h" class="headerlink" title="Mesh.h"></a>Mesh.h</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MESH_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MESH_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vertex</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	glm::vec3 Position; <span class="comment">//顶点位置向量</span></span><br><span class="line">	glm::vec3 Normal; <span class="comment">//法向量</span></span><br><span class="line">	glm::vec2 TexCoords; <span class="comment">//纹理坐标</span></span><br><span class="line">	glm::vec3 Tangent;<span class="comment">//切线</span></span><br><span class="line">	glm::vec3 Bitangent; <span class="comment">//双切线</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Texture</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> id; <span class="comment">//纹理id</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> type; <span class="comment">//纹理类型，比如漫反射贴图或者镜面光贴图</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> path;</span><br><span class="line">	<span class="comment">//aiString path;</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mesh</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//函数</span></span><br><span class="line">	Mesh(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Vertex&gt; vertices, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; indices, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures);<span class="comment">//带参构造函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Draw</span><span class="params">(Shader shader)</span></span>;<span class="comment">//绘制网格</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">//网格数据</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Vertex&gt; vertices; <span class="comment">//顶点</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; indices; <span class="comment">//索引</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures; <span class="comment">//纹理</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//渲染数据</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> VAO, VBO, EBO;<span class="comment">//顶点数组对象，顶点缓冲对象，索引缓冲对象</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setupMesh</span><span class="params">()</span></span>; <span class="comment">//设置初始化缓冲</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Mesh::Mesh(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Vertex&gt; vertices, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; indices, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures)</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">this</span>-&gt;vertices = vertices;</span><br><span class="line">	<span class="keyword">this</span>-&gt;indices = indices;</span><br><span class="line">	<span class="keyword">this</span>-&gt;textures = textures;</span><br><span class="line">	setupMesh();</span><br><span class="line">}</span><br><span class="line"><span class="keyword">void</span> Mesh::setupMesh()</span><br><span class="line">{</span><br><span class="line">	glGenVertexArrays(<span class="number">1</span>, &amp;VAO);<span class="comment">//生成顶点数组对象</span></span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;VBO);<span class="comment">//生成顶点缓冲对象</span></span><br><span class="line">	glGenBuffers(<span class="number">1</span>, &amp;EBO);<span class="comment">//生成索引缓冲对象</span></span><br><span class="line"></span><br><span class="line">	glBindVertexArray(VAO);<span class="comment">//绑定顶点数组对象</span></span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ARRAY_BUFFER, VBO);<span class="comment">//绑定顶点缓冲对象</span></span><br><span class="line">	glBufferData(GL_ARRAY_BUFFER, vertices.size() * <span class="keyword">sizeof</span>(Vertex), &amp;vertices[<span class="number">0</span>], GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);<span class="comment">//绑定索引缓冲对象</span></span><br><span class="line">	glBufferData(GL_ELEMENT_ARRAY_BUFFER, indices.size() * <span class="keyword">sizeof</span>(<span class="keyword">unsigned</span> <span class="keyword">int</span>), &amp;indices[<span class="number">0</span>], GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//顶点位置</span></span><br><span class="line"></span><br><span class="line">	glVertexAttribPointer(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(Vertex), (<span class="keyword">void</span>*)<span class="number">0</span>);</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">0</span>);</span><br><span class="line">	<span class="comment">//法向量</span></span><br><span class="line"></span><br><span class="line">	glVertexAttribPointer(<span class="number">1</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(Vertex), (<span class="keyword">void</span>*)offsetof(Vertex, Normal));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">1</span>);</span><br><span class="line">	<span class="comment">//顶点纹理坐标</span></span><br><span class="line"></span><br><span class="line">	glVertexAttribPointer(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(Vertex), (<span class="keyword">void</span>*)offsetof(Vertex, TexCoords));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">2</span>);</span><br><span class="line">	<span class="comment">//切线</span></span><br><span class="line"></span><br><span class="line">	glVertexAttribPointer(<span class="number">3</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(Vertex), (<span class="keyword">void</span>*)offsetof(Vertex, Tangent));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">3</span>);</span><br><span class="line">	<span class="comment">//反切线</span></span><br><span class="line"></span><br><span class="line">	glVertexAttribPointer(<span class="number">4</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="keyword">sizeof</span>(Vertex), (<span class="keyword">void</span>*)offsetof(Vertex, Bitangent));</span><br><span class="line">	glEnableVertexAttribArray(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);<span class="comment">//恢复默认值</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Mesh::Draw(Shader shader)</span><br><span class="line">{</span><br><span class="line">	<span class="comment">//纹理命名标准</span></span><br><span class="line">	<span class="comment">//漫反射纹理texture_diffuseN，镜面光反射纹理texture.specularN</span></span><br><span class="line">	<span class="comment">//uniform sampler2D texture_diffuse1;</span></span><br><span class="line">	<span class="comment">//uniform sampler2D texture_diffuse2;</span></span><br><span class="line">	<span class="comment">//uniform sampler2D texture_diffuse3;</span></span><br><span class="line">	<span class="comment">//uniform sampler2D texture_specular1;</span></span><br><span class="line">	<span class="comment">//uniform sampler2D texture_specular2;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> diffuseNr = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> specularNr = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> normalNr = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> heightNr = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; textures.size(); i++)</span><br><span class="line">	{</span><br><span class="line">		glActiveTexture(GL_TEXTURE0 + i);<span class="comment">//在绑定之前激活相应的纹理单元</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//获取纹理序号(texture_diffuseN中的N)</span></span><br><span class="line">		<span class="comment">//std::stringstream ss;</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">string</span> number;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">string</span> name = textures[i].type;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (name == <span class="string">"texture_diffuse"</span>)</span><br><span class="line">		{</span><br><span class="line">			<span class="comment">//ss &lt;&lt; diffuseNr++;//将usigned int 插入到流中</span></span><br><span class="line">			number = <span class="built_in">std</span>::to_string(diffuseNr++);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (name == <span class="string">"texture_specular"</span>)</span><br><span class="line">		{</span><br><span class="line">			<span class="comment">//ss &lt;&lt; specularNr++;//将unsigned int插入到流中</span></span><br><span class="line">			number = <span class="built_in">std</span>::to_string(specularNr++);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (name == <span class="string">"texture_normal"</span>)</span><br><span class="line">		{</span><br><span class="line">			<span class="comment">//ss &lt;&lt; normalNr++;</span></span><br><span class="line">			number = <span class="built_in">std</span>::to_string(normalNr++);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (name == <span class="string">"texture_height"</span>)</span><br><span class="line">		{</span><br><span class="line">			<span class="comment">//ss &lt;&lt; heightNr++;</span></span><br><span class="line">			number = <span class="built_in">std</span>::to_string(heightNr++);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//number = ss.str();</span></span><br><span class="line">		<span class="comment">//glUniform1i(glGetUniformLocation(shader.ID, ("material." + name + number).c_str()), i);</span></span><br><span class="line">		shader.setInt((<span class="string">"material."</span> + name + number).c_str(), i);<span class="comment">//设置纹理uniform</span></span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, textures[i].id);<span class="comment">//绑定纹理</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//绘制网格</span></span><br><span class="line">	glBindVertexArray(VAO);</span><br><span class="line">	glDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	glBindVertexArray(<span class="number">0</span>);<span class="comment">//恢复默认值，教程说这是一个好习惯</span></span><br><span class="line">	glActiveTexture(GL_TEXTURE0);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="Model-h"><a href="#Model-h" class="headerlink" title="Model.h"></a>Model.h</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MODEL_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODEL_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GLM_FORCE_RADIANS</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/glm.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;glm/gtc/matrix_transform.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stb_image.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assimp/Importer.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assimp/scene.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assimp/postprocess.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Mesh.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Shader.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//函数</span></span><br><span class="line">	Model(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span> &amp;path);<span class="comment">//带参构造函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Draw</span><span class="params">(Shader shader)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">//模型数据</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures_loaded; <span class="comment">//希望不重复加载纹理</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Mesh&gt; meshes;<span class="comment">//模型包含多个网格</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> directory;</span><br><span class="line">	<span class="comment">//函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">loadModel</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span> &amp;path)</span></span>;<span class="comment">//加载模型场景</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">processNode</span><span class="params">(aiNode *node, <span class="keyword">const</span> aiScene *scene)</span></span>; <span class="comment">//加载场景中的所有节点获取所有网格</span></span><br><span class="line">	<span class="function">Mesh <span class="title">processMesh</span><span class="params">(aiMesh *mesh, <span class="keyword">const</span> aiScene *scene)</span></span>;<span class="comment">//处理Assimp网格数据转换成自己的Mesh</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; loadMaterialTextures(aiMaterial *mat, aiTextureType type, <span class="built_in">std</span>::<span class="built_in">string</span> typeName);<span class="comment">//加载纹理</span></span><br><span class="line">	<span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">TextureFromFile</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;directory)</span></span>;<span class="comment">//加载纹理贴图并返回纹理ID</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Model::Model(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span> &amp;path)</span><br><span class="line">{</span><br><span class="line">	loadModel(path);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Model::Draw(Shader shader)</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; meshes.size(); i++)</span><br><span class="line">	{</span><br><span class="line">		meshes[i].Draw(shader);<span class="comment">//遍历模型网格并绘制</span></span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//加载模型场景</span></span><br><span class="line"><span class="keyword">void</span> Model::loadModel(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">const</span> &amp;path)</span><br><span class="line">{</span><br><span class="line">	<span class="comment">//加载模型场景</span></span><br><span class="line">	Assimp::Importer <span class="keyword">import</span>;</span><br><span class="line">	<span class="keyword">const</span> aiScene *scene = <span class="keyword">import</span>.ReadFile(path, aiProcess_Triangulate | aiProcess_FlipUVs | aiProcess_CalcTangentSpace);</span><br><span class="line">	<span class="comment">//加载模型后，检查场景和其根节点不为null，并且检查了它的一个标记(Flag)，一次查看返回的数据是否不完整</span></span><br><span class="line">	<span class="comment">//如果遇到任何错误，我们都会通过导入期的GetErrorString函数来报告错误并返回</span></span><br><span class="line">	<span class="keyword">if</span> (!scene || scene-&gt;mFlags &amp; AI_SCENE_FLAGS_INCOMPLETE || !scene-&gt;mRootNode)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR::ASSIMP::"</span> &lt;&lt; <span class="keyword">import</span>.GetErrorString() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	}</span><br><span class="line">	directory = path.substr(<span class="number">0</span>, path.find_last_of(<span class="string">'/'</span>));</span><br><span class="line">	processNode(scene-&gt;mRootNode,scene);</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//从Assimp的节点对象中遍历所有节点的网格并载入我们的网格对象</span></span><br><span class="line"><span class="keyword">void</span> Model::processNode(aiNode *node, <span class="keyword">const</span> aiScene *scene)</span><br><span class="line">{</span><br><span class="line">	<span class="comment">//处理节点所有的网格（如果有的话）</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; node-&gt;mNumMeshes; i++)</span><br><span class="line">	{</span><br><span class="line">		aiMesh *mesh = scene-&gt;mMeshes[node-&gt;mMeshes[i]];</span><br><span class="line">		meshes.push_back(processMesh(mesh, scene));</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">//接下来对它的子节点重复这一过程</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; node-&gt;mNumChildren; i++)</span><br><span class="line">	{</span><br><span class="line">		processNode(node-&gt;mChildren[i],scene);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//将Assimp的aiMesh对象转化为我们自己的网格对象</span></span><br><span class="line">Mesh Model::processMesh(aiMesh *mesh, <span class="keyword">const</span> aiScene *scene)</span><br><span class="line">{</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Vertex&gt; vertices;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span> &gt; indices;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mesh-&gt;mNumVertices; i++)</span><br><span class="line">	{</span><br><span class="line">		Vertex vertex;</span><br><span class="line">		<span class="comment">//处理顶点位置</span></span><br><span class="line">		glm::vec3 <span class="built_in">vector</span>;</span><br><span class="line">		<span class="built_in">vector</span>.x = mesh-&gt;mVertices[i].x;</span><br><span class="line">		<span class="built_in">vector</span>.y = mesh-&gt;mVertices[i].y;</span><br><span class="line">		<span class="built_in">vector</span>.z = mesh-&gt;mVertices[i].z;</span><br><span class="line">		vertex.Position = <span class="built_in">vector</span>;</span><br><span class="line">		<span class="comment">//处理法线</span></span><br><span class="line">		<span class="built_in">vector</span>.x = mesh-&gt;mNormals[i].x;</span><br><span class="line">		<span class="built_in">vector</span>.y = mesh-&gt;mNormals[i].y;</span><br><span class="line">		<span class="built_in">vector</span>.z = mesh-&gt;mNormals[i].z;</span><br><span class="line">		vertex.Normal = <span class="built_in">vector</span>;</span><br><span class="line">		<span class="comment">//处理纹理坐标</span></span><br><span class="line">		<span class="keyword">if</span> (mesh-&gt;mTextureCoords[<span class="number">0</span>])<span class="comment">//网格是否有纹理坐标</span></span><br><span class="line">		{</span><br><span class="line">			glm::vec2 vec;</span><br><span class="line">			vec.x = mesh-&gt;mTextureCoords[<span class="number">0</span>][i].x;</span><br><span class="line">			vec.y = mesh-&gt;mTextureCoords[<span class="number">0</span>][i].y;</span><br><span class="line">			vertex.TexCoords = vec;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		{</span><br><span class="line">			vertex.TexCoords = glm::vec2(<span class="number">0.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//切线</span></span><br><span class="line">		<span class="built_in">vector</span>.x = mesh-&gt;mTangents[i].x;</span><br><span class="line">		<span class="built_in">vector</span>.y = mesh-&gt;mTangents[i].y;</span><br><span class="line">		<span class="built_in">vector</span>.z = mesh-&gt;mTangents[i].z;</span><br><span class="line">		vertex.Tangent = <span class="built_in">vector</span>;</span><br><span class="line">		<span class="comment">//反切线</span></span><br><span class="line">		<span class="built_in">vector</span>.x = mesh-&gt;mBitangents[i].x;</span><br><span class="line">		<span class="built_in">vector</span>.y = mesh-&gt;mBitangents[i].y;</span><br><span class="line">		<span class="built_in">vector</span>.z = mesh-&gt;mBitangents[i].z;</span><br><span class="line">		vertex.Bitangent = <span class="built_in">vector</span>;</span><br><span class="line">		vertices.push_back(vertex);</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">//处理索引</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mesh-&gt;mNumFaces; i++)</span><br><span class="line">	{</span><br><span class="line">		aiFace face = mesh-&gt;mFaces[i];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; face.mNumIndices; j++)</span><br><span class="line">		{</span><br><span class="line">			indices.push_back(face.mIndices[j]);</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">//处理材质</span></span><br><span class="line">	<span class="keyword">if</span> (mesh-&gt;mMaterialIndex &gt;= <span class="number">0</span>)</span><br><span class="line">	{</span><br><span class="line">		aiMaterial *material = scene-&gt;mMaterials[mesh-&gt;mMaterialIndex];</span><br><span class="line">		<span class="comment">//漫反射纹理</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; diffuseMaps = loadMaterialTextures(material, aiTextureType_DIFFUSE, <span class="string">"texture_diffuse"</span>);</span><br><span class="line">		textures.insert(textures.end(), diffuseMaps.begin(), diffuseMaps.end());</span><br><span class="line">		<span class="comment">//镜面反射纹理</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; specularMaps = loadMaterialTextures(material, aiTextureType_SPECULAR, <span class="string">"texture_specular"</span>);</span><br><span class="line">		textures.insert(textures.end(), specularMaps.begin(), specularMaps.end());</span><br><span class="line"></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; normalMaps = loadMaterialTextures(material, aiTextureType_HEIGHT, <span class="string">"texture_normal"</span>);</span><br><span class="line">		textures.insert(textures.end(), normalMaps.begin(), normalMaps.end());</span><br><span class="line"></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; heightMaps = loadMaterialTextures(material, aiTextureType_AMBIENT, <span class="string">"texture_height"</span>);</span><br><span class="line">		textures.insert(textures.end(), heightMaps.begin(), heightMaps.end());</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> Mesh(vertices, indices, textures);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; Model::loadMaterialTextures(aiMaterial *mat, aiTextureType type, <span class="built_in">std</span>::<span class="built_in">string</span> typeName)</span><br><span class="line">{</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Texture&gt; textures;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mat-&gt;GetTextureCount(type); i++)</span><br><span class="line">	{</span><br><span class="line">		aiString str;</span><br><span class="line">		mat-&gt;GetTexture(type, i, &amp;str);</span><br><span class="line">		<span class="keyword">bool</span> skip = <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; textures_loaded.size(); j++)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">std</span>::<span class="built_in">strcmp</span>(textures_loaded[j].path.c_str(), str.C_Str())==<span class="number">0</span>)</span><br><span class="line">			{</span><br><span class="line">				textures.push_back(textures_loaded[j]);</span><br><span class="line">				skip = <span class="literal">true</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="comment">//如果纹理还没有被加载，则加载它</span></span><br><span class="line">		<span class="keyword">if</span> (!skip)</span><br><span class="line">		{</span><br><span class="line">			Texture texture;</span><br><span class="line">			texture.id = TextureFromFile(str.C_Str(), <span class="keyword">this</span>-&gt;directory);</span><br><span class="line">			texture.type = typeName;</span><br><span class="line">			texture.path = str.C_Str();</span><br><span class="line">			textures.push_back(texture);</span><br><span class="line">			textures_loaded.push_back(texture);</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> textures;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> Model::TextureFromFile(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;directory)</span><br><span class="line">{</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> filename = <span class="built_in">std</span>::<span class="built_in">string</span>(path);</span><br><span class="line">	filename = directory + <span class="string">'/'</span> + filename;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> textureID;</span><br><span class="line">	glGenTextures(<span class="number">1</span>, &amp;textureID);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width, height, nrComponents;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> *data = stbi_load(filename.c_str(), &amp;width, &amp;height, &amp;nrComponents, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	{</span><br><span class="line">		GLenum format;</span><br><span class="line">		<span class="keyword">if</span> (nrComponents == <span class="number">1</span>)</span><br><span class="line">		{</span><br><span class="line">			format = GL_RED;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">3</span>)</span><br><span class="line">		{</span><br><span class="line">			format = GL_RGB;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">4</span>)</span><br><span class="line">		{</span><br><span class="line">			format = GL_RGBA;</span><br><span class="line">		}</span><br><span class="line">		glBindTexture(GL_TEXTURE_2D, textureID);</span><br><span class="line">		glTexImage2D(GL_TEXTURE_2D, <span class="number">0</span>, format, width, height, <span class="number">0</span>, format, GL_UNSIGNED_BYTE, data);</span><br><span class="line">		glGenerateMipmap(GL_TEXTURE_2D);</span><br><span class="line"></span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">		glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line">		stbi_image_free(data);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Texture failed to load at path: "</span> &lt;&lt; path &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		stbi_image_free(data);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> textureID;</span><br><span class="line">}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="Shader-vs"><a href="#Shader-vs" class="headerlink" title="Shader.vs"></a>Shader.vs</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 330 core</span></span><br><span class="line"><span class="comment">//模型加载</span></span><br><span class="line">layout(location = <span class="number">0</span>) in vec3 aPos;</span><br><span class="line">layout(location = <span class="number">1</span>) in vec3 aNormal;</span><br><span class="line">layout(location = <span class="number">2</span>) in vec2 aTexCoord;</span><br><span class="line">layout(location = <span class="number">3</span>) in vec3 Tangent;</span><br><span class="line">layout(location = <span class="number">4</span>) in vec3 Bitangent;</span><br><span class="line"></span><br><span class="line"><span class="comment">//光照</span></span><br><span class="line"><span class="comment">//layout(location = 0) in vec3 aPos;</span></span><br><span class="line"><span class="comment">//layout(location = 1) in vec4 aColor;</span></span><br><span class="line"><span class="comment">//layout(location = 2) in vec2 aTexCoord;</span></span><br><span class="line"><span class="comment">//layout(location = 3) in vec3 aNormal;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//深度测试</span></span><br><span class="line"><span class="comment">//layout(location = 0) in vec3 aPos;</span></span><br><span class="line"><span class="comment">//layout(location = 1) in vec4 aColor;</span></span><br><span class="line"><span class="comment">//layout(location = 2) in vec2 aTexCoord;</span></span><br><span class="line"><span class="comment">//layout(location = 3) in vec3 aNormal;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//out vec4 ourColor;</span></span><br><span class="line">out vec2 TexCoord;</span><br><span class="line">out vec3 Normal;</span><br><span class="line">out vec3 FragPos;</span><br><span class="line"></span><br><span class="line">uniform mat4 transform;</span><br><span class="line"></span><br><span class="line">uniform mat4 model;</span><br><span class="line">uniform mat4 view;</span><br><span class="line">uniform mat4 projection;</span><br><span class="line">uniform mat3 Normal_Matrix;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// gl_Position = vec4(aPos.x, aPos.y, aPos.z, 1.0);</span></span><br><span class="line">    <span class="comment">//gl_Position = transform*vec4(aPos.x, aPos.y, aPos.z, 1.0);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//V_clip=M_projection*M_view*M_model*V_local</span></span><br><span class="line">    gl_Position = projection*view*model*vec4(aPos,<span class="number">1.0</span>);</span><br><span class="line">    <span class="comment">//ourColor=aColor;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////</span></span><br><span class="line">   TexCoord=aTexCoord;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//原理未知...</span></span><br><span class="line">	FragPos=vec3(model*vec4(aPos,<span class="number">1.0</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Normal=aNormal;</span></span><br><span class="line">	<span class="comment">//法线矩阵修复model旋转和缩放带来的影响，当然model位移并不影响法向量</span></span><br><span class="line">	<span class="comment">//法线矩阵为模型矩阵左上角的逆矩阵的转置矩阵</span></span><br><span class="line">	<span class="comment">//具体原理暂且过，现在会用就成</span></span><br><span class="line">	<span class="comment">//线性代数好奇妙啊！！！~~~有木有！！！！</span></span><br><span class="line">	<span class="comment">//逆矩阵(Inverse Matrix)和转置矩阵(Transpose Matrix)</span></span><br><span class="line">	<span class="comment">//Normal=mat3(transpose(inverse(model)))*aNormal;</span></span><br><span class="line">	Normal=transpose(inverse(mat3(model)))*aNormal;<span class="comment">//与上述等价，哦，我就试试，果然啊，线性代数真奇妙！</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//即使是对于着色器来说，逆矩阵也是一个开销比较大的运算，</span></span><br><span class="line">	<span class="comment">//因此，只要可能就应该避免在着色器中进行逆矩阵运算，</span></span><br><span class="line">	<span class="comment">//它们必须为你场景中的每个顶点都进行这样的处理。用作学习目这样做是可以的，</span></span><br><span class="line">	<span class="comment">//但是对于一个对效率有要求的应用来说，在绘制之前你最好用CPU计算出法线矩阵，</span></span><br><span class="line">	<span class="comment">//然后通过uniform把值传递给着色器（像模型矩阵一样）。</span></span><br><span class="line">	<span class="comment">//mmp，那就用cpu和uniform传一个咯，真的是</span></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//Normal=Normal_Matrix*aNormal;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="Shader-fs"><a href="#Shader-fs" class="headerlink" title="Shader.fs"></a>Shader.fs</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 330 core</span></span><br><span class="line">out vec4 FragColor;</span><br><span class="line"><span class="comment">//in vec4 ourColor;</span></span><br><span class="line">in vec2 TexCoord;</span><br><span class="line">in vec3 Normal;</span><br><span class="line">in vec3 FragPos;</span><br><span class="line">uniform sampler2D texture_diffuse1;</span><br><span class="line">uniform sampler2D texture_diffuse2;</span><br><span class="line">uniform sampler2D texture_diffuse3;</span><br><span class="line">uniform sampler2D texture_diffuse4;</span><br><span class="line">uniform sampler2D texture_diffuse5;</span><br><span class="line">uniform sampler2D texture_diffuse6;</span><br><span class="line">uniform sampler2D texture_diffuse7;</span><br><span class="line">uniform sampler2D texture_specular1;</span><br><span class="line">uniform sampler2D texture_specular2;</span><br><span class="line">uniform sampler2D texture_specular3;</span><br><span class="line">uniform sampler2D texture_specular4;</span><br><span class="line">uniform sampler2D texture_specular5;</span><br><span class="line">uniform sampler2D texture_specular6;</span><br><span class="line">uniform sampler2D texture_specular7;</span><br><span class="line">uniform sampler2D texture_normal1;</span><br><span class="line">uniform sampler2D texture_normal2;</span><br><span class="line">uniform sampler2D texture_normal3;</span><br><span class="line">uniform sampler2D texture_normal4;</span><br><span class="line">uniform sampler2D texture_normal5;</span><br><span class="line">uniform sampler2D texture_normal6;</span><br><span class="line">uniform sampler2D texture_normal7;</span><br><span class="line">uniform sampler2D texture_height1;</span><br><span class="line">uniform sampler2D texture_height2;</span><br><span class="line">uniform sampler2D texture_height3;</span><br><span class="line">uniform sampler2D texture_height4;</span><br><span class="line">uniform sampler2D texture_height5;</span><br><span class="line">uniform sampler2D texture_height6;</span><br><span class="line">uniform sampler2D texture_height7;</span><br><span class="line">uniform sampler2D ourTexture;</span><br><span class="line"><span class="comment">//uniform sampler2D faceTexture;</span></span><br><span class="line"><span class="comment">//uniform vec4 ourColor;</span></span><br><span class="line">uniform <span class="keyword">float</span> proportion;</span><br><span class="line"></span><br><span class="line">uniform vec4 objectColor;</span><br><span class="line">uniform vec4 lightColor;</span><br><span class="line">uniform vec3 lightPos;</span><br><span class="line">uniform vec3 viewPos;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Material</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	<span class="comment">//vec3 ambient; //环境光照下物体反射的颜色</span></span><br><span class="line">	<span class="comment">//vec3 diffuse; //漫反射光照下物体的颜色</span></span><br><span class="line">	<span class="comment">//sampler2D diffuse;</span></span><br><span class="line">	sampler2D texture_diffuse1;</span><br><span class="line">	<span class="comment">//vec3 specular; //镜面放射光照对物体颜色的影响</span></span><br><span class="line">	<span class="comment">//sampler2D specular;</span></span><br><span class="line">	sampler2D texture_specular1;</span><br><span class="line">	<span class="keyword">float</span> shininess; <span class="comment">//镜面高光的散射/半径</span></span><br><span class="line">};</span><br><span class="line">uniform Material material;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Light</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	vec3 position; <span class="comment">//光源位置</span></span><br><span class="line">	vec3 direction;<span class="comment">//光线方向</span></span><br><span class="line"></span><br><span class="line">	vec3 ambient;</span><br><span class="line">	vec3 diffuse;</span><br><span class="line">	vec3 specular;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//光的衰减</span></span><br><span class="line">	<span class="keyword">float</span> constant;<span class="comment">//常数项</span></span><br><span class="line">	<span class="keyword">float</span> linear;<span class="comment">//一次项</span></span><br><span class="line">	<span class="keyword">float</span> quadratic;<span class="comment">//二次项</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//聚光</span></span><br><span class="line">	<span class="keyword">float</span> cutOff;<span class="comment">//内光角</span></span><br><span class="line">	<span class="keyword">float</span> outerCutOff;<span class="comment">//外光角</span></span><br><span class="line">};</span><br><span class="line">uniform Light light;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DirLight</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	vec3 direction;</span><br><span class="line"></span><br><span class="line">	vec3 ambient;</span><br><span class="line">	vec3 diffuse;</span><br><span class="line">	vec3 specular;</span><br><span class="line"></span><br><span class="line">};<span class="comment">//定向光</span></span><br><span class="line">uniform DirLight dirLight;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PointLight</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	vec3 position;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//衰减参数</span></span><br><span class="line">	<span class="keyword">float</span> constant;<span class="comment">//常数项</span></span><br><span class="line">	<span class="keyword">float</span> linear;<span class="comment">//一次项</span></span><br><span class="line">	<span class="keyword">float</span> quadratic;<span class="comment">//二次项</span></span><br><span class="line"></span><br><span class="line">	vec3 ambient;</span><br><span class="line">	vec3 diffuse;</span><br><span class="line">	vec3 specular;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">};<span class="comment">//点光源</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NR_POINT_LIGHTS 4</span></span><br><span class="line">uniform PointLight pointLights[NR_POINT_LIGHTS];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SpotLight</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"></span><br><span class="line">	vec3 position; <span class="comment">//光源位置</span></span><br><span class="line">	vec3 direction;<span class="comment">//光线方向</span></span><br><span class="line"></span><br><span class="line">	vec3 ambient;</span><br><span class="line">	vec3 diffuse;</span><br><span class="line">	vec3 specular;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//光的衰减</span></span><br><span class="line">	<span class="keyword">float</span> constant;<span class="comment">//常数项</span></span><br><span class="line">	<span class="keyword">float</span> linear;<span class="comment">//一次项</span></span><br><span class="line">	<span class="keyword">float</span> quadratic;<span class="comment">//二次项</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//聚光</span></span><br><span class="line">	<span class="keyword">float</span> cutOff;<span class="comment">//内光角</span></span><br><span class="line">	<span class="keyword">float</span> outerCutOff;<span class="comment">//外光角</span></span><br><span class="line">};</span><br><span class="line">uniform SpotLight spotLight;</span><br><span class="line"></span><br><span class="line"><span class="function">vec4 <span class="title">CalcDirLight</span><span class="params">(DirLight light,vec3 normal,vec3 viewDir)</span></span>;</span><br><span class="line"><span class="function">vec4 <span class="title">CalcPointLight</span><span class="params">(PointLight light,vec3 normal,vec3 fragPos,vec3 viewDir)</span></span>;</span><br><span class="line"><span class="function">vec4 <span class="title">CalcSpotLight</span><span class="params">(SpotLight light,vec3 normal,vec3 fragPos,vec3 viewDir)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//FragColor = texture(texture_diffuse1,TexCoord).rgba;</span></span><br><span class="line">	<span class="comment">//FragColor=texture(ourTexture,TexCoord);</span></span><br><span class="line">	<span class="comment">//FragColor=vec4(vec3(gl_FragCoord.z), 1.0);</span></span><br><span class="line">	<span class="comment">//FragColor = vec4(0.04, 0.28, 0.26, 1.0);</span></span><br><span class="line">	<span class="comment">//return;</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//基本颜色和纹理加载</span></span><br><span class="line">	<span class="comment">//FragColor = ourColor;</span></span><br><span class="line">    <span class="comment">//FragColor = vec4(0.0f,ourColor,0.0f,1.0f);</span></span><br><span class="line">    <span class="comment">//FragColor = vec4(ourColor,1.0f);</span></span><br><span class="line">    <span class="comment">//第一个参数是纹理采样器，第二个参数是对应的纹理坐标。</span></span><br><span class="line">    <span class="comment">//FragColor = texture(ourTexture,TexCoord);</span></span><br><span class="line">    <span class="comment">//FragColor = texture(faceTexture,TexCoord);</span></span><br><span class="line">    <span class="comment">//FragColor = texture(ourTexture,TexCoord)+ourColor;</span></span><br><span class="line">    <span class="comment">//FragColor = mix(texture(ourTexture,TexCoord),texture(faceTexture,TexCoord),0.5);</span></span><br><span class="line">    <span class="comment">//FragColor = mix(texture(ourTexture,TexCoord),texture(faceTexture,TexCoord),0.5)+ourColor;</span></span><br><span class="line">    <span class="comment">//FragColor = mix(texture(ourTexture,TexCoord),texture(faceTexture,TexCoord),proportion);</span></span><br><span class="line">    <span class="comment">//FragColor = mix(texture(ourTexture,TexCoord),texture(faceTexture,TexCoord),proportion)+ourColor;</span></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//多光源合并结果</span></span><br><span class="line">	<span class="comment">//属性</span></span><br><span class="line">	vec3 norm=normalize(Normal);</span><br><span class="line">	vec3 viewDir=normalize(viewPos-FragPos);</span><br><span class="line">	vec4 result;</span><br><span class="line">	<span class="comment">//定向光照</span></span><br><span class="line">	result=CalcDirLight(dirLight,norm,viewDir);</span><br><span class="line">	<span class="comment">//点光源</span></span><br><span class="line">	<span class="comment">/*for(int i=0;i&lt;NR_POINT_LIGHTS;i++)</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		result+=CalcPointLight(pointLights[i],norm,FragPos,viewDir);</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	<span class="comment">//聚光</span></span><br><span class="line">	<span class="comment">//result+=CalcSpotLight(spotLight,norm,FragPos,viewDir);</span></span><br><span class="line"></span><br><span class="line">	FragColor=vec4(result.x,result.y,result.z,<span class="number">1.0f</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//以下内容保留，学习过程历证，嘻嘻嘻~~~</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//基础光照</span></span><br><span class="line">	<span class="comment">//环境因子</span></span><br><span class="line">	<span class="comment">/*float ambientStrength=0.1f;</span></span><br><span class="line"><span class="comment">	//环境光照(Ambient Lighting)</span></span><br><span class="line"><span class="comment">	vec4 ambient=ambientStrength*lightColor;</span></span><br><span class="line"><span class="comment">	//FragColor=ambient*objectColor;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//漫反射光照(Diffuse Lighting)</span></span><br><span class="line"><span class="comment">	//计算光线的方向向量</span></span><br><span class="line"><span class="comment">	vec3 norm=normalize(Normal);</span></span><br><span class="line"><span class="comment">	//与光线方向相反，方便后面计算</span></span><br><span class="line"><span class="comment">	//为了与和法向量点乘为正（0-90°），当然也可以在设置法向量的时候</span></span><br><span class="line"><span class="comment">	//法向量方向指向物体中心，无所谓了，就酱</span></span><br><span class="line"><span class="comment">	vec3 lightDir=normalize(lightPos-FragPos);</span></span><br><span class="line"><span class="comment">	//个人认为光的方向向量是从光源到片段，终点为止向量减去起点位置向量</span></span><br><span class="line"><span class="comment">	//得到的才是从起点到终点的向量啊！什么鬼东西！那个谜一样的摄像机翻滚</span></span><br><span class="line"><span class="comment">	//测试后发现感觉是整个事件物体都在翻转，而不是摄像机的翻转了，上向量什么的都不变的！</span></span><br><span class="line"><span class="comment">	//也是摄像机观察矩阵旋转要有个基准...但是...下次问问老师</span></span><br><span class="line"><span class="comment">	//vec3 lightDir=normalize(FragPos-lightPos);</span></span><br><span class="line"><span class="comment">	//漫反射对于片段的实际影响结果</span></span><br><span class="line"><span class="comment">	//两个向量夹角不能大于90度，否则无意义</span></span><br><span class="line"><span class="comment">	float diff=max(dot(norm,lightDir),0.0);</span></span><br><span class="line"><span class="comment">	//漫反射分量</span></span><br><span class="line"><span class="comment">	//漫反射相当于光照对于物体颜色的影响，在法向量方向上的影响</span></span><br><span class="line"><span class="comment">	vec4 diffuse=diff*lightColor;</span></span><br><span class="line"><span class="comment">	//vec4 result=(ambientStrength+diffuse)*objectColor;</span></span><br><span class="line"><span class="comment">	//FragColor=vec4(result.x,result.y,result.z,1.0f);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面光照</span></span><br><span class="line"><span class="comment">	//镜面强度(Specular Intensity)</span></span><br><span class="line"><span class="comment">	float specularStrength=0.5;</span></span><br><span class="line"><span class="comment">	//从物体到人眼的视线方向向量</span></span><br><span class="line"><span class="comment">	vec3 viewDir=normalize(viewPos-FragPos);</span></span><br><span class="line"><span class="comment">	//还记得前面说的lightDir是与光线方向相反的吗</span></span><br><span class="line"><span class="comment">	//reflect函数就是求-lightDir关于法向量norm的反射向量</span></span><br><span class="line"><span class="comment">	vec3 reflectDir=reflect(-lightDir,norm);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面分量</span></span><br><span class="line"><span class="comment">	float spec=pow(max(dot(viewDir,reflectDir),0.0),32);</span></span><br><span class="line"><span class="comment">	vec4 specular=specularStrength*spec*lightColor;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	vec4 result=(ambient+diffuse+specular)*objectColor;</span></span><br><span class="line"><span class="comment">	FragColor=vec4(result.x,result.y,result.z,1.0f);*/</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//材质</span></span><br><span class="line">	<span class="comment">//环境光照</span></span><br><span class="line">	<span class="comment">/*float ambientStrength=0.1;</span></span><br><span class="line"><span class="comment">	vec4 ambient=material.ambient*ambientStrength*lightColor;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//漫反射光照</span></span><br><span class="line"><span class="comment">	vec3 norm=normalize(Normal);</span></span><br><span class="line"><span class="comment">	vec3 lightDir=normalize(lightPos-FragPos);</span></span><br><span class="line"><span class="comment">	float diff=max(dot(norm,lightDir),0.0);</span></span><br><span class="line"><span class="comment">	vec4 diffuse=diff*material.diffuse*lightColor;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面光照</span></span><br><span class="line"><span class="comment">	vec3 viewDir=normalize(viewPos-FragPos);</span></span><br><span class="line"><span class="comment">	vec3 reflectDir=reflect(-lightDir,norm);</span></span><br><span class="line"><span class="comment">	float spec=pow(max(dot(viewDir,reflectDir),0.0f),material.shininess);</span></span><br><span class="line"><span class="comment">	vec4 specular=spec*material.specular*lightColor;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	vec4 result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	FragColor=vec4(result.x,result.y,result.z,1.0f);*/</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//光的属性+材质</span></span><br><span class="line">	<span class="comment">//环境光照</span></span><br><span class="line">	<span class="comment">/*float ambientStrength=0.1;</span></span><br><span class="line"><span class="comment">	vec4 ambient=material.ambient*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//漫反射光照</span></span><br><span class="line"><span class="comment">	vec3 norm=normalize(Normal);</span></span><br><span class="line"><span class="comment">	vec3 lightDir=normalize(light.position-FragPos);</span></span><br><span class="line"><span class="comment">	float diff=max(dot(norm,lightDir),0.0);</span></span><br><span class="line"><span class="comment">	vec4 diffuse=diff*material.diffuse*light.diffuse;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面光照</span></span><br><span class="line"><span class="comment">	vec3 viewDir=normalize(viewPos-FragPos);</span></span><br><span class="line"><span class="comment">	vec3 reflectDir=reflect(-lightDir,norm);</span></span><br><span class="line"><span class="comment">	float spec=pow(max(dot(viewDir,reflectDir),0.0f),material.shininess);</span></span><br><span class="line"><span class="comment">	vec4 specular=spec*material.specular*light.specular;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	vec4 result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	FragColor=vec4(result.x,result.y,result.z,1.0f);*/</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//光照贴图</span></span><br><span class="line">	<span class="comment">/*float ambientStrength=0.1;</span></span><br><span class="line"><span class="comment">	//vec4 ambient=vec4(texture(material.diffuse,TexCoord))*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment">	vec4 ambient=texture(material.diffuse,TexCoord).rgba*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//漫反射光照</span></span><br><span class="line"><span class="comment">	vec3 norm=normalize(Normal);</span></span><br><span class="line"><span class="comment">	vec3 lightDir=normalize(light.position-FragPos);</span></span><br><span class="line"><span class="comment">	float diff=max(dot(norm,lightDir),0.0);</span></span><br><span class="line"><span class="comment">	//vec4 diffuse=diff*vec4(texture(material.diffuse,TexCoord))*light.diffuse;</span></span><br><span class="line"><span class="comment">	vec4 diffuse=diff*texture(material.diffuse,TexCoord).rgba*light.diffuse;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面光照</span></span><br><span class="line"><span class="comment">	vec3 viewDir=normalize(viewPos-FragPos);</span></span><br><span class="line"><span class="comment">	vec3 reflectDir=reflect(-lightDir,norm);</span></span><br><span class="line"><span class="comment">	float spec=pow(max(dot(viewDir,reflectDir),0.0f),material.shininess);</span></span><br><span class="line"><span class="comment">	//vec4 specular=spec*texture(material.specular,TexCoord).rgba*light.specular;</span></span><br><span class="line"><span class="comment">	//由于木头也有镜面反光，为了更加真实</span></span><br><span class="line"><span class="comment">	vec4 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.8).rgba*light.specular;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	vec4 result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	FragColor=vec4(result.x,result.y,result.z,1.0f);*/</span></span><br><span class="line">	<span class="comment">///////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//投光物</span></span><br><span class="line">	<span class="comment">/*float ambientStrength=0.1;</span></span><br><span class="line"><span class="comment">	//vec4 ambient=vec4(texture(material.diffuse,TexCoord))*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment">	//vec4 ambient=texture(material.diffuse,TexCoord).rgba*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment">	vec3 ambient=texture(material.diffuse,TexCoord).rgba*ambientStrength*light.ambient;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//漫反射光照</span></span><br><span class="line"><span class="comment">	vec3 norm=normalize(Normal);</span></span><br><span class="line"><span class="comment">	vec3 lightDir=normalize(light.position-FragPos);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	float diff=max(dot(norm,lightDir),0.0);</span></span><br><span class="line"><span class="comment">	//vec4 diffuse=diff*vec4(texture(material.diffuse,TexCoord))*light.diffuse;</span></span><br><span class="line"><span class="comment">	//vec4 diffuse=diff*texture(material.diffuse,TexCoord).rgba*light.diffuse;</span></span><br><span class="line"><span class="comment">	vec3 diffuse=diff*texture(material.diffuse,TexCoord).rgba*light.diffuse;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//镜面光照</span></span><br><span class="line"><span class="comment">	vec3 viewDir=normalize(viewPos-FragPos);</span></span><br><span class="line"><span class="comment">	vec3 reflectDir=reflect(-lightDir,norm);</span></span><br><span class="line"><span class="comment">	float spec=pow(max(dot(viewDir,reflectDir),0.0f),material.shininess);</span></span><br><span class="line"><span class="comment">	//vec4 specular=spec*texture(material.specular,TexCoord).rgba*light.specular;</span></span><br><span class="line"><span class="comment">	//由于木头也有镜面反光，为了更加真实</span></span><br><span class="line"><span class="comment">	//vec4 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.6).rgba*light.specular;</span></span><br><span class="line"><span class="comment">	vec3 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.6).rgba*light.specular;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//衰减</span></span><br><span class="line"><span class="comment">	float distance=length(light.position-FragPos);</span></span><br><span class="line"><span class="comment">	float attenuation=1.0/(light.constant+light.linear*distance+light.quadratic*distance*distance);</span></span><br><span class="line"><span class="comment">	ambient*=attenuation;</span></span><br><span class="line"><span class="comment">	diffuse*=attenuation;</span></span><br><span class="line"><span class="comment">	specular*=attenuation;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//聚光</span></span><br><span class="line"><span class="comment">	//vec4 result;</span></span><br><span class="line"><span class="comment">	vec3 result;</span></span><br><span class="line"><span class="comment">	float theta=dot(-lightDir,normalize(light.direction));</span></span><br><span class="line"><span class="comment">	//平滑/软化边缘</span></span><br><span class="line"><span class="comment">	float epsilon=light.cutOff-light.outerCutOff;</span></span><br><span class="line"><span class="comment">	float intensity=clamp((theta-light.outerCutOff)/epsilon,0.0,1.0);//约束在0-1之间</span></span><br><span class="line"><span class="comment">	ambient*=intensity;</span></span><br><span class="line"><span class="comment">	diffuse*=intensity;</span></span><br><span class="line"><span class="comment">	specular*=intensity;</span></span><br><span class="line"><span class="comment">	//if(theta&gt;light.cutOff)//注意这里的切光角和两向量的夹角都采用余弦表示</span></span><br><span class="line"><span class="comment">	//{</span></span><br><span class="line"><span class="comment">	//	result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	//}</span></span><br><span class="line"><span class="comment">	//else //使用环境光</span></span><br><span class="line"><span class="comment">	//{</span></span><br><span class="line"><span class="comment">	//	result=ambient;</span></span><br><span class="line"><span class="comment">	//}</span></span><br><span class="line"><span class="comment">	result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	FragColor=vec4(result.x,result.y,result.z,1.0f);*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/////////////////////////////////////////////////////////////////////</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">vec4 <span class="title">CalcDirLight</span><span class="params">(DirLight light,vec3 normal,vec3 viewDir)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">float</span> ambientStrength=<span class="number">0.1</span>;</span><br><span class="line">	<span class="comment">//vec3 ambient=vec3(texture(material.diffuse,TexCoord))*ambientStrength*light.ambient;</span></span><br><span class="line">	vec3 ambient=texture(material.texture_diffuse1,TexCoord).rgb*light.ambient;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//漫反射光照</span></span><br><span class="line">	vec3 lightDir=normalize(-light.direction);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> diff=max(dot(normal,lightDir),<span class="number">0.0</span>);</span><br><span class="line">	<span class="comment">//vec4 diffuse=diff*vec4(texture(material.diffuse,TexCoord))*light.diffuse;</span></span><br><span class="line">	<span class="comment">//vec3 diffuse=diff*texture(material.diffuse,TexCoord).rgb*light.diffuse;</span></span><br><span class="line">	vec3 diffuse=diff*texture(material.texture_diffuse1,TexCoord).rgb*light.diffuse;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//镜面光照</span></span><br><span class="line">	vec3 reflectDir=reflect(-lightDir,normal);</span><br><span class="line">	<span class="keyword">float</span> spec=<span class="built_in">pow</span>(max(dot(viewDir,reflectDir),<span class="number">0.0f</span>),<span class="comment">/*material.shininess*/</span><span class="number">64.0f</span>);</span><br><span class="line">	<span class="comment">//vec4 specular=spec*texture(material.specular,TexCoord).rgba*light.specular;</span></span><br><span class="line">	<span class="comment">//由于木头也有镜面反光，为了更加真实</span></span><br><span class="line">	<span class="comment">//vec3 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.6).rgb*light.specular;</span></span><br><span class="line">	vec3 specular=spec*mix(texture(material.texture_diffuse1,TexCoord),texture(material.texture_specular1,TexCoord),<span class="number">0.8</span>).rgb*light.specular;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//合并结果</span></span><br><span class="line">	vec3 result=ambient+diffuse+specular;</span><br><span class="line">	<span class="keyword">return</span> vec4(result.x,result.y,result.z,<span class="number">1.0f</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">vec4 <span class="title">CalcPointLight</span><span class="params">(PointLight light,vec3 normal,vec3 fragPos,vec3 viewDir)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//float ambientStrength=0.1;</span></span><br><span class="line">	<span class="comment">//vec4 ambient=vec4(texture(material.diffuse,TexCoord))*ambientStrength*light.ambient;</span></span><br><span class="line">	<span class="comment">//vec3 ambient=texture(material.diffuse,TexCoord).rgb*light.ambient;</span></span><br><span class="line">	vec3 ambient=texture(material.texture_diffuse1,TexCoord).rgb*light.ambient;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//漫反射光照</span></span><br><span class="line">	vec3 lightDir=normalize(light.position-fragPos);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> diff=max(dot(normal,lightDir),<span class="number">0.0</span>);</span><br><span class="line">	<span class="comment">//vec4 diffuse=diff*vec4(texture(material.diffuse,TexCoord))*light.diffuse;</span></span><br><span class="line">	<span class="comment">//vec3 diffuse=diff*texture(material.diffuse,TexCoord).rgb*light.diffuse;</span></span><br><span class="line">	vec3 diffuse=diff*texture(material.texture_diffuse1,TexCoord).rgb*light.diffuse;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//镜面光照</span></span><br><span class="line">	vec3 reflectDir=reflect(-lightDir,normal);</span><br><span class="line">	<span class="keyword">float</span> spec=<span class="built_in">pow</span>(max(dot(viewDir,reflectDir),<span class="number">0.0f</span>),material.shininess);</span><br><span class="line">	<span class="comment">//vec4 specular=spec*texture(material.specular,TexCoord).rgba*light.specular;</span></span><br><span class="line">	<span class="comment">//由于木头也有镜面反光，为了更加真实</span></span><br><span class="line">	<span class="comment">//vec3 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.6).rgb*light.specular;</span></span><br><span class="line">	vec3 specular=spec*mix(texture(material.texture_diffuse1,TexCoord),texture(material.texture_specular1,TexCoord),<span class="number">0.6</span>).rgb*light.specular;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//衰减</span></span><br><span class="line">	<span class="keyword">float</span> distance=length(light.position-FragPos);</span><br><span class="line">	<span class="keyword">float</span> attenuation=<span class="number">1.0</span>/(light.constant+light.linear*distance+light.quadratic*distance*distance);</span><br><span class="line">	ambient*=attenuation;</span><br><span class="line">	diffuse*=attenuation;</span><br><span class="line">	specular*=attenuation;</span><br><span class="line"></span><br><span class="line">	vec3 result=ambient+diffuse+specular;</span><br><span class="line">	<span class="keyword">return</span> vec4(result.x,result.y,result.z,<span class="number">1.0f</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">vec4 <span class="title">CalcSpotLight</span><span class="params">(SpotLight light,vec3 normal,vec3 fragPos,vec3 viewDir)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//float ambientStrength=0.1;</span></span><br><span class="line">	<span class="comment">//vec4 ambient=vec4(texture(material.diffuse,TexCoord))*ambientStrength*light.ambient;</span></span><br><span class="line">	<span class="comment">//vec3 ambient=texture(material.diffuse,TexCoord).rgb*light.ambient;</span></span><br><span class="line">	vec3 ambient=texture(material.texture_diffuse1,TexCoord).rgb*light.ambient;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//漫反射光照</span></span><br><span class="line">	vec3 lightDir=normalize(light.position-fragPos);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> diff=max(dot(normal,lightDir),<span class="number">0.0</span>);</span><br><span class="line">	<span class="comment">//vec4 diffuse=diff*vec4(texture(material.diffuse,TexCoord))*light.diffuse;</span></span><br><span class="line">	<span class="comment">//vec3 diffuse=diff*texture(material.diffuse,TexCoord).rgb*light.diffuse;</span></span><br><span class="line">	vec3 diffuse=diff*texture(material.texture_diffuse1,TexCoord).rgb*light.diffuse;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//镜面光照</span></span><br><span class="line">	vec3 reflectDir=reflect(-lightDir,normal);</span><br><span class="line">	<span class="keyword">float</span> spec=<span class="built_in">pow</span>(max(dot(viewDir,reflectDir),<span class="number">0.0f</span>),material.shininess);</span><br><span class="line">	<span class="comment">//vec4 specular=spec*texture(material.specular,TexCoord).rgba*light.specular;</span></span><br><span class="line">	<span class="comment">//由于木头也有镜面反光，为了更加真实</span></span><br><span class="line">	<span class="comment">//vec3 specular=spec*mix(texture(material.diffuse,TexCoord),texture(material.specular,TexCoord),0.6).rgb*light.specular;</span></span><br><span class="line">	vec3 specular=spec*mix(texture(material.texture_diffuse1,TexCoord),texture(material.texture_specular1,TexCoord),<span class="number">0.6</span>).rgb*light.specular;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//衰减</span></span><br><span class="line">	<span class="keyword">float</span> distance=length(light.position-FragPos);</span><br><span class="line">	<span class="keyword">float</span> attenuation=<span class="number">1.0</span>/(light.constant+light.linear*distance+light.quadratic*distance*distance);</span><br><span class="line">	ambient*=attenuation;</span><br><span class="line">	diffuse*=attenuation;</span><br><span class="line">	specular*=attenuation;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//聚光</span></span><br><span class="line">	vec3 result;</span><br><span class="line">	<span class="keyword">float</span> theta=dot(-lightDir,normalize(light.direction));</span><br><span class="line">	<span class="comment">//平滑/软化边缘</span></span><br><span class="line">	<span class="keyword">float</span> epsilon=light.cutOff-light.outerCutOff;</span><br><span class="line">	<span class="keyword">float</span> intensity=clamp((theta-light.outerCutOff)/epsilon,<span class="number">0.0</span>,<span class="number">1.0</span>);<span class="comment">//约束在0-1之间</span></span><br><span class="line">	ambient*=intensity;</span><br><span class="line">	diffuse*=intensity;</span><br><span class="line">	specular*=intensity;</span><br><span class="line">	<span class="comment">/*if(theta&gt;light.cutOff)//注意这里的切光角和两向量的夹角都采用余弦表示</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		result=ambient+diffuse+specular;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">	else //使用环境光</span></span><br><span class="line"><span class="comment">	{</span></span><br><span class="line"><span class="comment">		result=ambient;</span></span><br><span class="line"><span class="comment">	}*/</span></span><br><span class="line">	result=ambient+diffuse+specular;</span><br><span class="line">	<span class="keyword">return</span> vec4(result.x,result.y,result.z,<span class="number">1.0f</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="page-reward"><a href="javascript:;" class="page-reward-btn tooltip-top"><div class="tooltip tooltip-east"> <span class="tooltip-item">赏</span><span class="tooltip-content"><span class="tooltip-text"><span class="tooltip-inner"><p class="reward-p"><i class="icon icon-quo-left"></i>Thank you for inviting me to have candy.<i class="icon icon-quo-right"></i></p><div class="reward-box"><div class="reward-box-item"> <img class="reward-img" src="/assets/img/blog/zhifubao.png"> <span class="reward-type">支付宝</span></div><div class="reward-box-item"> <img class="reward-img" src="/assets/img/blog/weixin.jpg"> <span class="reward-type">微信</span></div></div></span></span></span></div></a></div></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><i class="icon-price-tags icon"></i><ul class="article-tag-list"><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag article-tag-list-link color1">Essay</a></li></ul></div><div class="share-btn share-icons tooltip-left"><div class="tooltip tooltip-east"><span class="tooltip-item"><a href="javascript:;" class="share-sns share-outer"><i class="icon icon-share"></i></a></span><span class="tooltip-content"><div class="share-wrap"><div class="share-icons"><a class="weibo share-sns" href="javascript:;" data-type="weibo"><i class="icon icon-weibo"></i></a><a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin"><i class="icon icon-weixin"></i></a><a class="qq share-sns" href="javascript:;" data-type="qq"><i class="icon icon-qq"></i></a><a class="douban share-sns" href="javascript:;" data-type="douban"><i class="icon icon-douban"></i></a><a class="qzone share-sns" href="javascript:;" data-type="qzone"><i class="icon icon-qzone"></i></a><a class="facebook share-sns" href="javascript:;" data-type="facebook"><i class="icon icon-facebook"></i></a><a class="twitter share-sns" href="javascript:;" data-type="twitter"><i class="icon icon-twitter"></i></a><a class="google share-sns" href="javascript:;" data-type="google"><i class="icon icon-google"></i></a></div></div></span></div></div><div class="page-modal wx-share js-wx-box"><a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"> <img src="http://s.jiathis.com/qrcode.php?url=https://lourisxu.github.io/2018/01/29/opengl-learning-code-is-total.html/" alt="微信分享二维码"></div></div><div class="mask js-mask"></div><div class="clearfix"></div></div></div></article><nav id="article-nav"><a href="/2018/03/21/ladder-exercise-set.html/" id="article-nav-newer" class="article-nav-link-wrap"><i class="icon-circle-left"></i><div class="article-nav-title"> 天梯赛练习集</div></a><a href="/2017/09/30/to-do-it.html/" id="article-nav-older" class="article-nav-link-wrap"><div class="article-nav-title">To Do it</div><i class="icon-circle-right"></i></a></nav><aside class="wrap-side-operation"><div class="mod-side-operation"><div class="jump-container" id="js-jump-container" style="display:none"><a href="javascript:void(0)" class="mod-side-operation__jump-to-top"><i class="icon-font icon-back"></i></a><div id="js-jump-plan-container" class="jump-plan-container" style="top:-11px"><i class="icon-font icon-plane jump-plane"></i></div></div><div class="toc-container tooltip-left"><i class="icon-font icon-category"></i><div class="tooltip tooltip-east"><span class="tooltip-item"></span><span class="tooltip-content"><div class="toc-article"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#环境搭建"><span class="toc-number">2.</span> <span class="toc-text">环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#本地新建OpenGL文件夹"><span class="toc-number">2.1.</span> <span class="toc-text">本地新建OpenGL文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置GLEW库"><span class="toc-number">2.2.</span> <span class="toc-text">配置GLEW库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置GLFW库"><span class="toc-number">2.3.</span> <span class="toc-text">配置GLFW库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置GLAD库"><span class="toc-number">2.4.</span> <span class="toc-text">配置GLAD库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目添加库目录和链接依赖项"><span class="toc-number">2.5.</span> <span class="toc-text">项目添加库目录和链接依赖项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse"><span class="toc-number">3.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-One-Geometric-Primitives-cpp"><span class="toc-number">3.1.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_One_Geometric_Primitives.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Two-Shader-Complicated-cpp"><span class="toc-number">3.2.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Two_Shader_Complicated.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Two-Shader-Reduced-cpp"><span class="toc-number">3.3.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Two_Shader_Reduced.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Three-Texture-cpp"><span class="toc-number">3.4.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Three_Texture.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Four-Geometric-Translate-cpp"><span class="toc-number">3.5.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Four_Geometric_Translate.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Five-3DModel-cpp"><span class="toc-number">3.6.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Five_3DModel.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Six-Camera-Origin-cpp"><span class="toc-number">3.7.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Six_Camera_Origin.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Six-Camera-Class-cpp"><span class="toc-number">3.8.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Six_Camera_Class.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-ElementaryCourse-Combined-cpp"><span class="toc-number">3.9.</span> <span class="toc-text">OpenGL_Learn_ElementaryCourse_Combined.cpp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenGL-Learn-Lighting"><span class="toc-number">4.</span> <span class="toc-text">OpenGL_Learn_Lighting</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-Lighting-One-BasicLighting-cpp"><span class="toc-number">4.1.</span> <span class="toc-text">OpenGL_Learn_Lighting_One_BasicLighting.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-Lighting-Two-Material-cpp"><span class="toc-number">4.2.</span> <span class="toc-text">OpenGL_Learn_Lighting_Two_Material.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-Lighting-Three-LightingMap-cpp"><span class="toc-number">4.3.</span> <span class="toc-text">OpenGL_Learn_Lighting_Three_LightingMap.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-Lighting-Four-LightingCasters-cpp"><span class="toc-number">4.4.</span> <span class="toc-text">OpenGL_Learn_Lighting_Four_LightingCasters.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-Lighting-Five-MultipleLights-cpp"><span class="toc-number">4.5.</span> <span class="toc-text">OpenGL_Learn_Lighting_Five_MultipleLights.cpp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenGL-Learn-LoadModel"><span class="toc-number">5.</span> <span class="toc-text">OpenGL_Learn_LoadModel</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-LoadModel-cpp"><span class="toc-number">5.1.</span> <span class="toc-text">OpenGL_Learn_LoadModel.cpp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenGL-Learn-AdvancedOpenGL"><span class="toc-number">6.</span> <span class="toc-text">OpenGL_Learn_AdvancedOpenGL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-AdvancedOpenGL-One-DepthTesting-cpp"><span class="toc-number">6.1.</span> <span class="toc-text">OpenGL_Learn_AdvancedOpenGL_One_DepthTesting.cpp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-Learn-AdvancedOpenGL-Two-StencilTesting-cpp"><span class="toc-number">6.2.</span> <span class="toc-text">OpenGL_Learn_AdvancedOpenGL_Two_StencilTesting.cpp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Components"><span class="toc-number">7.</span> <span class="toc-text">Components</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Shader-h"><span class="toc-number">7.1.</span> <span class="toc-text">Shader.h</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Camera-h"><span class="toc-number">7.2.</span> <span class="toc-text">Camera.h</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mesh-h"><span class="toc-number">7.3.</span> <span class="toc-text">Mesh.h</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Model-h"><span class="toc-number">7.4.</span> <span class="toc-text">Model.h</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shader-vs"><span class="toc-number">7.5.</span> <span class="toc-text">Shader.vs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shader-fs"><span class="toc-number">7.6.</span> <span class="toc-text">Shader.fs</span></a></li></ol></li></ol></div></span></div></div></div></aside></div></div></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"> &copy; 2025 Louris <span style="font-size:smaller">Hosted by <a href="https://coding.net/" target="_blank" rel="noopener" style="font-weight:700">Coding Pages</a>/ <a href="https://gitee.com/" target="_blank" rel="noopener" style="font-weight:700">Gitee Pages</a>/ <a href="https://github.com/" target="_blank" rel="noopener" style="font-weight:700">Github Pages</a></span></div><div class="footer-right"> <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten</div></div></div></footer></div><script>var yiliaConfig={mathjax:!0,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,open_in_new:!1,toc_hide_index:!1,root:"/",innerArchive:!0,showTags:!1}</script><script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(203),t.exports=r(199)},function(t,n,r){var d=r(3),y=r(49),g=r(26),m=r(27),b=r(46),x="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[x],v=f?y:y[n]||(y[n]={}),p=v[x]||(v[x]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?b(o,d):s&&"function"==typeof o?b(Function.call,o):o,h&&m(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(128)("wks"),i=r(78),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(170),o=r(53),u=Object.defineProperty;n.f=r(9)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(52),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(59),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(95),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(50);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(10),i=r(74);t.exports=r(9)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(26),c=r(25),f=r(78)("src"),e="toString",i=Function[e],a=(""+i).split(e);r(49).inspectSource=function(t){return i.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,e,function(){return"function"==typeof this&&this[f]||i.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(50),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(64),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(116),i=r(74),o=r(32),u=r(53),c=r(25),f=r(170),a=Object.getOwnPropertyDescriptor;n.f=r(9)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(25),i=r(17),o=r(149)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(115),i=r(50);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(16)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(6),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(21);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(24),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(16)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var o=r(19);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var b=r(46),x=r(115),S=r(17),w=r(11),e=r(134);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,m=t||e;return function(t,n,r){for(var e,i,o=S(t),u=x(o),c=b(n,r,3),f=w(u.length),a=0,s=h?m(t,f):v?m(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){var r=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(49),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var d=r(6),y=r(24),g=r(92),m=r(13),b="prototype",x=function(t,n,r){var e,i,o,u=t&x.F,c=t&x.G,f=t&x.S,a=t&x.P,s=t&x.B,l=t&x.W,h=c?y:y[n]||(y[n]={}),v=h[b],p=c?d:f?d[n]:(d[n]||{})[b];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&e in h||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[b]=e[b],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&x.R&&v&&!v[e]&&m(v,e,o)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128,t.exports=x},function(t,n,r){var o=r(191),e=r(1),i=r(128)("metadata"),u=i.store||(i.store=new(r(194))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(9)){var g=r(70),m=r(3),b=r(4),x=r(1),S=r(130),e=r(155),h=r(46),w=r(68),i=r(74),_=r(26),o=r(75),u=r(52),O=r(11),E=r(189),c=r(77),f=r(53),a=r(25),M=r(114),P=r(5),v=r(17),p=r(141),j=r(71),F=r(31),A=r(72).f,d=r(157),s=r(78),l=r(7),y=r(48),L=r(117),N=r(129),T=r(158),I=r(80),k=r(123),R=r(76),C=r(133),D=r(162),G=r(10),W=r(30),U=G.f,V=W.f,B=m.RangeError,q=m.TypeError,z=m.Uint8Array,H="ArrayBuffer",K="Shared"+H,J="BYTES_PER_ELEMENT",Y="prototype",$=Array[Y],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=L(!0),ut=L(!1),ct=T.values,ft=T.keys,at=T.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,mt=l("iterator"),bt=l("toStringTag"),xt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return Lt(N(t,t[St]),n)}),Pt=b(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[Y].set&&b(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},Lt=function(t,n){if(!(P(t)&&xt in t))throw q("It is not a typed array constructor!");return new t(n)},Nt=function(t,n){return Tt(N(t,t[St]),n)},Tt=function(t,n){for(var r=0,e=n.length,i=Lt(t,e);r<e;)i[r]=n[r++];return i},It=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=Lt(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=Lt(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&b(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Nt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(N(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Nt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),x(x.S+x.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),b(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Ht=o({},Gt);o(Ht,Vt),_(Ht,mt,Vt.values),o(Ht,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),It(Ht,"buffer","b"),It(Ht,"byteOffset","o"),It(Ht,"byteLength","l"),It(Ht,"length","e"),U(Ht,bt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=m[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[Y],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==H||c==K))return _t in n?Tt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if((o=O(e)*l)+a>s)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[Y]=j(Ht),_(a,"constructor",v)):b(function(){v(1)})&&b(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==H||i==K?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Tt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[Y]=a,g||(a.constructor=v));var s=a[mt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,xt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[bt]==h:bt in a)||U(a,bt,{get:function(){return h}}),f[h]=v,x(x.G+x.W+x.F*(v!=c),f),x(x.S,h,{BYTES_PER_ELEMENT:l}),x(x.S+x.F*b(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),x(x.P,h,Gt),R(h),x(x.P+x.F*jt,h,{set:Ut}),x(x.P+x.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),x(x.P+x.F*b(function(){new v(1).slice()}),h,{slice:Wt}),x(x.P+x.F*(b(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!b(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),I[h]=d?s:y,g||d||_(a,mt,y)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(58)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var b=r(36),x=r(54),S=r(65),w=r(13),_=r(8),O=r(35),E=r(97),M=r(38),P=r(103),j=r(16)("iterator"),F=!([].keys&&"next"in[].keys()),A="values",L=function(){return this};t.exports=function(t,n,r,e,i,o,u){E(r,n,e);var c,f,a,s=function(t){if(!F&&t in p)return p[t];switch(t){case"keys":case A:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==A,v=!1,p=t.prototype,d=p[j]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,m="Array"==n&&p.entries||d;if(m&&(a=P(m.call(new t)))!==Object.prototype&&a.next&&(M(a,l,!0),b||_(a,j)||w(a,j,L)),h&&d&&d.name!==A&&(v=!0,y=function(){return d.call(this)}),b&&!u||!F&&!v&&p[j]||w(p,j,y),O[n]=y,O[l]=L,i)if(c={values:h?y:s(A),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else x(x.P+x.F*(F||v),n,c);return c}},function(t,n,e){var i=e(20),o=e(100),u=e(34),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(58)("iframe"),r=u.length;for(n.style.display="none",e(94).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(64),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(8),c=r(15),f=r(91)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(26)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(78)("meta"),i=r(5),o=r(25),u=r(10).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(46),v=r(173),p=r(141),d=r(2),y=r(11),g=r(157),m={},b={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===m||f===b)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===m||f===b)return f}).BREAK=m,n.RETURN=b},function(t,n){t.exports=!1},function(t,n,e){var i=e(2),o=e(179),u=e(137),c=e(149)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(136)("iframe"),r=u.length;for(n.style.display="none",e(139).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(181),i=r(137).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(181),i=r(137);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(27);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(9),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(52),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports={}},function(t,n,r){var e=r(10).f,i=r(25),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(50),c=r(4),f=r(153),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"​"!="​"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){t.exports={default:r(88),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(85)),o=e(r(84)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(24).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(15),a=r(106),s=r(105);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var o=r(89);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var c=r(29),f=r(63),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(57);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(57);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(61),i=r(22),o=r(38),u={};r(13)(u,r(16)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(14),c=r(20),f=r(29);t.exports=r(12)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(15),u=r(42),c=r(8),f=r(59),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(15),i=r(62).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(79),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(33);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(90),i=r(98),o=r(35),u=r(15);t.exports=r(60)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(60)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(6),u=r(8),i=r(12),o=r(54),c=r(65),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(16),p=r(44),d=r(43),y=r(93),g=r(96),m=r(20),b=r(15),x=r(42),S=r(22),w=r(61),_=r(102),O=r(101),E=r(14),M=r(29),P=O.f,j=E.f,F=_.f,A=e.Symbol,L=e.JSON,N=L&&L.stringify,T="prototype",I=v("_hidden"),k=v("toPrimitive"),R={}.propertyIsEnumerable,C=s("symbol-registry"),D=s("symbols"),G=s("op-symbols"),W=Object[T],U="function"==typeof A,V=e.QObject,B=!V||!V[T]||!V[T].findChild,q=i&&a(function(){return 7!=w(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=P(W,n);e&&delete W[n],j(t,n,r),e&&t!==W&&j(W,n,e)}:j,z=function(t){var n=D[t]=w(A[T]);return n._k=t,n},H=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},K=function(t,n,r){return t===W&&K(G,n,r),m(t),n=x(n,!0),m(r),u(D,n)?(r.enumerable?(u(t,I)&&t[I][n]&&(t[I][n]=!1),r=w(r,{enumerable:S(0,!1)})):(u(t,I)||j(t,I,S(1,{})),t[I][n]=!0),q(t,n,r)):j(t,n,r)},J=function(t,n){m(t);for(var r,e=y(n=b(n)),i=0,o=e.length;i<o;)K(t,r=e[i++],n[r]);return t},Y=function(t){var n=R.call(this,t=x(t,!0));return!(this===W&&u(D,t)&&!u(G,t))&&(!(n||!u(this,t)||!u(D,t)||u(this,I)&&this[I][t])||n)},$=function(t,n){if(t=b(t),n=x(n,!0),t!==W||!u(D,n)||u(G,n)){var r=P(t,n);return!r||!u(D,n)||u(t,I)&&t[I][n]||(r.enumerable=!0),r}},X=function(t){for(var n,r=F(b(t)),e=[],i=0;r.length>i;)u(D,n=r[i++])||n==I||n==f||e.push(n);return e},Q=function(t){for(var n,r=t===W,e=F(r?G:b(t)),i=[],o=0;e.length>o;)!u(D,n=e[o++])||r&&!u(W,n)||i.push(D[n]);return i};U||(c((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===W&&r.call(G,t),u(this,I)&&u(this[I],n)&&(this[I][n]=!1),q(this,n,S(1,t))};return i&&B&&q(W,n,{configurable:!0,set:r}),z(n)})[T],"toString",function(){return this._k}),O.f=$,E.f=K,r(62).f=_.f=X,r(37).f=Y,r(63).f=Q,i&&!r(36)&&c(W,"propertyIsEnumerable",Y,!0),p.f=function(t){return z(v(t))}),o(o.G+o.W+o.F*!U,{Symbol:A});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)v(Z[tt++]);for(var nt=M(v.store),rt=0;nt.length>rt;)d(nt[rt++]);o(o.S+o.F*!U,"Symbol",{for:function(t){return u(C,t+="")?C[t]:C[t]=A(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var n in C)if(C[n]===t)return n},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!U,"Object",{create:function(t,n){return void 0===n?w(t):J(w(t),n)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),L&&o(o.S+o.F*(!U||a(function(){var t=A();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!H(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return"function"==typeof(n=e[1])&&(r=n),!r&&g(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!H(n))return n}),e[1]=n,N.apply(L,e)}}}),A[T][k]||r(13)(A[T],k,A[T].valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(6),i=r(13),o=r(35),u=r(16)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var f=r(32),a=r(11),s=r(77);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),m=r(1),b=r(27),x=r(75),S=r(67),w=r(69),_=r(68),O=r(5),E=r(4),M=r(123),P=r(81),j=r(140);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];b(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),x(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,m(m.G+m.W+m.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";var c=r(26),f=r(27),a=r(4),s=r(50),l=r(7);t.exports=function(n,t,r){var e=l(n),i=r(s,e,""[n]),o=i[0],u=i[1];a(function(){var t={};return t[e]=function(){return 7},7!=""[n](t)})&&(f(String.prototype,n,o),c(RegExp.prototype,e,2==t?function(t,n){return u.call(t,this,n)}:function(t){return u.call(t,this)}))}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(70)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var e=r(1),u=r(19),c=r(46),f=r(69);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){var i=r(2),o=r(19),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){for(var e,i=r(3),o=r(26),u=r(78),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,l=(e=r(86))&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var c=r(17),f=r(77),a=r(11);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(211);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(10),i=r(74);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(148).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(71),i=r(74),o=r(81),u={};r(26)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var b=r(70),x=r(1),S=r(27),w=r(26),_=r(25),O=r(80),E=r(142),M=r(81),P=r(31),j=r(7)("iterator"),F=!([].keys&&"next"in[].keys()),A="values",L=function(){return this};t.exports=function(t,n,r,e,i,o,u){E(r,n,e);var c,f,a,s=function(t){if(!F&&t in p)return p[t];switch(t){case"keys":case A:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==A,v=!1,p=t.prototype,d=p[j]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,m="Array"==n&&p.entries||d;if(m&&(a=P(m.call(new t)))!==Object.prototype&&a.next&&(M(a,l,!0),b||_(a,j)||w(a,j,L)),h&&d&&d.name!==A&&(v=!0,y=function(){return d.call(this)}),b&&!u||!F&&!v&&p[j]||w(p,j,y),O[n]=y,O[l]=L,i)if(c={values:h?y:s(A),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else x(x.P+x.F*(F||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(154).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(a){var n=!0,o=document.createTextNode("");new a(t).observe(o,{characterData:!0}),i=function(){o.data=n=!n}}else if(l&&l.resolve){var u=l.resolve();i=function(){u.then(t)}}else i=function(){f.call(c,t)};return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(19);t.exports.f=function(t){return new e(t)}},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(46)(Function.call,i(30).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(128)("keys"),i=r(78);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var f=r(52),a=r(50);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(122),i=r(50);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(52),o=r(50);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(46),c=r(171),f=r(139),a=r(136),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},m="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},x=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:d&&d.now?e=function(t){d.now(u(b,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=x,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",x,!1)):e=m in a("script")?function(t){f.appendChild(a("script"))[m]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[L],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[K])throw R(N);var o=t[H]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[K])throw R(N);for(var c=t[H]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(9),y=r(70),g=r(130),m=r(26),b=r(75),x=r(4),S=r(68),w=r(52),_=r(11),O=r(189),E=r(72).f,M=r(10).f,P=r(133),j=r(81),F="ArrayBuffer",A="DataView",L="prototype",N="Wrong index!",T=p[F],I=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=T,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",H=d?"_b":"buffer",K=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!x(function(){T(1)})||!x(function(){new T(-1)})||x(function(){return new T,new T(1.5),new T(NaN),T.name!=F})){for(var Y,$=(T=function(t){return S(this,T),new D(O(t))})[L]=D[L],X=E(D),Q=0;X.length>Q;)(Y=X[Q++])in T||m(T,Y,D[Y]);y||($.constructor=T)}var Z=new I(new T(2)),tt=I[L].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||b(I[L],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else T=function(t){S(this,T,F);var n=O(t);this._b=P.call(Array(n),0),this[K]=n},I=function(t,n,r){S(this,I,A),S(t,T,A);var e=t[K],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[H]=t,this[J]=i,this[K]=r},d&&(l(T,q,"_l"),l(I,"buffer","_b"),l(I,q,"_l"),l(I,z,"_o")),b(I[L],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(T,F),j(I,A),m(I[L],g.VIEW,!0),n[F]=T,n[A]=I},function(t,n,r){var e=r(3),i=r(49),o=r(70),u=r(190),c=r(10).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(49).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(66),i=r(174),o=r(80),u=r(32);t.exports=r(143)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(77),l=r(11);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(69);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(19),l=r(17),h=r(115),v=r(11);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(19),u=r(5),c=r(171),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(10).f,c=r(71),f=r(75),a=r(46),s=r(68),l=r(69),e=r(143),i=r(174),o=r(76),h=r(9),v=r(67).fastKey,p=r(83),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(114),i=r(163);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(75),c=r(67).getWeak,i=r(2),f=r(5),a=r(68),s=r(69),e=r(48),l=r(25),h=r(83),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(121),d=r(5),y=r(11),g=r(46),m=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[m])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(9)&&!r(4)(function(){return 7!=Object.defineProperty(r(136)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(145),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:(r=(n=(1+c/u)*e)-(n-e))>f||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(73),v=r(125),p=r(116),d=r(17),y=r(115),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=d(t),e=arguments.length,i=1,o=v.f,u=p.f;i<e;)for(var c,f=y(arguments[i++]),a=o?h(f).concat(o(f)):h(f),s=a.length,l=0;l<s;)u.call(f,c=a[l++])&&(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(10),c=r(2),f=r(73);t.exports=r(9)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(32),i=r(72).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(25),c=r(32),f=r(117)(!1),a=r(149)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(73),a=r(32),s=r(116).f;t.exports=function(c){return function(t){for(var n,r=a(t),e=f(r),i=e.length,o=0,u=[];o<i;)s.call(r,n=e[o++])&&u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(72),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(153)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(153),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(147);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n,r){var s=r(11),l=r(152),h=r(50);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(52),i=r(11);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(166),i=r(83);t.exports=r(118)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){r(9)&&"g"!=/./g.flags&&r(10).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(166),i=r(83);t.exports=r(118)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(48)(0),u=r(27),i=r(67),c=r(178),f=r(168),a=r(5),s=r(4),l=r(83),h="WeakMap",v=i.getWeak,p=Object.isExtensible,d=f.ufstore,y={},g=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},m={get:function(t){if(a(t)){var n=v(t);return!0===n?d(l(this,h)).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(l(this,h),t,n)}},b=t.exports=r(118)(h,g,m,f,!0,!0);s(function(){return 7!=(new b).set((Object.freeze||Object)(y),7).get(y)})&&(c((o=f.getConstructor(g,h)).prototype,m),i.NEED=!0,e(["delete","has","get","set"],function(e){var t=b.prototype,i=t[e];u(t,e,function(t,n){if(!a(t)||p(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&lt; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &gt;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"});var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(159)),a=e((e(r(160)),r(410))),u=e(r(131)),c=e(r(198)),s=r(132);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(409),r(204),r(207),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0,n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(N,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[m];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},m=g.iterator||"@@iterator",b=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag",S="object"==typeof N,w=t.regeneratorRuntime;if(w)S&&(N.exports=w);else{(w=t.regeneratorRuntime=S?N.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[m]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,m)&&(j=A);var L=n.prototype=h.prototype=Object.create(j);r.prototype=L.constructor=n,n.constructor=r,n[x]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(L),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[b]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(L),L[x]="Generator",L[m]=function(){return this},L.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,,function(t,n,r){r(217),t.exports=r(49).RegExp.escape},,,,function(t,n,r){var e=r(5),i=r(121),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(53);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(73),f=r(125),a=r(116);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(1),i=r(215)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(162)}),r(66)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(133)}),r(66)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(66)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(66)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(46),e=r(1),v=r(17),p=r(173),d=r(141),y=r(11),g=r(135),m=r(157);e(e.S+e.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=m(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(121)})},function(t,n,r){"use strict";var e=r(1),i=r(32),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(32),o=r(52),u=r(11),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(135);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(164);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(164);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(139),a=r(45),s=r(77),l=r(11),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(19),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(76)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(212);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(26)(i,e,r(213))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(27)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(165)})},function(t,n,r){"use strict";var e=r(5),i=r(31),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(10).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(10).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(9)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(176),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(145);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(144);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(175)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):i+=0<r?(e=r/c)*e:r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(145)})},function(t,n,r){var e=r(1),i=r(144),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(144),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(25),o=r(45),u=r(140),s=r(53),c=r(4),f=r(72).f,a=r(30).f,l=r(10).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(71)(y))==v,m="trim"in String.prototype,b=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=m?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(b(n)),r,p):b(n)};for(var x,S=r(9)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,x=S[w])&&!i(p,x)&&l(p,x,a(d,x));(p.prototype=y).constructor=p,r(27)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(172),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(184);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(185);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(52),s=r(161),l=r(152),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=o*y(2,69,1);4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}()-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return 0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(161),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(178)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(71)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(9),"Object",{defineProperties:r(179)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(9),"Object",{defineProperty:r(10).f})},function(t,n,r){var e=r(5),i=r(67).onFreeze;r(51)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(32),i=r(30).f;r(51)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(51)("getOwnPropertyNames",function(){return r(180).f})},function(t,n,r){var e=r(17),i=r(31);r(51)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(51)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(51)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(51)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(216)})},function(t,n,r){var e=r(17),i=r(73);r(51)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(67).onFreeze;r(51)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(67).onFreeze;r(51)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(148).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(27)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(184);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(185);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(70),f=r(3),a=r(46),s=r(114),l=r(1),h=r(5),v=r(19),p=r(68),d=r(69),y=r(129),g=r(154).set,m=r(146)(),b=r(147),x=r(186),S=r(187),w="Promise",_=f.TypeError,O=f.process,E=f[w],M="process"==s(O),P=function(){},j=i=b.f,F=!!function(){try{var t=E.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(P,P)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof n}catch(t){}}(),A=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},L=function(a,n){if(!a._n){a._n=!0;var r=a._c;m(function(){for(var c=a._v,f=1==a._s,t=0;r.length>t;)!function(t){var n,r,e=f?t.ok:t.fail,i=t.resolve,o=t.reject,u=t.domain;try{e?(f||(2==a._h&&I(a),a._h=1),!0===e?n=c:(u&&u.enter(),n=e(c),u&&u.exit()),n===t.promise?o(_("Promise-chain cycle")):(r=A(n))?r.call(n,i,o):i(n)):o(c)}catch(t){o(t)}}(r[t++]);a._c=[],a._n=!1,n&&!a._h&&N(a)})}},N=function(o){g.call(f,function(){var t,n,r,e=o._v,i=T(o);if(i&&(t=x(function(){M?O.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=M||T(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if((n=r[e++]).fail||!T(n.promise))return!1;return!0},I=function(n){g.call(f,function(){var t;M?O.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},k=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),L(n,!0))},R=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw _("Promise can't be resolved itself");(r=A(t))?m(function(){var n={_w:e,_d:!1};try{r.call(t,a(R,n,1),a(k,n,1))}catch(t){k.call(n,t)}}):(e._v=t,e._s=1,L(e,!1))}catch(t){k.call({_w:e,_d:!1},t)}}};F||(E=function(t){p(this,E,w,"_h"),v(t),e.call(this);try{t(a(R,this,1),a(k,this,1))}catch(t){k.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(75)(E.prototype,{then:function(t,n){var r=j(y(this,E));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=M?O.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(R,t,1),this.reject=a(k,t,1)},b.f=j=function(t){return t===E||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!F,{Promise:E}),r(81)(E,w),r(76)(w),u=r(49)[w],l(l.S+l.F*!F,w,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!F),w,{resolve:function(t){return S(c&&this===u?E:this,t)}}),l(l.S+l.F*!(F&&r(123)(function(t){E.all(t).catch(P)})),w,{all:function(t){var u=this,n=j(u),c=n.resolve,f=n.reject,r=x(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=x(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(19),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(71),f=r(19),a=r(2),s=r(5),i=r(4),l=r(165),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(10),i=r(1),o=r(2),u=r(53);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(30).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(142)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(30),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(31),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(30),c=r(31),f=r(25),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(183)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(148);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(10),a=r(30),s=r(31),l=r(25),e=r(1),h=r(74),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}return l(c,"value")?!(!1===c.writable||!p(u)||((i=a.f(u,r)||h(0)).value=e,f.f(u,r,i),0)):void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(140),i=r(10).f,u=r(72).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(9)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})}(d[y++]);(l.constructor=a).prototype=l,r(27)(e,"RegExp",a)}r(76)("RegExp")},function(t,n,r){r(119)("match",1,function(e,i,t){return[function(t){"use strict";var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},t]})},function(t,n,r){r(119)("replace",2,function(i,o,u){return[function(t,n){"use strict";var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):u.call(String(r),t,n)},u]})},function(t,n,r){r(119)("search",1,function(e,i,t){return[function(t){"use strict";var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},t]})},function(t,n,r){r(119)("split",2,function(i,o,u){"use strict";var v=r(122),p=u,d=[].push,t="split",y="length",g="lastIndex";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[y]||2!="ab"[t](/(?:ab)*/)[y]||4!="."[t](/(.?)(.?)/)[y]||1<"."[t](/()()/)[y]||""[t](/.?/)[y]){var m=void 0===/()??/.exec("")[1];u=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!v(t))return p.call(r,t,n);var e,i,o,u,c,f=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=void 0===n?4294967295:n>>>0,h=new RegExp(t.source,a+"g");for(m||(e=new RegExp("^"+h.source+"$(?!\\s)",a));(i=h.exec(r))&&!((o=i.index+i[0][y])>s&&(f.push(r.slice(s,i.index)),!m&&1<i[y]&&i[0].replace(e,function(){for(c=1;c<arguments[y]-2;c++)void 0===arguments[c]&&(i[c]=void 0)}),1<i[y]&&i.index<r[y]&&d.apply(f,i.slice(1)),u=i[0][y],s=o,f[y]>=l));)h[g]===i.index&&h[g]++;return s===r[y]?!u&&h.test("")||f.push(""):f.push(r.slice(s)),f[y]>l?f.slice(0,l):f}}else"0"[t](void 0,0)[y]&&(u=function(t,n){return void 0===t&&0===n?[]:p.call(this,t,n)});return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):u.call(String(r),t,n)},u]})},function(t,n,r){"use strict";r(192);var e=r(2),i=r(120),o=r(9),u="toString",c=/./[u],f=function(t){r(27)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(28)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(150)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(11),c=r(151),f="endsWith",a=""[f];e(e.P+e.F*r(138)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(28)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(28)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(77),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(151);e(e.P+e.F*r(138)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(150)(!0);r(143)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(28)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(32),c=r(11);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(152)})},function(t,n,r){"use strict";r(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(11),o=r(151),u="startsWith",c=""[u];e(e.P+e.F*r(138)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(25),i=r(9),o=r(1),c=r(27),f=r(67).KEY,a=r(4),s=r(128),l=r(81),h=r(78),v=r(7),p=r(190),d=r(156),y=r(214),g=r(121),m=r(2),b=r(32),x=r(53),S=r(74),w=r(71),_=r(180),O=r(30),E=r(10),M=r(73),P=O.f,j=E.f,F=_.f,A=e.Symbol,L=e.JSON,N=L&&L.stringify,T="prototype",I=v("_hidden"),k=v("toPrimitive"),R={}.propertyIsEnumerable,C=s("symbol-registry"),D=s("symbols"),G=s("op-symbols"),W=Object[T],U="function"==typeof A,V=e.QObject,B=!V||!V[T]||!V[T].findChild,q=i&&a(function(){return 7!=w(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=P(W,n);e&&delete W[n],j(t,n,r),e&&t!==W&&j(W,n,e)}:j,z=function(t){var n=D[t]=w(A[T]);return n._k=t,n},H=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},K=function(t,n,r){return t===W&&K(G,n,r),m(t),n=x(n,!0),m(r),u(D,n)?(r.enumerable?(u(t,I)&&t[I][n]&&(t[I][n]=!1),r=w(r,{enumerable:S(0,!1)})):(u(t,I)||j(t,I,S(1,{})),t[I][n]=!0),q(t,n,r)):j(t,n,r)},J=function(t,n){m(t);for(var r,e=y(n=b(n)),i=0,o=e.length;i<o;)K(t,r=e[i++],n[r]);return t},Y=function(t){var n=R.call(this,t=x(t,!0));return!(this===W&&u(D,t)&&!u(G,t))&&(!(n||!u(this,t)||!u(D,t)||u(this,I)&&this[I][t])||n)},$=function(t,n){if(t=b(t),n=x(n,!0),t!==W||!u(D,n)||u(G,n)){var r=P(t,n);return!r||!u(D,n)||u(t,I)&&t[I][n]||(r.enumerable=!0),r}},X=function(t){for(var n,r=F(b(t)),e=[],i=0;r.length>i;)u(D,n=r[i++])||n==I||n==f||e.push(n);return e},Q=function(t){for(var n,r=t===W,e=F(r?G:b(t)),i=[],o=0;e.length>o;)!u(D,n=e[o++])||r&&!u(W,n)||i.push(D[n]);return i};U||(c((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===W&&r.call(G,t),u(this,I)&&u(this[I],n)&&(this[I][n]=!1),q(this,n,S(1,t))};return i&&B&&q(W,n,{configurable:!0,set:r}),z(n)})[T],"toString",function(){return this._k}),O.f=$,E.f=K,r(72).f=_.f=X,r(116).f=Y,r(125).f=Q,i&&!r(70)&&c(W,"propertyIsEnumerable",Y,!0),p.f=function(t){return z(v(t))}),o(o.G+o.W+o.F*!U,{Symbol:A});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)v(Z[tt++]);for(var nt=M(v.store),rt=0;nt.length>rt;)d(nt[rt++]);o(o.S+o.F*!U,"Symbol",{for:function(t){return u(C,t+="")?C[t]:C[t]=A(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var n in C)if(C[n]===t)return n},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!U,"Object",{create:function(t,n){return void 0===n?w(t):J(w(t),n)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),L&&o(o.S+o.F*(!U||a(function(){var t=A();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!H(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return"function"==typeof(n=e[1])&&(r=n),!r&&g(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!H(n))return n}),e[1]=n,N.apply(L,e)}}}),A[T][k]||r(26)(A[T],k,A[T].valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(130),o=r(155),a=r(2),s=r(77),l=r(11),u=r(5),c=r(3).ArrayBuffer,h=r(129),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(76)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(130).ABV,{DataView:r(155).DataView})},function(t,n,r){r(56)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(56)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(168),i=r(83);r(118)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(169),o=r(17),u=r(11),c=r(19),f=r(134);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(66)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(169),o=r(17),u=r(11),c=r(52),f=r(134);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(66)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(66)("includes")},function(t,n,r){var e=r(1),i=r(146)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(126)("Map")},function(t,n,r){r(127)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(167)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(177),u=r(175);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(177)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(19),u=r(10);r(9)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(19),u=r(10);r(9)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(182)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(183),a=r(32),s=r(30),l=r(135);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(31),c=r(30).f;r(9)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(31),c=r(30).f;r(9)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(182)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(49),i=r(146)(),c=r(7)("observable"),f=r(19),a=r(2),s=r(68),l=r(75),h=r(26),v=r(69),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},b=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};b.prototype=l({},{unsubscribe:function(){m(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{m(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(76)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(49),o=r(3),u=r(129),c=r(187);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(147),o=r(186);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(55),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(55),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(193),u=r(163),e=r(55),i=r(2),c=r(31),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(55),i=r(2),o=r(31),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(55),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(55),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(55),i=r(2),o=r(31),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(55),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(55),i=r(2),o=r(19),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(126)("Set")},function(t,n,r){r(127)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(167)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(150)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(50),o=r(11),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(142)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(188);e(e.P,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(188);e(e.P,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(156)("asyncIterator")},function(t,n,r){r(156)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(126)("WeakMap")},function(t,n,r){r(127)("WeakMap")},function(t,n,r){r(126)("WeakSet")},function(t,n,r){r(127)("WeakSet")},function(t,n,r){for(var e=r(158),i=r(73),o=r(27),u=r(3),c=r(26),f=r(80),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],m=v[g],b=u[g],x=b&&b.prototype;if(x&&(x[s]||c(x,s,h),x[l]||c(x,l,g),f[g]=h,m))for(y in e)x[y]||o(x,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(154);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=e.navigator,u=[].slice,c=!!o&&/MSIE .\./.test(o.userAgent),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(337),r(276),r(278),r(277),r(280),r(282),r(287),r(281),r(279),r(289),r(288),r(284),r(285),r(283),r(275),r(286),r(290),r(291),r(243),r(245),r(244),r(293),r(292),r(263),r(273),r(274),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(324),r(329),r(336),r(327),r(319),r(320),r(325),r(330),r(332),r(315),r(316),r(317),r(318),r(321),r(322),r(323),r(326),r(328),r(331),r(333),r(334),r(335),r(238),r(240),r(239),r(242),r(241),r(227),r(225),r(231),r(228),r(234),r(236),r(224),r(230),r(221),r(235),r(219),r(233),r(232),r(226),r(229),r(218),r(220),r(223),r(222),r(237),r(158),r(309),r(314),r(192),r(310),r(311),r(312),r(313),r(294),r(191),r(193),r(194),r(349),r(338),r(339),r(344),r(347),r(348),r(342),r(345),r(343),r(346),r(340),r(341),r(295),r(296),r(297),r(298),r(299),r(302),r(300),r(301),r(303),r(304),r(305),r(306),r(308),r(307),r(352),r(350),r(351),r(393),r(396),r(395),r(397),r(398),r(394),r(399),r(400),r(374),r(377),r(373),r(371),r(372),r(375),r(376),r(358),r(392),r(357),r(391),r(403),r(405),r(356),r(390),r(402),r(404),r(355),r(401),r(354),r(359),r(360),r(361),r(362),r(363),r(365),r(364),r(366),r(367),r(368),r(370),r(369),r(379),r(380),r(381),r(382),r(384),r(383),r(386),r(385),r(387),r(388),r(389),r(353),r(378),r(408),r(407),r(406),t.exports=r(49)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/./main.e8862b.js"></script><script>!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src","/slider.5b7e29.js")}()</script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script><script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)"><div class="tools-nav header-menu"><ul style="width:70%"><li style="width:33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">All articles</a></li><li style="width:33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">Friends</a></li><li style="width:33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">About me</a></li></ul></div><div class="tools-wrap"><section class="tools-section tools-section-all" q-show="innerArchive"><div class="search-wrap"> <input class="search-ipt" q-model="search" type="text" placeholder="find something…"><i class="icon-search icon" q-show="search|isEmptyStr"></i><i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i></div><div class="widget tagcloud search-tag"><p class="search-tag-wording">tag:</p> <label class="search-switch"><input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags"></label><ul class="article-tag-list" q-show="showTags"><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">Algorithm</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color4">C++</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">DS</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">Android</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">Tech</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">ML</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">DL</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color1">Essay</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color4">git</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">hexo</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color2">golang</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">HTML</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color1">Javascript</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color4">CSS</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">js</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">html</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color5">Java</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color1">Redis</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color1">MYSQL</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color2">Spring</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color1">linux</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color2">papers</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color3">RL</a></li><li class="article-tag-list-item"> <a href="javascript:void(0)" class="js-tag color4">k8s</a></li><div class="clearfix"></div></ul></div><ul class="search-ul"><p q-show="jsonFail" style="padding:20px;font-size:12px"> 缺失模块。<br>1、请确保node版本大于6.2<br>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br> npm i hexo-generator-json-content --save<br><br> 3、在根目录_config.yml里添加配置：<pre style="font-size:12px" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre></p><li class="search-li" q-repeat="items" q-show="isShow"><a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a><p class="search-time"><i class="icon-calendar icon"></i><span q-text="date|dateformat"></span></p><p class="search-tag"><i class="icon-price-tags icon"></i><span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span></p></li></ul></section><section class="tools-section tools-section-friends" q-show="friends"><ul class="search-ul"><li class="search-li"><a href="https://leetcode-cn.com/u/louris/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i> 我的力扣</a></li><li class="search-li"><a href="https://www.six1110.top/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i> 饭勺</a></li><li class="search-li"><a href="https://www.zjcheng.site/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i> 中建</a></li></ul></section><section class="tools-section tools-section-me" q-show="aboutme"><div class="aboutme-wrap" id="js-aboutme">做一个安静细微的人，&lt;br&gt; 于角落里自在开放，&lt;br&gt; 默默悦人，&lt;br&gt; 却始终不引起过分热闹的关注，&lt;br&gt; 保有独立而随意的品格，&lt;br&gt; 这就很好。&lt;br&gt;&lt;br&gt; Stick to what you insist on,&lt;br&gt; believe what you believe!&lt;br&gt; Life hastily for decades,&lt;br&gt; do what I can!</div></section></div></div><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},react:{opacity:1},log:!1})</script></body></html>